1
00:00:06,399 --> 00:00:09,280
yeah so i mean the reason i think

2
00:00:07,759 --> 00:00:10,559
javascript sucks is we've written quite

3
00:00:09,280 --> 00:00:12,399
a lot of it

4
00:00:10,559 --> 00:00:13,678
and so we're really sure that it sucks

5
00:00:12,400 --> 00:00:15,120
yeah

6
00:00:13,679 --> 00:00:16,320
as i said the purpose of javascript is

7
00:00:15,120 --> 00:00:17,840
to make people think that java is good

8
00:00:16,320 --> 00:00:21,039
language

9
00:00:17,840 --> 00:00:24,080
um and it does great at that you know

10
00:00:21,039 --> 00:00:26,160
so you know

11
00:00:24,080 --> 00:00:27,598
okay perfect are we ready why are you

12
00:00:26,160 --> 00:00:28,880
sitting comfortably

13
00:00:27,599 --> 00:00:31,199
those of you who may have seen my

14
00:00:28,880 --> 00:00:33,280
presentation in um uh

15
00:00:31,199 --> 00:00:34,880
uh the conference may be surprised to

16
00:00:33,280 --> 00:00:37,600
discover this has a similar title

17
00:00:34,880 --> 00:00:38,480
uh similar abstract and even the content

18
00:00:37,600 --> 00:00:40,399
is the same

19
00:00:38,480 --> 00:00:41,839
so uh you know i don't know so if you

20
00:00:40,399 --> 00:00:45,120
get bored just uh

21
00:00:41,840 --> 00:00:48,000
leave that would be my tip you know

22
00:00:45,120 --> 00:00:48,000
anyway good

23
00:00:48,160 --> 00:00:52,398
i think this is plugged in i don't know

24
00:00:50,079 --> 00:00:54,640
who checks that but hopefully it works

25
00:00:52,399 --> 00:00:56,000
is there a yeah ah there's a number

26
00:00:54,640 --> 00:00:57,920
there

27
00:00:56,000 --> 00:01:00,719
it says avx and it doesn't say mute so

28
00:00:57,920 --> 00:01:00,719
that's probably a good idea

29
00:01:01,120 --> 00:01:04,720
okay i'll talk talk talk and i'll shoot

30
00:01:03,199 --> 00:01:06,399
anyone that looks like they're leaving

31
00:01:04,720 --> 00:01:12,960
with the uh

32
00:01:06,400 --> 00:01:15,439
no never mind

33
00:01:12,960 --> 00:01:17,600
can you you can just try and get the eye

34
00:01:15,439 --> 00:01:19,199
yeah there we go perfect

35
00:01:17,600 --> 00:01:21,679
so my thesis is that web copy and paste

36
00:01:19,200 --> 00:01:25,200
is a disaster and um anyway

37
00:01:21,680 --> 00:01:26,080
here we go uh see beforehand um

38
00:01:25,200 --> 00:01:28,720
it's good to look at always the

39
00:01:26,080 --> 00:01:30,079
competition uh before we get too worried

40
00:01:28,720 --> 00:01:31,119
about the fact something doesn't work in

41
00:01:30,079 --> 00:01:32,639
in collaboration

42
00:01:31,119 --> 00:01:34,560
let's try the competition so if you copy

43
00:01:32,640 --> 00:01:36,000
and paste this google

44
00:01:34,560 --> 00:01:37,840
the spreadsheet which is just a very

45
00:01:36,000 --> 00:01:38,880
standard xlsx file there's no magic

46
00:01:37,840 --> 00:01:41,520
tricks or nasty

47
00:01:38,880 --> 00:01:43,119
things in it and you copy it in google

48
00:01:41,520 --> 00:01:45,360
docs

49
00:01:43,119 --> 00:01:46,399
this is what you get which is pretty

50
00:01:45,360 --> 00:01:48,079
good so i mean we get some of these

51
00:01:46,399 --> 00:01:50,880
numbers and things but no

52
00:01:48,079 --> 00:01:53,039
charts all the formulas are broken and

53
00:01:50,880 --> 00:01:54,560
so on

54
00:01:53,040 --> 00:01:56,079
if we do in excel interestingly we get a

55
00:01:54,560 --> 00:01:57,360
different set of breakage so in this

56
00:01:56,079 --> 00:01:58,719
case we actually get

57
00:01:57,360 --> 00:02:01,920
some of the conditional formats coming

58
00:01:58,719 --> 00:02:05,600
across and all the numbers are zero

59
00:02:01,920 --> 00:02:08,239
and and stuff and still no charts

60
00:02:05,600 --> 00:02:09,758
um and of course in uh in the old old

61
00:02:08,239 --> 00:02:13,040
calabre online i guess

62
00:02:09,758 --> 00:02:16,720
prior to four two uh you would get

63
00:02:13,040 --> 00:02:19,040
uh a text import dialogue uh yeah

64
00:02:16,720 --> 00:02:20,720
which was not great so uh we need to fix

65
00:02:19,040 --> 00:02:22,000
that

66
00:02:20,720 --> 00:02:24,080
um of course if you were pasting inside

67
00:02:22,000 --> 00:02:26,400
the same document you had this internal

68
00:02:24,080 --> 00:02:27,840
copy and paste which basically keeps the

69
00:02:26,400 --> 00:02:29,920
stuff on the server and just

70
00:02:27,840 --> 00:02:31,599
moves it around so it's as good as or as

71
00:02:29,920 --> 00:02:33,839
bad as our internal

72
00:02:31,599 --> 00:02:35,359
uh copy and paste was originally and of

73
00:02:33,840 --> 00:02:36,879
course no data moves around it's rather

74
00:02:35,360 --> 00:02:39,840
nice it stays on the server

75
00:02:36,879 --> 00:02:40,879
and all it's good but the customers

76
00:02:39,840 --> 00:02:42,640
complain because they

77
00:02:40,879 --> 00:02:44,720
they copy and then they're surprised

78
00:02:42,640 --> 00:02:48,559
that they can't paste it in another tab

79
00:02:44,720 --> 00:02:49,599
or also so how can we fix that well we

80
00:02:48,560 --> 00:02:52,879
look at the web clipboard

81
00:02:49,599 --> 00:02:55,119
paste apis and they're very very weird

82
00:02:52,879 --> 00:02:56,160
and and uh yeah they're they're pretty

83
00:02:55,120 --> 00:02:56,959
mixed i don't know if you've ever seen

84
00:02:56,160 --> 00:02:58,400
these dialogues

85
00:02:56,959 --> 00:03:00,080
uh your browser can't access the

86
00:02:58,400 --> 00:03:02,640
clipboard have you seen that one

87
00:03:00,080 --> 00:03:03,120
yeah i have so we have an equivalent

88
00:03:02,640 --> 00:03:04,958
which is

89
00:03:03,120 --> 00:03:06,560
limited access use these keyboard

90
00:03:04,959 --> 00:03:08,000
shortcuts um there's quite a lot of work

91
00:03:06,560 --> 00:03:09,599
have gone into these you'll see on macs

92
00:03:08,000 --> 00:03:10,800
they often have a mac sign instead of a

93
00:03:09,599 --> 00:03:12,319
control sign you know someone's put a

94
00:03:10,800 --> 00:03:13,360
little love and care into explaining to

95
00:03:12,319 --> 00:03:15,839
the user

96
00:03:13,360 --> 00:03:16,959
why it's so bad although not very good

97
00:03:15,840 --> 00:03:18,720
explanation

98
00:03:16,959 --> 00:03:20,879
um yeah so there's a whole load of

99
00:03:18,720 --> 00:03:21,440
horrible things here uh security uh is

100
00:03:20,879 --> 00:03:24,798
of course

101
00:03:21,440 --> 00:03:25,120
a primary concern um but it but in terms

102
00:03:24,799 --> 00:03:26,640
of

103
00:03:25,120 --> 00:03:28,319
security you can often work around it so

104
00:03:26,640 --> 00:03:29,839
you have to have selected text

105
00:03:28,319 --> 00:03:32,640
in order to be able to copy something

106
00:03:29,840 --> 00:03:34,400
onto the clipboard so well why not just

107
00:03:32,640 --> 00:03:35,920
create a hidden text entry and put the

108
00:03:34,400 --> 00:03:37,200
text in it and then select it and then

109
00:03:35,920 --> 00:03:39,119
you can copy onto the clipboard

110
00:03:37,200 --> 00:03:40,238
great um so there's a whole load of

111
00:03:39,120 --> 00:03:42,720
things like this

112
00:03:40,239 --> 00:03:44,400
and and you just have to keep tweaking

113
00:03:42,720 --> 00:03:46,560
and fooling around and retrying

114
00:03:44,400 --> 00:03:48,480
um this nonsense until you're actually

115
00:03:46,560 --> 00:03:49,920
allowed to write stuff to the clipboard

116
00:03:48,480 --> 00:03:52,319
and since none of this is visible to the

117
00:03:49,920 --> 00:03:53,679
user all of that security foo is a total

118
00:03:52,319 --> 00:03:55,439
waste of time and just makes things

119
00:03:53,680 --> 00:03:58,720
fragile and broken

120
00:03:55,439 --> 00:04:00,799
um so ironically ie 11 which is

121
00:03:58,720 --> 00:04:01,840
the best noir of web developers it is

122
00:04:00,799 --> 00:04:03,760
the browser

123
00:04:01,840 --> 00:04:05,120
from hell that breaks all the modern

124
00:04:03,760 --> 00:04:06,159
javascript you want

125
00:04:05,120 --> 00:04:07,840
and every time you think you've got a

126
00:04:06,159 --> 00:04:09,679
good idea to clean up your javascript it

127
00:04:07,840 --> 00:04:11,360
doesn't work on ie11

128
00:04:09,680 --> 00:04:13,040
actually had a really good idea which

129
00:04:11,360 --> 00:04:14,720
was this and then when you wanted to do

130
00:04:13,040 --> 00:04:17,519
a copy of paste it would go

131
00:04:14,720 --> 00:04:19,279
oh well do you want to let this web page

132
00:04:17,519 --> 00:04:21,519
actually use the clipboard

133
00:04:19,279 --> 00:04:23,280
and this is you would think a reasonably

134
00:04:21,519 --> 00:04:25,600
sensible thing to ask

135
00:04:23,280 --> 00:04:26,479
unfortunately didn't catch on so what

136
00:04:25,600 --> 00:04:27,680
can you do

137
00:04:26,479 --> 00:04:29,520
so google docs has an even more

138
00:04:27,680 --> 00:04:32,160
refreshing approach um

139
00:04:29,520 --> 00:04:33,758
so google's chrome ship a browser that

140
00:04:32,160 --> 00:04:35,199
doesn't work by default for copy and

141
00:04:33,759 --> 00:04:37,680
paste

142
00:04:35,199 --> 00:04:39,360
presumably so the security team gets off

143
00:04:37,680 --> 00:04:40,400
scot-free out of jail you know it's not

144
00:04:39,360 --> 00:04:41,919
our problem that

145
00:04:40,400 --> 00:04:44,400
he was watching your copy and paste

146
00:04:41,919 --> 00:04:46,880
buffer as you typed in in another

147
00:04:44,400 --> 00:04:48,320
file but google docs obviously they want

148
00:04:46,880 --> 00:04:49,759
their users to make it usable so the

149
00:04:48,320 --> 00:04:52,400
same company

150
00:04:49,759 --> 00:04:54,320
ships a plug-in for its own browser that

151
00:04:52,400 --> 00:04:56,239
you must go away and install in order to

152
00:04:54,320 --> 00:04:57,759
be able to copy cut and paste

153
00:04:56,240 --> 00:04:59,360
so it'd be just great if this team

154
00:04:57,759 --> 00:05:00,160
talked to this team and actually

155
00:04:59,360 --> 00:05:02,800
installed

156
00:05:00,160 --> 00:05:03,600
you know like just tried to fix the

157
00:05:02,800 --> 00:05:05,199
situation

158
00:05:03,600 --> 00:05:06,880
of course in theory there are all sorts

159
00:05:05,199 --> 00:05:08,240
of horrible things you can do with copy

160
00:05:06,880 --> 00:05:11,199
and paste so for example

161
00:05:08,240 --> 00:05:12,960
um if you have png images you can create

162
00:05:11,199 --> 00:05:14,240
a relatively small png file that

163
00:05:12,960 --> 00:05:15,198
explodes

164
00:05:14,240 --> 00:05:17,039
you know it's just the optimal

165
00:05:15,199 --> 00:05:17,840
compression thing to like terabytes of

166
00:05:17,039 --> 00:05:19,360
nothing

167
00:05:17,840 --> 00:05:22,080
and can consume all your memory in

168
00:05:19,360 --> 00:05:24,080
theory um and so it's a massive security

169
00:05:22,080 --> 00:05:25,039
risk to allow anyone to paste the png so

170
00:05:24,080 --> 00:05:26,080
interestingly

171
00:05:25,039 --> 00:05:28,719
and we'll come to this later when you

172
00:05:26,080 --> 00:05:31,599
when you paste images they typically

173
00:05:28,720 --> 00:05:32,000
decompress to operating system resources

174
00:05:31,600 --> 00:05:35,120
flat

175
00:05:32,000 --> 00:05:37,360
buffers of pixels which are much bigger

176
00:05:35,120 --> 00:05:38,639
all the time but in the corner case

177
00:05:37,360 --> 00:05:41,039
might be smaller

178
00:05:38,639 --> 00:05:42,720
crazy anyway so uh the other problem is

179
00:05:41,039 --> 00:05:44,320
that they really don't want a little bad

180
00:05:42,720 --> 00:05:47,120
hat app sitting there sneaking your

181
00:05:44,320 --> 00:05:47,120
clipboard all the time

182
00:05:47,280 --> 00:05:52,000
so yes um so so there's all sorts of

183
00:05:50,160 --> 00:05:53,199
other bad ideas like so jquery is

184
00:05:52,000 --> 00:05:55,360
something that's supposed to make

185
00:05:53,199 --> 00:05:56,800
our writing software easy on um in

186
00:05:55,360 --> 00:05:58,080
javascript i don't know if you've read

187
00:05:56,800 --> 00:05:59,360
javascript but the basic idea of

188
00:05:58,080 --> 00:06:02,479
javascript is to sort of

189
00:05:59,360 --> 00:06:03,039
hybridize perl um with like a single

190
00:06:02,479 --> 00:06:04,560
global

191
00:06:03,039 --> 00:06:06,080
state store which is the dom like a

192
00:06:04,560 --> 00:06:07,680
massive global variable so

193
00:06:06,080 --> 00:06:09,440
so you search with all these ridiculous

194
00:06:07,680 --> 00:06:11,120
regular expressions in your

195
00:06:09,440 --> 00:06:13,039
massive global variable and you grab

196
00:06:11,120 --> 00:06:13,840
around anyway but one of the nice things

197
00:06:13,039 --> 00:06:17,039
is that um

198
00:06:13,840 --> 00:06:18,159
when you tap for example um the click

199
00:06:17,039 --> 00:06:19,680
event which is

200
00:06:18,160 --> 00:06:21,039
supposed to be a privileged event so you

201
00:06:19,680 --> 00:06:22,960
can actually access the clipboard when

202
00:06:21,039 --> 00:06:25,680
someone's actually interacted with it

203
00:06:22,960 --> 00:06:27,198
in the event handler but of course the

204
00:06:25,680 --> 00:06:28,800
click event actually isn't it's jquery

205
00:06:27,199 --> 00:06:30,319
making up an event from something in a

206
00:06:28,800 --> 00:06:31,120
timer somewhere later that lost your

207
00:06:30,319 --> 00:06:34,240
privilege

208
00:06:31,120 --> 00:06:36,160
so yeah so some pretty horrible stuff

209
00:06:34,240 --> 00:06:38,479
um on ios we then have to have we

210
00:06:36,160 --> 00:06:40,720
actually have to have a an href to

211
00:06:38,479 --> 00:06:41,840
hash in order to get the privilege to be

212
00:06:40,720 --> 00:06:43,759
able to

213
00:06:41,840 --> 00:06:45,280
get stuff off the clipboard this is kind

214
00:06:43,759 --> 00:06:46,240
of like the world's least documented

215
00:06:45,280 --> 00:06:48,880
miss feature

216
00:06:46,240 --> 00:06:50,479
and it only affects ios oh interestingly

217
00:06:48,880 --> 00:06:52,159
as a general rule chrome will run any

218
00:06:50,479 --> 00:06:53,758
javascript that you give it perfectly

219
00:06:52,160 --> 00:06:55,360
even if the javascript is wrong

220
00:06:53,759 --> 00:06:57,039
you know even the bugs in it it works in

221
00:06:55,360 --> 00:06:57,599
chrome for some reason no one knows why

222
00:06:57,039 --> 00:06:59,039
this is

223
00:06:57,599 --> 00:07:01,199
but on every other browser it just

224
00:06:59,039 --> 00:07:03,520
breaks so um yeah

225
00:07:01,199 --> 00:07:05,199
i'm ie 11 so you see there is at least a

226
00:07:03,520 --> 00:07:06,240
copy paste api so you can get an object

227
00:07:05,199 --> 00:07:08,800
for the clipboard

228
00:07:06,240 --> 00:07:09,680
and you can write to it or read from it

229
00:07:08,800 --> 00:07:11,199
and one of the great

230
00:07:09,680 --> 00:07:13,360
wonders of this is that when you when

231
00:07:11,199 --> 00:07:15,120
you read from it um

232
00:07:13,360 --> 00:07:16,479
you sometimes get an error but sometimes

233
00:07:15,120 --> 00:07:18,240
you don't get an error

234
00:07:16,479 --> 00:07:19,680
um depending on browser so you don't

235
00:07:18,240 --> 00:07:20,880
really know if there is nothing on it or

236
00:07:19,680 --> 00:07:23,280
whether you just

237
00:07:20,880 --> 00:07:24,960
you know fail to read in other cases

238
00:07:23,280 --> 00:07:26,239
when you try and write to it it says oh

239
00:07:24,960 --> 00:07:27,680
i successfully wrote

240
00:07:26,240 --> 00:07:30,000
but it's actually writing it to like a

241
00:07:27,680 --> 00:07:32,240
isolated app specific secure clipboard

242
00:07:30,000 --> 00:07:33,440
that no other application can read from

243
00:07:32,240 --> 00:07:35,280
which is kind of great so you know i

244
00:07:33,440 --> 00:07:37,199
succeeded in doing something useful

245
00:07:35,280 --> 00:07:38,880
so even detecting that it's failed is

246
00:07:37,199 --> 00:07:40,560
quite hard um

247
00:07:38,880 --> 00:07:42,639
ie 11 though excels all of these things

248
00:07:40,560 --> 00:07:44,000
it doesn't have any way to

249
00:07:42,639 --> 00:07:45,680
really access the system clipboard

250
00:07:44,000 --> 00:07:47,039
except for text

251
00:07:45,680 --> 00:07:49,199
but what you can do is you can create a

252
00:07:47,039 --> 00:07:50,960
hidden content editable which you can

253
00:07:49,199 --> 00:07:54,160
shove html into

254
00:07:50,960 --> 00:07:55,359
uh pre-select it and then force the

255
00:07:54,160 --> 00:07:56,639
browser to copy what happened to be

256
00:07:55,360 --> 00:07:58,560
selected onto the clipboard

257
00:07:56,639 --> 00:07:59,680
if you're lucky there's a wonderful blog

258
00:07:58,560 --> 00:08:00,720
about this with all of this state

259
00:07:59,680 --> 00:08:03,199
machine and time

260
00:08:00,720 --> 00:08:04,800
timeout handlers and it's it's exciting

261
00:08:03,199 --> 00:08:05,840
but amazingly if you debug this for a

262
00:08:04,800 --> 00:08:08,080
week it works

263
00:08:05,840 --> 00:08:09,359
um so anyway you can copy and paste html

264
00:08:08,080 --> 00:08:12,479
into ie 11.

265
00:08:09,360 --> 00:08:14,319
which is which is awesome um for secure

266
00:08:12,479 --> 00:08:15,680
types i talked about the unpacked bitmap

267
00:08:14,319 --> 00:08:17,520
um you've got a choice of text plain

268
00:08:15,680 --> 00:08:19,440
text html and text rtf

269
00:08:17,520 --> 00:08:21,680
that's it you'll notice the recurring

270
00:08:19,440 --> 00:08:24,400
text theme

271
00:08:21,680 --> 00:08:26,400
so um so then you get mobile and mobile

272
00:08:24,400 --> 00:08:28,000
is particularly exciting um because

273
00:08:26,400 --> 00:08:30,000
again the security thing is all very

274
00:08:28,000 --> 00:08:30,560
nice um you know press control c or

275
00:08:30,000 --> 00:08:32,479
control v

276
00:08:30,560 --> 00:08:34,240
to do a paste that's great you have a

277
00:08:32,479 --> 00:08:36,080
security context the user

278
00:08:34,240 --> 00:08:37,919
really wanted to do that it wasn't some

279
00:08:36,080 --> 00:08:39,519
bad hacked actor

280
00:08:37,919 --> 00:08:40,559
catching a tab but the problem is on the

281
00:08:39,519 --> 00:08:42,080
mobile phone you don't really have a

282
00:08:40,559 --> 00:08:43,919
paste button

283
00:08:42,080 --> 00:08:45,760
so so what do you do well ios has a

284
00:08:43,919 --> 00:08:48,079
paste button a special paste button

285
00:08:45,760 --> 00:08:49,760
a gboard does have some kind of paste

286
00:08:48,080 --> 00:08:50,080
built in but it throws away any html it

287
00:08:49,760 --> 00:08:52,560
just

288
00:08:50,080 --> 00:08:54,640
stores text oh and and as it throws the

289
00:08:52,560 --> 00:08:55,760
html away it also in lines lots of tags

290
00:08:54,640 --> 00:08:57,279
that are in the header

291
00:08:55,760 --> 00:08:58,959
that aren't anything to do with stuff

292
00:08:57,279 --> 00:09:01,360
and paste them into your document

293
00:08:58,959 --> 00:09:02,239
so gboard is a nightmare for various

294
00:09:01,360 --> 00:09:04,480
reasons

295
00:09:02,240 --> 00:09:05,600
um yeah and we can't detect whether we

296
00:09:04,480 --> 00:09:07,040
succeed which is

297
00:09:05,600 --> 00:09:08,720
which is pretty bad so there's an exec

298
00:09:07,040 --> 00:09:10,240
command thing we have to do to say do

299
00:09:08,720 --> 00:09:13,120
the paste

300
00:09:10,240 --> 00:09:14,240
but it's unreliable so you get callbacks

301
00:09:13,120 --> 00:09:15,920
and you then have to have increments

302
00:09:14,240 --> 00:09:16,720
sort of counters of was i called was i

303
00:09:15,920 --> 00:09:19,760
not called

304
00:09:16,720 --> 00:09:21,279
and try and guess whether you succeeded

305
00:09:19,760 --> 00:09:23,200
and yes ios as i explained earlier is

306
00:09:21,279 --> 00:09:24,560
particularly exciting about uh you know

307
00:09:23,200 --> 00:09:27,120
debugging

308
00:09:24,560 --> 00:09:28,079
so so all of that would be bad enough

309
00:09:27,120 --> 00:09:30,959
but

310
00:09:28,080 --> 00:09:32,320
it's worse the the clipboard apis are

311
00:09:30,959 --> 00:09:34,000
all synchronous what does that mean that

312
00:09:32,320 --> 00:09:36,000
means that you have to have the data

313
00:09:34,000 --> 00:09:37,519
in your hand when you want to put it on

314
00:09:36,000 --> 00:09:39,120
the clipboard

315
00:09:37,519 --> 00:09:42,160
it has to be in the browser on the

316
00:09:39,120 --> 00:09:44,000
device during the secure context while

317
00:09:42,160 --> 00:09:47,120
the user clicks something

318
00:09:44,000 --> 00:09:48,640
or taps control v it's no use uh putting

319
00:09:47,120 --> 00:09:50,560
putting it on the clipboard later

320
00:09:48,640 --> 00:09:53,920
it just it's not going to work so all

321
00:09:50,560 --> 00:09:55,199
the control c cuts cut and copy

322
00:09:53,920 --> 00:09:57,040
the problem is that we don't really want

323
00:09:55,200 --> 00:09:58,399
to put all of the text you select in

324
00:09:57,040 --> 00:10:00,079
every format

325
00:09:58,399 --> 00:10:01,440
in the client as soon as you select it

326
00:10:00,080 --> 00:10:03,519
that's really stupid

327
00:10:01,440 --> 00:10:04,959
that's like loads of data and actually

328
00:10:03,519 --> 00:10:06,160
it's even worse than that if you select

329
00:10:04,959 --> 00:10:08,239
in a spreadsheet

330
00:10:06,160 --> 00:10:10,240
uh you know like a whole spreadsheet

331
00:10:08,240 --> 00:10:11,360
that's like a million rows with 16 000

332
00:10:10,240 --> 00:10:14,160
columns it's more than

333
00:10:11,360 --> 00:10:15,760
two to the 32 cells you really don't

334
00:10:14,160 --> 00:10:18,160
want to serialize that

335
00:10:15,760 --> 00:10:20,560
and then send it to the client just in

336
00:10:18,160 --> 00:10:23,519
case someone presses ctrl c

337
00:10:20,560 --> 00:10:25,199
that would really suck um and actually

338
00:10:23,519 --> 00:10:27,680
this is fundamentally unsolvable

339
00:10:25,200 --> 00:10:28,320
uh there's just no api for the web there

340
00:10:27,680 --> 00:10:30,640
to do this

341
00:10:28,320 --> 00:10:32,240
at all you you have to get another

342
00:10:30,640 --> 00:10:33,760
interaction from the user

343
00:10:32,240 --> 00:10:35,680
to get that context to be able to do it

344
00:10:33,760 --> 00:10:38,480
so well so what do we do

345
00:10:35,680 --> 00:10:40,719
um so it's it's all uh it's all pretty

346
00:10:38,480 --> 00:10:44,480
exciting what we do is

347
00:10:40,720 --> 00:10:46,640
well when you have a simple selection

348
00:10:44,480 --> 00:10:49,440
like a small chunk of words or a little

349
00:10:46,640 --> 00:10:50,079
thing uh we push these to the browser as

350
00:10:49,440 --> 00:10:51,760
html

351
00:10:50,079 --> 00:10:52,719
so as you select it we go yeah they'll

352
00:10:51,760 --> 00:10:55,120
probably want to do something with it

353
00:10:52,720 --> 00:10:56,560
push it to the browser

354
00:10:55,120 --> 00:10:58,399
and if you want to paste it to another

355
00:10:56,560 --> 00:11:00,160
online instance window what we do is we

356
00:10:58,399 --> 00:11:01,519
shove into that browser a magic cookie i

357
00:11:00,160 --> 00:11:03,439
think you've got a bit of that later

358
00:11:01,519 --> 00:11:05,519
so you can detect it's the same thing so

359
00:11:03,440 --> 00:11:07,519
if you're pasting in the same document

360
00:11:05,519 --> 00:11:09,360
it should all just be fine it detects

361
00:11:07,519 --> 00:11:12,880
that it's the same thing it shortcuts it

362
00:11:09,360 --> 00:11:15,519
nothing leaves the server all is good um

363
00:11:12,880 --> 00:11:17,279
yeah unfortunately for the complex cases

364
00:11:15,519 --> 00:11:18,560
uh first of all we show this dialogue if

365
00:11:17,279 --> 00:11:19,680
you'd like to share blah blah blah blah

366
00:11:18,560 --> 00:11:22,079
blah blah blah blah blah

367
00:11:19,680 --> 00:11:23,519
blah you have to click start download

368
00:11:22,079 --> 00:11:25,359
when you want it because we don't

369
00:11:23,519 --> 00:11:26,640
necessarily want to download it and then

370
00:11:25,360 --> 00:11:28,880
you have to click again to get it onto

371
00:11:26,640 --> 00:11:31,279
the the clipboard so it's a pretty

372
00:11:28,880 --> 00:11:32,560
it's a pretty sad experience but it's

373
00:11:31,279 --> 00:11:34,880
the best we can do

374
00:11:32,560 --> 00:11:36,000
so what can you do well it's not quite

375
00:11:34,880 --> 00:11:37,519
the best we can do we can do a little

376
00:11:36,000 --> 00:11:39,120
bit better in various cases so so we

377
00:11:37,519 --> 00:11:40,079
insert this cookie here which basically

378
00:11:39,120 --> 00:11:42,000
says

379
00:11:40,079 --> 00:11:43,199
uh you know multiple levels of escaping

380
00:11:42,000 --> 00:11:44,640
are a bad thing

381
00:11:43,200 --> 00:11:46,320
um that's that's basically so i think

382
00:11:44,640 --> 00:11:47,519
this is a whoppy source

383
00:11:46,320 --> 00:11:49,440
which is already escaped and we

384
00:11:47,519 --> 00:11:49,760
re-escape it and then we uh put it in

385
00:11:49,440 --> 00:11:52,240
this

386
00:11:49,760 --> 00:11:54,240
this thing here and um so if it's got

387
00:11:52,240 --> 00:11:56,079
our meta in it then it came from us and

388
00:11:54,240 --> 00:11:57,600
now we can do something cool

389
00:11:56,079 --> 00:11:59,199
uh and otherwise you know and we could

390
00:11:57,600 --> 00:12:00,000
potentially download the data ourselves

391
00:11:59,200 --> 00:12:01,600
and push it

392
00:12:00,000 --> 00:12:03,519
without using the web browser which is

393
00:12:01,600 --> 00:12:05,440
kind of cool you'll remember that we can

394
00:12:03,519 --> 00:12:06,800
paste text html and that can contain the

395
00:12:05,440 --> 00:12:09,440
metadata

396
00:12:06,800 --> 00:12:11,359
how am i doing for time eight minutes

397
00:12:09,440 --> 00:12:13,600
yeah

398
00:12:11,360 --> 00:12:15,760
i used 12 eight minutes perfect um it is

399
00:12:13,600 --> 00:12:19,120
20 minutes long right

400
00:12:15,760 --> 00:12:23,120
oh it's 30 minutes 25 i can relax

401
00:12:19,120 --> 00:12:23,120
i shall speak more slowly

402
00:12:23,200 --> 00:12:28,160
right so yes so so when we notice it's

403
00:12:26,480 --> 00:12:30,079
our data that's being pasted

404
00:12:28,160 --> 00:12:31,600
uh we can download it from where

405
00:12:30,079 --> 00:12:34,000
wherever it came from

406
00:12:31,600 --> 00:12:35,200
so if you're pasting between documents

407
00:12:34,000 --> 00:12:38,560
or even actually

408
00:12:35,200 --> 00:12:40,639
between tabs um on the same document

409
00:12:38,560 --> 00:12:42,479
we will download this hidden in the

410
00:12:40,639 --> 00:12:43,680
background with show progress bar we'll

411
00:12:42,480 --> 00:12:45,680
re-upload it

412
00:12:43,680 --> 00:12:47,839
and then populate the clipboard and do a

413
00:12:45,680 --> 00:12:50,959
paste on that new view

414
00:12:47,839 --> 00:12:52,639
which is all cool um yeah and it's

415
00:12:50,959 --> 00:12:54,160
just it's just a bit of a faff game

416
00:12:52,639 --> 00:12:55,200
because it's all asynchronous the

417
00:12:54,160 --> 00:12:58,480
download and upload

418
00:12:55,200 --> 00:13:00,000
apis um yeah which which the browser

419
00:12:58,480 --> 00:13:01,279
likes because it doesn't block the user

420
00:13:00,000 --> 00:13:05,680
obviously

421
00:13:01,279 --> 00:13:08,399
um yeah so download the data

422
00:13:05,680 --> 00:13:10,079
yeah so see the other problem is that

423
00:13:08,399 --> 00:13:11,360
things like embedded images you know you

424
00:13:10,079 --> 00:13:12,880
you often get just

425
00:13:11,360 --> 00:13:14,800
one stream there's all sorts of

426
00:13:12,880 --> 00:13:15,920
capabilities and multiple streams in the

427
00:13:14,800 --> 00:13:18,479
clipboard

428
00:13:15,920 --> 00:13:20,160
api so you can shove lots of images and

429
00:13:18,480 --> 00:13:21,600
things in there but

430
00:13:20,160 --> 00:13:23,439
my impression is that none of these work

431
00:13:21,600 --> 00:13:24,560
at all um so

432
00:13:23,440 --> 00:13:27,200
you basically get one time you get

433
00:13:24,560 --> 00:13:28,319
either an image or you get a html or

434
00:13:27,200 --> 00:13:30,560
something else so

435
00:13:28,320 --> 00:13:32,639
we did a chunk of work to base64 encode

436
00:13:30,560 --> 00:13:36,079
lots of images so the html

437
00:13:32,639 --> 00:13:37,360
has the images in it um the problem is

438
00:13:36,079 --> 00:13:39,279
that all of this stuff here the

439
00:13:37,360 --> 00:13:40,639
magic downloading and re-uploading

440
00:13:39,279 --> 00:13:42,560
behind the scenes

441
00:13:40,639 --> 00:13:44,000
uh has to be done and it has to be done

442
00:13:42,560 --> 00:13:45,439
in a sensitive way it really

443
00:13:44,000 --> 00:13:47,120
that works with you know like high

444
00:13:45,440 --> 00:13:49,519
availability scaling

445
00:13:47,120 --> 00:13:50,639
and will work nicely across nodes you

446
00:13:49,519 --> 00:13:52,480
you'd think it would be nice to short

447
00:13:50,639 --> 00:13:54,320
circuit in the data center between one

448
00:13:52,480 --> 00:13:56,079
machine and another machine but this is

449
00:13:54,320 --> 00:13:56,880
almost certainly a disaster area in

450
00:13:56,079 --> 00:13:59,120
terms of

451
00:13:56,880 --> 00:14:00,720
lookups and access to each other and and

452
00:13:59,120 --> 00:14:02,320
so on because they're all living in some

453
00:14:00,720 --> 00:14:04,079
paranoid demilitarized

454
00:14:02,320 --> 00:14:05,199
something right so actually it turns out

455
00:14:04,079 --> 00:14:05,920
to be better to download the whole

456
00:14:05,199 --> 00:14:07,519
clipboard

457
00:14:05,920 --> 00:14:10,560
to your client and then push it all back

458
00:14:07,519 --> 00:14:13,040
again um arguably to the same server

459
00:14:10,560 --> 00:14:14,000
than it is to do anything else

460
00:14:13,040 --> 00:14:17,599
particularly when it's across

461
00:14:14,000 --> 00:14:20,240
tabs so we have a new clipboard endpoint

462
00:14:17,600 --> 00:14:21,440
and that's that's pretty good um of

463
00:14:20,240 --> 00:14:23,120
course there's lots of

464
00:14:21,440 --> 00:14:25,440
random gotchas you know copy and paste

465
00:14:23,120 --> 00:14:26,639
in dialogues what do you do when there's

466
00:14:25,440 --> 00:14:29,199
no

467
00:14:26,639 --> 00:14:30,560
the kit clipboard is empty initially um

468
00:14:29,199 --> 00:14:30,959
so how do you paste something because

469
00:14:30,560 --> 00:14:32,399
the

470
00:14:30,959 --> 00:14:34,239
the server doesn't think it's got

471
00:14:32,399 --> 00:14:35,440
anything on a clipboard to paste so you

472
00:14:34,240 --> 00:14:37,920
just shove something in

473
00:14:35,440 --> 00:14:38,959
to start with um and what happens when

474
00:14:37,920 --> 00:14:40,399
you close the document i mean this is

475
00:14:38,959 --> 00:14:40,959
the perennial problem on the desktop

476
00:14:40,399 --> 00:14:43,040
that

477
00:14:40,959 --> 00:14:44,319
you have clipboard managers for that

478
00:14:43,040 --> 00:14:46,079
when you select something and you exit

479
00:14:44,320 --> 00:14:48,560
the document

480
00:14:46,079 --> 00:14:50,079
i shall step back so a properly designed

481
00:14:48,560 --> 00:14:52,638
clipboard api

482
00:14:50,079 --> 00:14:54,000
essentially is a negotiation so when you

483
00:14:52,639 --> 00:14:55,519
select a huge number of cells in your

484
00:14:54,000 --> 00:14:56,959
spreadsheet

485
00:14:55,519 --> 00:14:58,320
i don't know if you've seen cut and

486
00:14:56,959 --> 00:14:59,680
paste in a spreadsheet but when you cut

487
00:14:58,320 --> 00:15:01,040
and paste in a spreadsheet it corrects

488
00:14:59,680 --> 00:15:01,680
all your formulae it behaves very

489
00:15:01,040 --> 00:15:03,360
different

490
00:15:01,680 --> 00:15:05,120
differently so anything that refers to

491
00:15:03,360 --> 00:15:06,079
this as you move it gets updated all

492
00:15:05,120 --> 00:15:09,120
around the spreadsheet

493
00:15:06,079 --> 00:15:11,599
which is exactly what you want um

494
00:15:09,120 --> 00:15:12,480
but it's aside but but as you do this

495
00:15:11,600 --> 00:15:14,320
you essentially

496
00:15:12,480 --> 00:15:15,839
negotiate where the stuff is coming from

497
00:15:14,320 --> 00:15:18,480
so you say oh i've got a selection

498
00:15:15,839 --> 00:15:19,920
oh it's interesting um what can it be

499
00:15:18,480 --> 00:15:21,040
and they provide a long list of things

500
00:15:19,920 --> 00:15:22,719
that can be or we could serve this

501
00:15:21,040 --> 00:15:23,439
spreadsheet as a png we could have as a

502
00:15:22,720 --> 00:15:25,519
jpeg

503
00:15:23,440 --> 00:15:26,560
you could have as a starview metaphile

504
00:15:25,519 --> 00:15:28,880
just like a vector thing

505
00:15:26,560 --> 00:15:30,079
oh we could have it as a emf metaphor

506
00:15:28,880 --> 00:15:32,160
which is microsoft's

507
00:15:30,079 --> 00:15:33,199
api don't mattify we could have it as a

508
00:15:32,160 --> 00:15:36,000
rtf

509
00:15:33,199 --> 00:15:36,880
chunk we could have it as a odf fragment

510
00:15:36,000 --> 00:15:38,639
we could have it you know

511
00:15:36,880 --> 00:15:40,000
there's just dozens of different

512
00:15:38,639 --> 00:15:41,920
interchange formats great

513
00:15:40,000 --> 00:15:43,600
long list of them and the hope is then

514
00:15:41,920 --> 00:15:45,519
that the the client goes well i don't

515
00:15:43,600 --> 00:15:46,480
like html much but i quite like rtf

516
00:15:45,519 --> 00:15:48,079
let's see what he's got

517
00:15:46,480 --> 00:15:50,240
from an rtf perspective and they grab

518
00:15:48,079 --> 00:15:52,000
that just that

519
00:15:50,240 --> 00:15:53,920
and this is how any sensible api should

520
00:15:52,000 --> 00:15:55,199
be designed of course

521
00:15:53,920 --> 00:15:56,639
it's not really it's not really like

522
00:15:55,199 --> 00:15:58,399
that but this is basically how you get

523
00:15:56,639 --> 00:16:00,240
around

524
00:15:58,399 --> 00:16:01,920
not converting the spreadsheet to 10

525
00:16:00,240 --> 00:16:04,320
formats when you do a simple copy and

526
00:16:01,920 --> 00:16:06,959
paste of a large area

527
00:16:04,320 --> 00:16:08,000
anyway so but anyhow when you lose the

528
00:16:06,959 --> 00:16:09,439
clipboard often you lose

529
00:16:08,000 --> 00:16:11,040
this this thing as well because

530
00:16:09,440 --> 00:16:12,800
clipboard managers don't really want to

531
00:16:11,040 --> 00:16:14,639
grab in every format usually

532
00:16:12,800 --> 00:16:16,319
unless they're quite quite expensive

533
00:16:14,639 --> 00:16:17,519
ones so

534
00:16:16,320 --> 00:16:18,720
but when you close the close the

535
00:16:17,519 --> 00:16:20,160
document that the application is not

536
00:16:18,720 --> 00:16:22,240
there to negotiate with anymore

537
00:16:20,160 --> 00:16:23,759
it can't tell you what formats there

538
00:16:22,240 --> 00:16:24,800
were on the clipboard it can't really do

539
00:16:23,759 --> 00:16:26,720
much

540
00:16:24,800 --> 00:16:29,040
so you really have to serialize that and

541
00:16:26,720 --> 00:16:30,560
stash it somewhere else so there's a new

542
00:16:29,040 --> 00:16:32,079
wonderful way that when an application

543
00:16:30,560 --> 00:16:34,079
is closing

544
00:16:32,079 --> 00:16:36,399
and it has a live clipboard we then

545
00:16:34,079 --> 00:16:39,040
serialize that clipboard

546
00:16:36,399 --> 00:16:40,160
and this makes the the kit shut down

547
00:16:39,040 --> 00:16:41,439
which used to be quite simple and

548
00:16:40,160 --> 00:16:44,319
pleasant of the form

549
00:16:41,440 --> 00:16:45,040
p kill minus nine bang okay and that

550
00:16:44,320 --> 00:16:46,320
kind of thing

551
00:16:45,040 --> 00:16:47,920
it's actually a very clean way to kill a

552
00:16:46,320 --> 00:16:49,279
process on linux you just it frees all

553
00:16:47,920 --> 00:16:52,079
its memory the os

554
00:16:49,279 --> 00:16:52,880
deals with the stuff um it is now some

555
00:16:52,079 --> 00:16:55,279
horrible

556
00:16:52,880 --> 00:16:57,279
handshake have i got the clipboard is it

557
00:16:55,279 --> 00:16:58,399
saved what's going on but anyway we did

558
00:16:57,279 --> 00:16:59,759
that

559
00:16:58,399 --> 00:17:01,279
so afterwards the punch line is that you

560
00:16:59,759 --> 00:17:02,399
get a rather a better result so instead

561
00:17:01,279 --> 00:17:05,439
of having a

562
00:17:02,399 --> 00:17:06,799
text import dialog you get all of the

563
00:17:05,439 --> 00:17:08,400
content you want all your conditional

564
00:17:06,799 --> 00:17:09,280
formatting you even get the numbers not

565
00:17:08,400 --> 00:17:11,120
being zero

566
00:17:09,280 --> 00:17:13,678
so we're already uh doing quite well

567
00:17:11,119 --> 00:17:14,239
versus both uh office 365 and google

568
00:17:13,679 --> 00:17:15,360
docs

569
00:17:14,240 --> 00:17:17,039
so that's that's quite a nice

570
00:17:15,359 --> 00:17:18,399
improvement and of course you can copy

571
00:17:17,039 --> 00:17:20,559
and paste the charts across as well

572
00:17:18,400 --> 00:17:22,480
so if you do that explicitly you can

573
00:17:20,559 --> 00:17:24,000
actually get your data from one tab to

574
00:17:22,480 --> 00:17:25,679
another on the web

575
00:17:24,000 --> 00:17:27,839
and you would think this is kind of easy

576
00:17:25,679 --> 00:17:27,839
but

577
00:17:29,200 --> 00:17:32,480
we thought it was kind of easy ah it's a

578
00:17:30,880 --> 00:17:33,039
few weeks of work so on and then you

579
00:17:32,480 --> 00:17:36,160
discover

580
00:17:33,039 --> 00:17:37,360
these lurking horrors um and then there

581
00:17:36,160 --> 00:17:38,320
are other horrors you just can't do

582
00:17:37,360 --> 00:17:41,199
anything about like

583
00:17:38,320 --> 00:17:41,918
um so if you if you're on a mac as some

584
00:17:41,200 --> 00:17:43,760
people are

585
00:17:41,919 --> 00:17:45,520
you have more money than sense you had

586
00:17:43,760 --> 00:17:48,799
more money than send

587
00:17:45,520 --> 00:17:50,480
um then then as you paste from safari

588
00:17:48,799 --> 00:17:52,559
you know say you go to wikipedia and

589
00:17:50,480 --> 00:17:54,559
you select some images and some text you

590
00:17:52,559 --> 00:17:55,840
get rtf an rtf is something we really

591
00:17:54,559 --> 00:17:57,360
know about we've got a brilliant rtf

592
00:17:55,840 --> 00:17:58,000
filter you know we can we can do awesome

593
00:17:57,360 --> 00:18:00,000
stuff

594
00:17:58,000 --> 00:18:02,000
lovely unfortunately safari doesn't put

595
00:18:00,000 --> 00:18:04,400
the images in the rtf

596
00:18:02,000 --> 00:18:05,280
so you just kind of lose them if you use

597
00:18:04,400 --> 00:18:08,559
rtf

598
00:18:05,280 --> 00:18:09,840
and it's get bit difficult to know that

599
00:18:08,559 --> 00:18:11,280
there should have been images there and

600
00:18:09,840 --> 00:18:12,480
that they aren't there now and so now

601
00:18:11,280 --> 00:18:13,039
you should really use something else

602
00:18:12,480 --> 00:18:16,000
right

603
00:18:13,039 --> 00:18:16,879
it's kind of a bit dis dysfunctionally

604
00:18:16,000 --> 00:18:18,640
unfortunate

605
00:18:16,880 --> 00:18:20,880
so we turn off our nice powerful rtf

606
00:18:18,640 --> 00:18:22,880
filter for mac just to um

607
00:18:20,880 --> 00:18:25,600
make our mac users happy so that we can

608
00:18:22,880 --> 00:18:28,160
get html instead which tends to have

609
00:18:25,600 --> 00:18:29,918
links in it to images um but

610
00:18:28,160 --> 00:18:31,679
unfortunately fixing safari is not

611
00:18:29,919 --> 00:18:33,440
as easy as you might hope like you know

612
00:18:31,679 --> 00:18:36,559
and particularly getting deployed

613
00:18:33,440 --> 00:18:37,120
is practically impossible and and of

614
00:18:36,559 --> 00:18:38,639
course

615
00:18:37,120 --> 00:18:40,639
wouldn't it be nice if we could accept

616
00:18:38,640 --> 00:18:42,799
rtf from like word on mac

617
00:18:40,640 --> 00:18:44,720
which will do a really good job with rtf

618
00:18:42,799 --> 00:18:45,440
and then be able to do all sorts of you

619
00:18:44,720 --> 00:18:47,440
know rich

620
00:18:45,440 --> 00:18:48,640
content stuff well of course by design

621
00:18:47,440 --> 00:18:49,600
you can't tell who's sending you the

622
00:18:48,640 --> 00:18:51,200
data

623
00:18:49,600 --> 00:18:52,799
because that would suck if applications

624
00:18:51,200 --> 00:18:54,240
you know accept data from some and not

625
00:18:52,799 --> 00:18:57,200
from others and that sort of thing

626
00:18:54,240 --> 00:18:57,760
um so you can't really blacklist one or

627
00:18:57,200 --> 00:19:00,320
the other

628
00:18:57,760 --> 00:19:02,000
terribly easily so what about that um

629
00:19:00,320 --> 00:19:03,439
then the security so we now have a web

630
00:19:02,000 --> 00:19:04,640
endpoint that will serve you up what was

631
00:19:03,440 --> 00:19:07,520
on the clipboard

632
00:19:04,640 --> 00:19:08,000
um and of course we give a huge hash you

633
00:19:07,520 --> 00:19:09,200
know

634
00:19:08,000 --> 00:19:11,520
for this obviously it would be terrible

635
00:19:09,200 --> 00:19:13,520
if someone saw your clipboard um

636
00:19:11,520 --> 00:19:14,799
but you know even that might not be

637
00:19:13,520 --> 00:19:16,240
secure enough for the wonderful

638
00:19:14,799 --> 00:19:18,320
penetration testing

639
00:19:16,240 --> 00:19:20,320
uh people that exist out there so uh we

640
00:19:18,320 --> 00:19:21,840
expire this then so we accept this key

641
00:19:20,320 --> 00:19:23,120
and the previous key and every two or

642
00:19:21,840 --> 00:19:25,360
four minutes configurable

643
00:19:23,120 --> 00:19:26,479
you can rotate this and just throw stuff

644
00:19:25,360 --> 00:19:28,479
away

645
00:19:26,480 --> 00:19:29,760
so that people can't get it or if you're

646
00:19:28,480 --> 00:19:31,039
particularly paranoid you can disable

647
00:19:29,760 --> 00:19:32,879
copy and paste completely

648
00:19:31,039 --> 00:19:34,799
by just using the whoppy property for

649
00:19:32,880 --> 00:19:36,400
that

650
00:19:34,799 --> 00:19:37,918
one of the slight downsides of this is

651
00:19:36,400 --> 00:19:39,520
that libreoffice was very good at

652
00:19:37,919 --> 00:19:40,960
generating text it had nice bullet

653
00:19:39,520 --> 00:19:44,160
characters in it it had

654
00:19:40,960 --> 00:19:45,760
good layout it was beautiful um

655
00:19:44,160 --> 00:19:47,840
but now we really need html because the

656
00:19:45,760 --> 00:19:49,440
html has this magic cookie in it and we

657
00:19:47,840 --> 00:19:51,280
you can't really transmit that as text

658
00:19:49,440 --> 00:19:54,000
plain text without people getting a

659
00:19:51,280 --> 00:19:55,200
massive url with triple encoding in it

660
00:19:54,000 --> 00:19:58,880
in their text which

661
00:19:55,200 --> 00:20:01,440
annoys them so unfortunately

662
00:19:58,880 --> 00:20:02,400
and you might find this hard to believe

663
00:20:01,440 --> 00:20:04,640
i found it

664
00:20:02,400 --> 00:20:06,720
almost impossible to believe but if you

665
00:20:04,640 --> 00:20:08,320
have a web browser that is

666
00:20:06,720 --> 00:20:10,720
excellent at laying out text and it does

667
00:20:08,320 --> 00:20:12,158
nothing but make text look pretty

668
00:20:10,720 --> 00:20:14,320
okay it does some other stuff too but

669
00:20:12,159 --> 00:20:15,760
it's a core part of its function

670
00:20:14,320 --> 00:20:17,600
from javascript you can't actually

671
00:20:15,760 --> 00:20:20,240
convert html into text

672
00:20:17,600 --> 00:20:21,760
in any meaningful way there is no api

673
00:20:20,240 --> 00:20:23,039
that will do this for you

674
00:20:21,760 --> 00:20:25,120
anything you do produces something

675
00:20:23,039 --> 00:20:28,320
horribly ugly sort of i suppose

676
00:20:25,120 --> 00:20:30,000
stashing it in yet or not no i i i

677
00:20:28,320 --> 00:20:31,360
this is a really hard problem and and

678
00:20:30,000 --> 00:20:33,280
you can go to stack overflow and find

679
00:20:31,360 --> 00:20:35,199
all sorts of people's regular expression

680
00:20:33,280 --> 00:20:37,039
monsters to try and parse html and

681
00:20:35,200 --> 00:20:40,240
remove all the bits they don't want

682
00:20:37,039 --> 00:20:40,720
um but this is unbelievable how can

683
00:20:40,240 --> 00:20:42,799
anyway

684
00:20:40,720 --> 00:20:43,919
so maybe maybe i'm an idiot you know but

685
00:20:42,799 --> 00:20:46,320
you can uh

686
00:20:43,919 --> 00:20:48,000
so so anyway currently we we try and

687
00:20:46,320 --> 00:20:50,320
strip the html tags out

688
00:20:48,000 --> 00:20:51,679
manually and it's not as beautiful as it

689
00:20:50,320 --> 00:20:54,080
could be and the result is not

690
00:20:51,679 --> 00:20:55,440
not wonderful so there's a bit of a

691
00:20:54,080 --> 00:20:58,559
regression of text plain

692
00:20:55,440 --> 00:21:00,240
copy and paste which is a shame

693
00:20:58,559 --> 00:21:02,799
so someone can tell me how it's supposed

694
00:21:00,240 --> 00:21:04,720
to be done maybe later so there you go

695
00:21:02,799 --> 00:21:05,840
so we have just the most awesome

696
00:21:04,720 --> 00:21:07,520
capability of

697
00:21:05,840 --> 00:21:09,760
transmitting and transferring data in

698
00:21:07,520 --> 00:21:11,840
all sorts of different formats

699
00:21:09,760 --> 00:21:13,600
and it's really cool i mean like we do a

700
00:21:11,840 --> 00:21:14,480
really good really good job of it in the

701
00:21:13,600 --> 00:21:16,799
core

702
00:21:14,480 --> 00:21:19,600
um and we can you know just years and

703
00:21:16,799 --> 00:21:22,320
years of pasting evil junk from a to b

704
00:21:19,600 --> 00:21:23,678
um in applications uh but the real

705
00:21:22,320 --> 00:21:26,559
problem is just the web

706
00:21:23,679 --> 00:21:27,679
has just appalling apis here oh i guess

707
00:21:26,559 --> 00:21:28,879
since i wrote these things we also have

708
00:21:27,679 --> 00:21:31,039
a problem on android which is

709
00:21:28,880 --> 00:21:32,400
the android everyone has been inspired

710
00:21:31,039 --> 00:21:35,039
to write terrible

711
00:21:32,400 --> 00:21:36,240
uh content negotiation apis for for copy

712
00:21:35,039 --> 00:21:38,400
and paste i don't know

713
00:21:36,240 --> 00:21:39,919
how we can have bit rotted so far i mean

714
00:21:38,400 --> 00:21:40,400
like windows does it better than this

715
00:21:39,919 --> 00:21:42,880
you know

716
00:21:40,400 --> 00:21:44,000
i mean like really um but anyway android

717
00:21:42,880 --> 00:21:45,760
is is

718
00:21:44,000 --> 00:21:47,600
i guess it probably comes from trying to

719
00:21:45,760 --> 00:21:50,158
do a little bit better than plain text

720
00:21:47,600 --> 00:21:50,959
um so yeah so in android again we just

721
00:21:50,159 --> 00:21:53,280
use this web

722
00:21:50,960 --> 00:21:54,880
cookie thing for html and we have like a

723
00:21:53,280 --> 00:21:56,480
local file

724
00:21:54,880 --> 00:21:58,320
and if we detect it from ourselves we

725
00:21:56,480 --> 00:21:59,760
use the local file to talk to ourselves

726
00:21:58,320 --> 00:22:00,559
because that's actually just way better

727
00:21:59,760 --> 00:22:02,000
than

728
00:22:00,559 --> 00:22:04,559
and other than trying to jam it through

729
00:22:02,000 --> 00:22:07,039
the html uh transport

730
00:22:04,559 --> 00:22:08,080
so anyway connecting is an epic the web

731
00:22:07,039 --> 00:22:10,879
api sucks

732
00:22:08,080 --> 00:22:11,520
at least the android api sucks uh online

733
00:22:10,880 --> 00:22:13,440
can now

734
00:22:11,520 --> 00:22:15,039
yeah do do good things it's leads in its

735
00:22:13,440 --> 00:22:16,960
class that's my hope

736
00:22:15,039 --> 00:22:18,320
it's still not perfect go and try it

737
00:22:16,960 --> 00:22:20,240
you'll discover that actually

738
00:22:18,320 --> 00:22:21,918
uh some things are particularly nasty

739
00:22:20,240 --> 00:22:23,840
like when you're copying and pasting

740
00:22:21,919 --> 00:22:26,080
between presentations

741
00:22:23,840 --> 00:22:28,158
what should you do you have a shape and

742
00:22:26,080 --> 00:22:30,320
it uses five styles or you know

743
00:22:28,159 --> 00:22:31,360
lots of styles in this thing to style it

744
00:22:30,320 --> 00:22:32,080
and then you paste it into another

745
00:22:31,360 --> 00:22:34,399
document

746
00:22:32,080 --> 00:22:35,760
it has styles of the same name that have

747
00:22:34,400 --> 00:22:40,559
different

748
00:22:35,760 --> 00:22:42,640
properties so what do you do

749
00:22:40,559 --> 00:22:44,320
yeah but the problem is you don't have

750
00:22:42,640 --> 00:22:46,960
to detect that they're different right

751
00:22:44,320 --> 00:22:47,918
and how different is different and and

752
00:22:46,960 --> 00:22:49,600
and and probably

753
00:22:47,919 --> 00:22:51,440
what possibly some people want to do is

754
00:22:49,600 --> 00:22:53,360
adopt the new styling and theming of the

755
00:22:51,440 --> 00:22:54,880
new document right like styles should be

756
00:22:53,360 --> 00:22:55,600
separate from documents right so you

757
00:22:54,880 --> 00:22:57,200
should be able to

758
00:22:55,600 --> 00:22:59,600
copy this and put it there and it looks

759
00:22:57,200 --> 00:23:00,400
new and exciting not old and boring

760
00:22:59,600 --> 00:23:02,639
right

761
00:23:00,400 --> 00:23:03,840
ah anyway but the net result is that if

762
00:23:02,640 --> 00:23:05,600
you use draw and you use

763
00:23:03,840 --> 00:23:06,959
shapes a lot you can fall over this

764
00:23:05,600 --> 00:23:09,840
problem and think it's broken and it's

765
00:23:06,960 --> 00:23:09,840
actually a feature

766
00:23:10,720 --> 00:23:16,400
or something i don't know

767
00:23:13,919 --> 00:23:17,679
anyway and these guys did lots of the

768
00:23:16,400 --> 00:23:19,679
work including me

769
00:23:17,679 --> 00:23:20,960
and yeah and we can't do anything

770
00:23:19,679 --> 00:23:22,480
without people paying for it so we're

771
00:23:20,960 --> 00:23:23,679
very grateful to our customers and our

772
00:23:22,480 --> 00:23:25,840
partners for helping

773
00:23:23,679 --> 00:23:27,440
so that's that any questions and did i

774
00:23:25,840 --> 00:23:30,720
ever run yet nicholas

775
00:23:27,440 --> 00:23:32,799
no not yet oh there you go six minutes

776
00:23:30,720 --> 00:23:37,840
that's my highly opinionated rant on web

777
00:23:32,799 --> 00:23:37,840
copy paste apis which generally suck

778
00:23:38,640 --> 00:23:43,520
anyone at all olivia you're looking

779
00:23:41,120 --> 00:23:45,918
deeply pensive i'm thinking you've got a

780
00:23:43,520 --> 00:23:51,840
you know no okay well thank you very

781
00:23:45,919 --> 00:23:51,840
much then you've been very patient

782
00:23:55,440 --> 00:23:57,520
you

