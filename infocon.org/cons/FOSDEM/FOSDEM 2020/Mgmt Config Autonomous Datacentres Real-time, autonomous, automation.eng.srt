1
00:00:05,279 --> 00:00:08,640
how do i introduce this guy

2
00:00:11,040 --> 00:00:18,480
um the person who messed up my spotify

3
00:00:15,280 --> 00:00:21,759
history with all his crazy rap songs um

4
00:00:18,480 --> 00:00:24,720
we have two more talks left and uh the

5
00:00:21,760 --> 00:00:26,240
the next one is by uh james and also

6
00:00:24,720 --> 00:00:27,038
known as purple idea and he will talk

7
00:00:26,240 --> 00:00:29,359
about

8
00:00:27,039 --> 00:00:30,880
next generation conflict management with

9
00:00:29,359 --> 00:00:34,480
mgmt

10
00:00:30,880 --> 00:00:34,480
thank you walter hi

11
00:00:36,399 --> 00:00:39,840
so i'm going to go really fast but i'm

12
00:00:38,800 --> 00:00:41,360
also going to try and

13
00:00:39,840 --> 00:00:42,879
go a little bit slower on some other

14
00:00:41,360 --> 00:00:44,719
stuff so i'm going to assume

15
00:00:42,879 --> 00:00:47,280
some knowledge of automation and config

16
00:00:44,719 --> 00:00:48,480
management or puppet and even mgm2 to a

17
00:00:47,280 --> 00:00:50,480
certain extent because

18
00:00:48,480 --> 00:00:51,760
i've talked a lot about mgmt but i don't

19
00:00:50,480 --> 00:00:53,279
want to start giving the same beginner

20
00:00:51,760 --> 00:00:54,559
talk about mgmt so

21
00:00:53,280 --> 00:00:56,480
if you have missed something you'll have

22
00:00:54,559 --> 00:00:57,680
to go see a talk of mine i might sit

23
00:00:56,480 --> 00:00:59,599
down for a little bit so if you can't

24
00:00:57,680 --> 00:01:02,320
see me don't be afraid i'm still here

25
00:00:59,600 --> 00:01:04,000
um and uh have some questions at the end

26
00:01:02,320 --> 00:01:05,760
uh so who am i i'm a hacker

27
00:01:04,000 --> 00:01:07,119
i work on config management things i

28
00:01:05,760 --> 00:01:08,400
write the technical blog of james who's

29
00:01:07,119 --> 00:01:09,119
seen it just raise your hand who've seen

30
00:01:08,400 --> 00:01:10,240
my blog

31
00:01:09,119 --> 00:01:12,159
if you haven't just raise your hand

32
00:01:10,240 --> 00:01:14,798
anyway so i seem really popular

33
00:01:12,159 --> 00:01:16,720
everyone thank you uh used to be

34
00:01:14,799 --> 00:01:17,360
physiologist but now i'm doing hacker

35
00:01:16,720 --> 00:01:20,798
stuff

36
00:01:17,360 --> 00:01:22,080
um just some background there's a lot of

37
00:01:20,799 --> 00:01:25,200
libreoffice bugs but

38
00:01:22,080 --> 00:01:26,720
behind the black square is uh is beaker

39
00:01:25,200 --> 00:01:30,240
um

40
00:01:26,720 --> 00:01:31,520
so sorry about that um so

41
00:01:30,240 --> 00:01:33,199
every day nowadays we're kind of

42
00:01:31,520 --> 00:01:33,920
everything's yamling it seems to be like

43
00:01:33,200 --> 00:01:35,840
ansible

44
00:01:33,920 --> 00:01:38,320
and kubernetes and all this yaml stuff

45
00:01:35,840 --> 00:01:39,439
to describe things at the end of the day

46
00:01:38,320 --> 00:01:42,158
the whole point of all this is to

47
00:01:39,439 --> 00:01:43,758
describe our infrastructure and ideally

48
00:01:42,159 --> 00:01:45,920
we'd like to describe it in some sort of

49
00:01:43,759 --> 00:01:47,360
way so that if we got all our code right

50
00:01:45,920 --> 00:01:48,880
and there were any bugs

51
00:01:47,360 --> 00:01:50,960
it would just sit there and do its thing

52
00:01:48,880 --> 00:01:53,360
and we could go like lie on the beach

53
00:01:50,960 --> 00:01:54,559
or chill in canada or somewhere cool and

54
00:01:53,360 --> 00:01:54,960
that's what i want to build like i want

55
00:01:54,560 --> 00:01:56,479
to build

56
00:01:54,960 --> 00:01:58,798
autonomous systems and i want to figure

57
00:01:56,479 --> 00:01:59,920
out how we describe to the computers to

58
00:01:58,799 --> 00:02:05,200
do what we want

59
00:01:59,920 --> 00:02:05,200
over time do we want everything in yaml

60
00:02:05,439 --> 00:02:09,440
like we just write this yaml and throw

61
00:02:07,439 --> 00:02:12,239
it in a tool

62
00:02:09,440 --> 00:02:14,560
do we want to be yamo programmers i

63
00:02:12,239 --> 00:02:16,480
don't think so

64
00:02:14,560 --> 00:02:19,040
so this is my answer to the yamo

65
00:02:16,480 --> 00:02:19,040
programmers

66
00:02:19,920 --> 00:02:23,119
i'm sorry if you've seen this before he

67
00:02:21,760 --> 00:02:26,239
pushes the note button

68
00:02:23,120 --> 00:02:26,239
and uh it's gone

69
00:02:27,440 --> 00:02:31,200
anyways so long story short i sat down

70
00:02:29,840 --> 00:02:32,640
some years ago and started working on a

71
00:02:31,200 --> 00:02:35,200
project called mgmt

72
00:02:32,640 --> 00:02:36,399
uh which has this logo there's two main

73
00:02:35,200 --> 00:02:38,079
parts the engine the language i've

74
00:02:36,400 --> 00:02:41,519
talked about this a lot before

75
00:02:38,080 --> 00:02:43,840
um and i'll show you just a quick demo

76
00:02:41,519 --> 00:02:45,360
um i could actually even pull a demo

77
00:02:43,840 --> 00:02:47,360
that i was gonna do this morning

78
00:02:45,360 --> 00:02:49,360
should we do that it'll take a little

79
00:02:47,360 --> 00:02:52,560
bit longer and i'll show you

80
00:02:49,360 --> 00:02:53,920
uh boxes you know waste

81
00:02:52,560 --> 00:02:55,760
two more seconds and show you a demo

82
00:02:53,920 --> 00:02:57,200
that i was gonna do this morning in my

83
00:02:55,760 --> 00:03:00,480
talk which uh

84
00:02:57,200 --> 00:03:01,679
didn't work out because i forgot so just

85
00:03:00,480 --> 00:03:05,040
boot up a little machine

86
00:03:01,680 --> 00:03:06,560
the idea basically is that

87
00:03:05,040 --> 00:03:08,640
we have this engine and it can run

88
00:03:06,560 --> 00:03:09,760
things in parallel so the dag the graph

89
00:03:08,640 --> 00:03:12,079
of resources that

90
00:03:09,760 --> 00:03:13,120
gets work done normally we run it one

91
00:03:12,080 --> 00:03:13,680
thing at a time we can run that in

92
00:03:13,120 --> 00:03:15,360
parallel

93
00:03:13,680 --> 00:03:16,800
and each resource is event driven so

94
00:03:15,360 --> 00:03:18,879
whether it's a file or a package or a

95
00:03:16,800 --> 00:03:21,519
service or user or virtual machine

96
00:03:18,879 --> 00:03:23,200
all those things can detect the state

97
00:03:21,519 --> 00:03:23,680
and just detect when that state changes

98
00:03:23,200 --> 00:03:26,000
so

99
00:03:23,680 --> 00:03:27,519
changing the the graph of resources can

100
00:03:26,000 --> 00:03:29,120
be done very efficiently and we never

101
00:03:27,519 --> 00:03:30,640
have to recheck that whole graph so

102
00:03:29,120 --> 00:03:32,239
every time you have a new puppet run

103
00:03:30,640 --> 00:03:33,920
or a new ansible run it's rechecking

104
00:03:32,239 --> 00:03:35,440
every single thing we only ever have to

105
00:03:33,920 --> 00:03:36,399
check once

106
00:03:35,440 --> 00:03:37,840
and the whole thing works as a

107
00:03:36,400 --> 00:03:39,280
distributed system is that big enough

108
00:03:37,840 --> 00:03:41,920
can you see

109
00:03:39,280 --> 00:03:42,560
okay the password is password and i'll

110
00:03:41,920 --> 00:03:44,958
just show you

111
00:03:42,560 --> 00:03:46,000
this was the mgmt demo i was gonna do so

112
00:03:44,959 --> 00:03:49,360
if we just

113
00:03:46,000 --> 00:03:52,080
look at the code here it's just a small

114
00:03:49,360 --> 00:03:54,400
amount of code to create a user

115
00:03:52,080 --> 00:03:56,159
i'll even let me just ssh in it'll be a

116
00:03:54,400 --> 00:04:00,000
little bit nicer

117
00:03:56,159 --> 00:04:05,200
at 2020 i wonder if havahi is working

118
00:04:00,000 --> 00:04:08,319
oh yeah cool so we just go here

119
00:04:05,200 --> 00:04:11,280
and if we just run this command

120
00:04:08,319 --> 00:04:13,760
run it's running mgmt you can see it's

121
00:04:11,280 --> 00:04:15,120
adding user

122
00:04:13,760 --> 00:04:17,199
and i'll just show you what the code is

123
00:04:15,120 --> 00:04:20,000
doing so run.sh

124
00:04:17,199 --> 00:04:22,400
it's just literally running mgmt to

125
00:04:20,000 --> 00:04:25,120
create those users and it shuts down

126
00:04:22,400 --> 00:04:25,599
but the cool thing is we can actually

127
00:04:25,120 --> 00:04:28,479
run it

128
00:04:25,600 --> 00:04:30,479
in the normal mode run continuously so

129
00:04:28,479 --> 00:04:32,240
it's just going to run that code

130
00:04:30,479 --> 00:04:34,639
i just made this shell script so i don't

131
00:04:32,240 --> 00:04:34,639
have to

132
00:04:34,960 --> 00:04:37,280
run it if it's really important

133
00:04:36,320 --> 00:04:38,320
otherwise you have to wait again because

134
00:04:37,280 --> 00:04:41,758
it's a short talk

135
00:04:38,320 --> 00:04:46,080
so mgmt is running continuously

136
00:04:41,759 --> 00:04:46,080
but if i go over here oops

137
00:04:46,560 --> 00:04:54,800
and rm delete user

138
00:04:51,199 --> 00:04:56,960
sorry user delete mgmt1

139
00:04:54,800 --> 00:04:58,160
and i delete the user you can see mgmt

140
00:04:56,960 --> 00:05:01,198
wakes up

141
00:04:58,160 --> 00:05:04,320
and puts the user right back so id

142
00:05:01,199 --> 00:05:07,680
user idmgmt1

143
00:05:04,320 --> 00:05:10,479
there's oh it's over there what were the

144
00:05:07,680 --> 00:05:12,000
users called let's see oh yeah there

145
00:05:10,479 --> 00:05:18,400
they are

146
00:05:12,000 --> 00:05:18,400
so user dell mgmte2

147
00:05:19,120 --> 00:05:22,560
and you see mgmt goes right back and

148
00:05:21,759 --> 00:05:25,039
adds the user

149
00:05:22,560 --> 00:05:26,000
right back so it's it's not doing work

150
00:05:25,039 --> 00:05:28,080
polling every time

151
00:05:26,000 --> 00:05:29,360
it's always just listening to see the

152
00:05:28,080 --> 00:05:30,880
state of the system whether it's a

153
00:05:29,360 --> 00:05:32,160
package or a file or a user

154
00:05:30,880 --> 00:05:34,240
and it will guarantee that state's

155
00:05:32,160 --> 00:05:35,680
always the case okay and this is just

156
00:05:34,240 --> 00:05:36,000
simple this is just for user resource

157
00:05:35,680 --> 00:05:38,639
but

158
00:05:36,000 --> 00:05:40,160
it's more fun if we do fancier things

159
00:05:38,639 --> 00:05:44,080
you want to see some fancier stuff

160
00:05:40,160 --> 00:05:46,160
yeah yeah okay let me just kill this

161
00:05:44,080 --> 00:05:47,440
vm because my poor laptop does not have

162
00:05:46,160 --> 00:05:52,000
a lot of ram

163
00:05:47,440 --> 00:05:55,120
first destroy mgf m2020

164
00:05:52,000 --> 00:06:00,160
what was the vm called

165
00:05:55,120 --> 00:06:03,280
oh my goodness it's in boxes boxes

166
00:06:00,160 --> 00:06:07,280
this is me hacking away

167
00:06:03,280 --> 00:06:09,840
how do you shut it down

168
00:06:07,280 --> 00:06:11,919
[Music]

169
00:06:09,840 --> 00:06:13,039
oh my god when you close it it sleeps

170
00:06:11,919 --> 00:06:15,599
okay that's why

171
00:06:13,039 --> 00:06:17,360
so anyways back to the talk the whole

172
00:06:15,600 --> 00:06:18,319
talk is me randomly hacking on my laptop

173
00:06:17,360 --> 00:06:20,400
so be prepared

174
00:06:18,319 --> 00:06:21,680
so how many resources do we have in mgmt

175
00:06:20,400 --> 00:06:24,400
now guess

176
00:06:21,680 --> 00:06:24,960
call it a number a thousand thirty close

177
00:06:24,400 --> 00:06:27,359
we have

178
00:06:24,960 --> 00:06:28,880
uh 27 so five more in the last year so

179
00:06:27,360 --> 00:06:30,960
we can do all these cool things

180
00:06:28,880 --> 00:06:33,360
can be managed in real time even virtual

181
00:06:30,960 --> 00:06:34,400
machines ec2 instances and so on

182
00:06:33,360 --> 00:06:35,919
and now we want to talk a little bit

183
00:06:34,400 --> 00:06:37,280
more about the language so the language

184
00:06:35,919 --> 00:06:39,280
is this special dsl

185
00:06:37,280 --> 00:06:40,799
it's not a full programming language uh

186
00:06:39,280 --> 00:06:42,479
what the pulumi people are doing is cool

187
00:06:40,800 --> 00:06:44,319
but ultimately if you want to describe

188
00:06:42,479 --> 00:06:45,758
safe infrastructure i don't think a

189
00:06:44,319 --> 00:06:46,560
general purpose programming language is

190
00:06:45,759 --> 00:06:48,560
the right approach

191
00:06:46,560 --> 00:06:50,639
so that's why we have a dsl this domain

192
00:06:48,560 --> 00:06:52,319
specific language allows us to model

193
00:06:50,639 --> 00:06:53,919
the time components and the coding

194
00:06:52,319 --> 00:06:56,240
components safely

195
00:06:53,919 --> 00:06:58,159
here's a quote about that should be safe

196
00:06:56,240 --> 00:06:59,599
it should be reactive as i showed you it

197
00:06:58,160 --> 00:07:01,919
wakes up and detects when something

198
00:06:59,599 --> 00:07:03,840
changes and so on so let's do some demos

199
00:07:01,919 --> 00:07:05,198
i showed you the user demo

200
00:07:03,840 --> 00:07:06,719
i've showed this demo before we're going

201
00:07:05,199 --> 00:07:09,520
to show it once more just to get us all

202
00:07:06,720 --> 00:07:09,520
on the same page

203
00:07:10,080 --> 00:07:13,758
so i'm going to run this mgmt code here

204
00:07:11,759 --> 00:07:15,039
on the left

205
00:07:13,759 --> 00:07:16,319
i'm in my dev environment so there's

206
00:07:15,039 --> 00:07:18,000
sometimes some bug so if there's

207
00:07:16,319 --> 00:07:20,319
something bad happens we'll

208
00:07:18,000 --> 00:07:21,680
we'll fix it so mgmt has created this

209
00:07:20,319 --> 00:07:23,440
file

210
00:07:21,680 --> 00:07:24,880
and i'm just gonna on the right here i'm

211
00:07:23,440 --> 00:07:25,919
just gonna pull the file to see the

212
00:07:24,880 --> 00:07:27,360
contents

213
00:07:25,919 --> 00:07:29,520
and you can see that it's updating this

214
00:07:27,360 --> 00:07:32,720
file in real time and that's because

215
00:07:29,520 --> 00:07:35,039
the code which is running continuously

216
00:07:32,720 --> 00:07:36,639
looks like this there's no syntax

217
00:07:35,039 --> 00:07:38,719
highlighting but basically

218
00:07:36,639 --> 00:07:40,880
here's a slightly nicer version we have

219
00:07:38,720 --> 00:07:42,639
a date time function which is a core

220
00:07:40,880 --> 00:07:44,240
function that's in mgmt you can have

221
00:07:42,639 --> 00:07:45,840
other ones that you write yourself

222
00:07:44,240 --> 00:07:47,360
and it takes this value it's not really

223
00:07:45,840 --> 00:07:49,679
a single time point

224
00:07:47,360 --> 00:07:51,120
it's a stream of times right the current

225
00:07:49,680 --> 00:07:53,039
time and number of seconds the next time

226
00:07:51,120 --> 00:07:54,800
a second later and it's always updating

227
00:07:53,039 --> 00:07:56,639
and whenever this updates this

228
00:07:54,800 --> 00:07:59,599
expression updates whenever this

229
00:07:56,639 --> 00:08:01,039
expression updates it changes the struct

230
00:07:59,599 --> 00:08:01,440
which has a bunch of different values in

231
00:08:01,039 --> 00:08:04,159
it

232
00:08:01,440 --> 00:08:04,639
and all of this goes into a big template

233
00:08:04,160 --> 00:08:06,639
and that

234
00:08:04,639 --> 00:08:08,080
is the contents of this file down here

235
00:08:06,639 --> 00:08:08,879
at the bottom right and that's what

236
00:08:08,080 --> 00:08:10,479
we're showing

237
00:08:08,879 --> 00:08:12,000
the other values that go into this big

238
00:08:10,479 --> 00:08:15,599
string for the file is

239
00:08:12,000 --> 00:08:19,599
the load and this vu meter function

240
00:08:15,599 --> 00:08:19,599
excuse me and as you can see

241
00:08:19,759 --> 00:08:23,120
it's constantly changing so the load the

242
00:08:22,000 --> 00:08:26,080
time is going up

243
00:08:23,120 --> 00:08:26,800
the load is changing and if you look you

244
00:08:26,080 --> 00:08:28,639
can see

245
00:08:26,800 --> 00:08:30,879
one of the inputs is actually my laptop

246
00:08:28,639 --> 00:08:32,959
microphone and so the language

247
00:08:30,879 --> 00:08:34,159
is taking all these different real-time

248
00:08:32,958 --> 00:08:36,079
event sources

249
00:08:34,159 --> 00:08:38,240
combining them in a safe way and doing

250
00:08:36,080 --> 00:08:39,680
something useful now this is a complete

251
00:08:38,240 --> 00:08:41,599
garbage example because it doesn't do

252
00:08:39,679 --> 00:08:43,199
something really useful part than

253
00:08:41,599 --> 00:08:44,959
show off at conferences but the really

254
00:08:43,200 --> 00:08:45,680
cool advan example is something when you

255
00:08:44,959 --> 00:08:48,959
have

256
00:08:45,680 --> 00:08:51,120
the load and error scenarios and

257
00:08:48,959 --> 00:08:52,160
are say auto scaling up and down

258
00:08:51,120 --> 00:08:54,000
machines and

259
00:08:52,160 --> 00:08:55,439
replacing machines on failure in real

260
00:08:54,000 --> 00:08:57,040
time before you even

261
00:08:55,440 --> 00:08:59,200
get an email that something happened

262
00:08:57,040 --> 00:08:59,680
does that make sense it's a bit abstract

263
00:08:59,200 --> 00:09:01,120
but

264
00:08:59,680 --> 00:09:02,560
we're going to stop the abstract stuff i

265
00:09:01,120 --> 00:09:03,839
have some more concrete examples do you

266
00:09:02,560 --> 00:09:07,119
want to see some more demos

267
00:09:03,839 --> 00:09:08,480
yes yes or no

268
00:09:07,120 --> 00:09:11,040
everyone in the back do you want to see

269
00:09:08,480 --> 00:09:13,040
some more demos

270
00:09:11,040 --> 00:09:14,240
all right i'm going to show one silly

271
00:09:13,040 --> 00:09:16,959
example

272
00:09:14,240 --> 00:09:17,440
this is a new thing in mgmt if anyone's

273
00:09:16,959 --> 00:09:19,518
done

274
00:09:17,440 --> 00:09:21,440
a puppet there's a fragment sort of

275
00:09:19,519 --> 00:09:22,480
pattern where you take a bunch of files

276
00:09:21,440 --> 00:09:23,440
and you glue them together to make a

277
00:09:22,480 --> 00:09:24,880
bigger file

278
00:09:23,440 --> 00:09:27,279
so i realized there was a better way to

279
00:09:24,880 --> 00:09:29,439
do this in mgmt so the file resource

280
00:09:27,279 --> 00:09:31,600
itself it has state right state exists

281
00:09:29,440 --> 00:09:32,000
or whatever but now instead of content

282
00:09:31,600 --> 00:09:33,760
for

283
00:09:32,000 --> 00:09:35,680
kind of like puppet we have this

284
00:09:33,760 --> 00:09:37,519
fragments pattern which can take a list

285
00:09:35,680 --> 00:09:39,359
of things in this case it's a directory

286
00:09:37,519 --> 00:09:41,760
or a file or both

287
00:09:39,360 --> 00:09:43,040
and you can see here's a file down here

288
00:09:41,760 --> 00:09:45,439
that just normal file

289
00:09:43,040 --> 00:09:47,519
and this is another file down here i'm

290
00:09:45,440 --> 00:09:49,760
just going to run this fragment example

291
00:09:47,519 --> 00:09:52,800
right here on the left

292
00:09:49,760 --> 00:09:54,080
and you can see the actual code takes a

293
00:09:52,800 --> 00:09:54,719
bunch of different files and glues them

294
00:09:54,080 --> 00:09:57,760
together

295
00:09:54,720 --> 00:10:01,519
so if we look at

296
00:09:57,760 --> 00:10:01,519
this file is it in

297
00:10:02,480 --> 00:10:09,440
just watch it's this file hole

298
00:10:06,399 --> 00:10:11,120
oops whole one there we go so you can

299
00:10:09,440 --> 00:10:13,279
see this file is a combination of these

300
00:10:11,120 --> 00:10:15,040
three files and this bonus file

301
00:10:13,279 --> 00:10:16,480
right basically this code here plus some

302
00:10:15,040 --> 00:10:19,199
more frags

303
00:10:16,480 --> 00:10:20,240
but the cool thing is if you go into

304
00:10:19,200 --> 00:10:23,760
that directory

305
00:10:20,240 --> 00:10:25,760
down here um

306
00:10:23,760 --> 00:10:27,040
frags you can see those files there and

307
00:10:25,760 --> 00:10:30,160
same thing if i delete

308
00:10:27,040 --> 00:10:31,760
f2 it comes right back right because

309
00:10:30,160 --> 00:10:33,439
that's an individually managed file

310
00:10:31,760 --> 00:10:36,079
that's always ensuring the right state

311
00:10:33,440 --> 00:10:36,880
you can delete f2 and cat f2 it comes

312
00:10:36,079 --> 00:10:40,880
back

313
00:10:36,880 --> 00:10:44,399
but you can even put echo hey fostem

314
00:10:40,880 --> 00:10:44,720
into a new file and see it picked it up

315
00:10:44,399 --> 00:10:46,720
and

316
00:10:44,720 --> 00:10:48,000
right away someone here said that's fast

317
00:10:46,720 --> 00:10:49,519
it is

318
00:10:48,000 --> 00:10:51,360
the real question is not why is this

319
00:10:49,519 --> 00:10:52,320
fast why are all the other tools so damn

320
00:10:51,360 --> 00:10:56,480
slow

321
00:10:52,320 --> 00:10:56,480
am i wrong like this is how it should be

322
00:10:58,959 --> 00:11:02,319
i was getting super old like waiting for

323
00:11:00,480 --> 00:11:03,760
puppet runs and ansible runs to go for

324
00:11:02,320 --> 00:11:05,760
like you know i'd go have a coffee

325
00:11:03,760 --> 00:11:08,240
and or whatever anyway so this is the

326
00:11:05,760 --> 00:11:09,920
idea so we can build the fragments

327
00:11:08,240 --> 00:11:11,519
all with the core file resource and

328
00:11:09,920 --> 00:11:12,959
that's a new thing um

329
00:11:11,519 --> 00:11:15,360
i think there's another demo i wanted to

330
00:11:12,959 --> 00:11:17,599
show you with that um

331
00:11:15,360 --> 00:11:18,640
that's most of it there's not i mean

332
00:11:17,600 --> 00:11:20,079
basic thing but just

333
00:11:18,640 --> 00:11:22,480
a thing that's done i think the right

334
00:11:20,079 --> 00:11:23,519
way so when you're building config files

335
00:11:22,480 --> 00:11:24,959
from different pieces

336
00:11:23,519 --> 00:11:26,839
just sort of native but i want to do

337
00:11:24,959 --> 00:11:28,079
something harder do you want something

338
00:11:26,839 --> 00:11:29,920
harder

339
00:11:28,079 --> 00:11:32,160
okay let's move on more real world

340
00:11:29,920 --> 00:11:32,959
examples so reversible resources this is

341
00:11:32,160 --> 00:11:35,680
a new thing

342
00:11:32,959 --> 00:11:36,399
so um in my main talk today i was

343
00:11:35,680 --> 00:11:38,640
talking about

344
00:11:36,399 --> 00:11:40,240
some properties of config management one

345
00:11:38,640 --> 00:11:41,920
is item potence which you all know

346
00:11:40,240 --> 00:11:43,680
one is convergence which means is the

347
00:11:41,920 --> 00:11:44,880
whole state converged as a whole

348
00:11:43,680 --> 00:11:46,800
and there's a third property which

349
00:11:44,880 --> 00:11:48,560
almost never is is almost never talked

350
00:11:46,800 --> 00:11:50,959
about which is called reversibility

351
00:11:48,560 --> 00:11:52,560
and what reversibility is so you take a

352
00:11:50,959 --> 00:11:53,839
resource it's important it gets you to a

353
00:11:52,560 --> 00:11:56,959
certain desired state

354
00:11:53,839 --> 00:11:58,079
if that state transition is what i call

355
00:11:56,959 --> 00:12:00,719
reversible

356
00:11:58,079 --> 00:12:01,599
that means there should be a reverse

357
00:12:00,720 --> 00:12:03,120
operation

358
00:12:01,600 --> 00:12:04,959
that takes you back to the original

359
00:12:03,120 --> 00:12:07,680
state exactly

360
00:12:04,959 --> 00:12:10,000
okay no not not everything has this but

361
00:12:07,680 --> 00:12:11,519
everything ideally should have this uh

362
00:12:10,000 --> 00:12:13,680
to a certain extent so for example

363
00:12:11,519 --> 00:12:14,880
if i create a file and then i run the

364
00:12:13,680 --> 00:12:17,839
reverse operation

365
00:12:14,880 --> 00:12:18,399
what should happen it removes that file

366
00:12:17,839 --> 00:12:20,160
okay

367
00:12:18,399 --> 00:12:21,920
so let me show you that first example so

368
00:12:20,160 --> 00:12:25,360
i'm going to have an example

369
00:12:21,920 --> 00:12:26,399
temp mgmt hello and all i do is i say

370
00:12:25,360 --> 00:12:28,079
this is the file

371
00:12:26,399 --> 00:12:29,600
and i add this meta parameter this is

372
00:12:28,079 --> 00:12:31,760
built into mgmt you don't have to

373
00:12:29,600 --> 00:12:32,639
do any of this you just say reverse true

374
00:12:31,760 --> 00:12:35,600
please

375
00:12:32,639 --> 00:12:35,600
and here's what happens

376
00:12:35,760 --> 00:12:43,360
this is reverse okay so i'm going to run

377
00:12:40,240 --> 00:12:44,720
this file and what i've done i've

378
00:12:43,360 --> 00:12:47,200
actually i'll show you the code just so

379
00:12:44,720 --> 00:12:48,720
you can see what's happening

380
00:12:47,200 --> 00:12:50,480
i've decided to make it a little bit

381
00:12:48,720 --> 00:12:53,680
fancier so

382
00:12:50,480 --> 00:12:55,120
this code right here is just um a very

383
00:12:53,680 --> 00:12:57,040
simple way to say

384
00:12:55,120 --> 00:12:58,160
every four seconds switch the variable

385
00:12:57,040 --> 00:13:00,480
from true to false

386
00:12:58,160 --> 00:13:01,199
true to false so since mgmt can run in

387
00:13:00,480 --> 00:13:03,120
real time

388
00:13:01,200 --> 00:13:04,959
it's just going to flip a variable on

389
00:13:03,120 --> 00:13:07,519
and off on and off every four seconds

390
00:13:04,959 --> 00:13:08,880
so you can see it running and the thing

391
00:13:07,519 --> 00:13:11,440
that we actually do

392
00:13:08,880 --> 00:13:12,160
this variable is right here see that mod

393
00:13:11,440 --> 00:13:14,399
variable

394
00:13:12,160 --> 00:13:15,760
this one at the very bottom and so this

395
00:13:14,399 --> 00:13:17,040
is the equivalent of

396
00:13:15,760 --> 00:13:19,279
anyone who's done puppet or something

397
00:13:17,040 --> 00:13:20,800
like that has written some code

398
00:13:19,279 --> 00:13:22,800
you ran the puppet code and then you

399
00:13:20,800 --> 00:13:24,959
changed it in git and you ran it again

400
00:13:22,800 --> 00:13:26,880
and in that new git version of the code

401
00:13:24,959 --> 00:13:28,160
that resource is just absent

402
00:13:26,880 --> 00:13:29,760
you didn't change the state you just

403
00:13:28,160 --> 00:13:31,199
removed it from the code and what

404
00:13:29,760 --> 00:13:32,959
happens

405
00:13:31,200 --> 00:13:34,399
that file is still there on your machine

406
00:13:32,959 --> 00:13:36,399
right

407
00:13:34,399 --> 00:13:38,560
so the whole point of reversible is if

408
00:13:36,399 --> 00:13:40,639
you have a resource which is declared

409
00:13:38,560 --> 00:13:42,319
and then at some later time that

410
00:13:40,639 --> 00:13:43,199
resource is no longer declared in your

411
00:13:42,320 --> 00:13:45,839
code

412
00:13:43,199 --> 00:13:48,000
mgmt will say aha this was asked to be

413
00:13:45,839 --> 00:13:49,920
removed this was set as reversible

414
00:13:48,000 --> 00:13:51,199
so it will do the reverse operation when

415
00:13:49,920 --> 00:13:53,120
that code disappears

416
00:13:51,199 --> 00:13:54,240
and what i'm effectively doing if mod

417
00:13:53,120 --> 00:13:56,720
equals true

418
00:13:54,240 --> 00:13:58,639
by saying true is false it's effectively

419
00:13:56,720 --> 00:14:00,079
taking that code out of mgmt

420
00:13:58,639 --> 00:14:01,839
you could obviously just change this

421
00:14:00,079 --> 00:14:03,199
code by deleting the code and running

422
00:14:01,839 --> 00:14:07,120
mgmt again but this is

423
00:14:03,199 --> 00:14:10,000
more visual so we're running this code

424
00:14:07,120 --> 00:14:10,880
what was the file name uh temp mgmt

425
00:14:10,000 --> 00:14:14,480
hello

426
00:14:10,880 --> 00:14:17,760
so it's running here and

427
00:14:14,480 --> 00:14:22,000
temp mgmt oh

428
00:14:17,760 --> 00:14:24,560
where's it um

429
00:14:22,000 --> 00:14:24,560
did it work

430
00:14:25,600 --> 00:14:31,839
oh yeah so i'll just remove the state

431
00:14:28,079 --> 00:14:34,000
time file and i'm just going to

432
00:14:31,839 --> 00:14:35,199
cat star and you can see there's the

433
00:14:34,000 --> 00:14:38,399
file

434
00:14:35,199 --> 00:14:39,359
four seconds go by oh it disappears four

435
00:14:38,399 --> 00:14:41,920
seconds

436
00:14:39,360 --> 00:14:43,440
combined it goes true again and when it

437
00:14:41,920 --> 00:14:46,000
goes to false you can see oh

438
00:14:43,440 --> 00:14:47,279
it's going to disappear cool is that

439
00:14:46,000 --> 00:14:47,760
cool you can applaud if you like i think

440
00:14:47,279 --> 00:14:50,000
that's cool

441
00:14:47,760 --> 00:14:51,519
right okay no no wait wait wait wait

442
00:14:50,000 --> 00:14:54,320
wait wait wait wait okay

443
00:14:51,519 --> 00:14:55,920
let's make it more difficult so the

444
00:14:54,320 --> 00:14:57,440
second thing what about this one down

445
00:14:55,920 --> 00:14:59,120
here the second file

446
00:14:57,440 --> 00:15:03,519
so this one i'm saying i don't declare

447
00:14:59,120 --> 00:15:03,519
the contents i'm just declaring the mode

448
00:15:03,760 --> 00:15:07,199
and when we run this

449
00:15:07,839 --> 00:15:11,839
now i just have to just double check i

450
00:15:09,600 --> 00:15:13,440
didn't

451
00:15:11,839 --> 00:15:15,040
might take me a second to get this one

452
00:15:13,440 --> 00:15:19,600
right

453
00:15:15,040 --> 00:15:19,599
so there's the file

454
00:15:20,079 --> 00:15:23,199
and okay it disappeared so i just have

455
00:15:21,760 --> 00:15:23,760
to actually make a file first because it

456
00:15:23,199 --> 00:15:26,880
doesn't

457
00:15:23,760 --> 00:15:28,240
create one so echo foo into hello right

458
00:15:26,880 --> 00:15:30,800
so there's one that has to be there to

459
00:15:28,240 --> 00:15:33,360
start off right and so now when we run

460
00:15:30,800 --> 00:15:33,359
mgmt

461
00:15:35,199 --> 00:15:42,880
um you can see it takes it away

462
00:15:39,279 --> 00:15:46,480
and puts it back one second

463
00:15:42,880 --> 00:15:46,480
does it start off as true or false

464
00:15:48,800 --> 00:15:55,839
and i'm gonna go i think that's it

465
00:15:57,600 --> 00:16:00,160
there we go

466
00:16:00,959 --> 00:16:05,040
am i running the right code let me just

467
00:16:02,800 --> 00:16:05,040
check

468
00:16:05,199 --> 00:16:08,639
it might be a bug in this but it usually

469
00:16:06,839 --> 00:16:11,120
works um

470
00:16:08,639 --> 00:16:13,680
oh sorry this one doesn't have the mode

471
00:16:11,120 --> 00:16:16,639
uh my mistake

472
00:16:13,680 --> 00:16:17,519
uh i went to do reverse three yeah this

473
00:16:16,639 --> 00:16:20,800
one has the mode

474
00:16:17,519 --> 00:16:25,600
that's why you gotta pick the right demo

475
00:16:20,800 --> 00:16:25,599
so once more we'll run mgmt on the left

476
00:16:27,279 --> 00:16:33,120
okay so there's no file initially so we

477
00:16:30,320 --> 00:16:33,120
gotta create one

478
00:16:33,199 --> 00:16:39,758
and you can see watch the mode boom

479
00:16:36,959 --> 00:16:41,199
okay so it's just setting this the

480
00:16:39,759 --> 00:16:43,040
reason i had to create the file

481
00:16:41,199 --> 00:16:44,479
is because in my resource definition i

482
00:16:43,040 --> 00:16:46,560
did not specify

483
00:16:44,480 --> 00:16:47,920
state present or straight state absent

484
00:16:46,560 --> 00:16:50,000
so if it's not it's just going to leave

485
00:16:47,920 --> 00:16:51,360
that part on it's only managing the mode

486
00:16:50,000 --> 00:16:53,199
and it can only manage the mode if

487
00:16:51,360 --> 00:16:54,320
there's actually a file there and so

488
00:16:53,199 --> 00:16:55,359
that's basically what it's actually

489
00:16:54,320 --> 00:16:58,079
doing is when it

490
00:16:55,360 --> 00:16:59,759
changes the mode the first time just

491
00:16:58,079 --> 00:17:01,920
before it makes that change it actually

492
00:16:59,759 --> 00:17:03,040
stores the existing mode to know what to

493
00:17:01,920 --> 00:17:04,559
reverse it to

494
00:17:03,040 --> 00:17:06,399
so whatever that initial mode happened

495
00:17:04,559 --> 00:17:07,678
to be on your system

496
00:17:06,400 --> 00:17:09,919
is there now this is a bit of an

497
00:17:07,679 --> 00:17:11,919
abstract example right because

498
00:17:09,919 --> 00:17:14,240
um changing a file mode is maybe not the

499
00:17:11,919 --> 00:17:15,439
kind of thing we want but the kind of

500
00:17:14,240 --> 00:17:18,000
place where this is going to get super

501
00:17:15,439 --> 00:17:19,439
interesting is where in our code

502
00:17:18,000 --> 00:17:21,679
we're declaring the state of running

503
00:17:19,439 --> 00:17:23,280
containers and running virtual machines

504
00:17:21,679 --> 00:17:25,839
and all these other real-time systems

505
00:17:23,280 --> 00:17:27,039
and when they disappear um we can turn

506
00:17:25,839 --> 00:17:29,200
them off and stuff like that

507
00:17:27,039 --> 00:17:31,200
so we can build fancy systems we could

508
00:17:29,200 --> 00:17:33,200
build a kubernetes like scheduler

509
00:17:31,200 --> 00:17:34,640
in like 100 lines of mcl code and it

510
00:17:33,200 --> 00:17:36,320
would be super safe and easy to

511
00:17:34,640 --> 00:17:40,400
customize and

512
00:17:36,320 --> 00:17:44,159
no yaml involved how long do i have left

513
00:17:40,400 --> 00:17:46,080
until 50 55 oh my god the short talk

514
00:17:44,160 --> 00:17:47,440
okay i'm going to show you another thing

515
00:17:46,080 --> 00:17:50,080
so

516
00:17:47,440 --> 00:17:51,919
um i decided um we have resources and

517
00:17:50,080 --> 00:17:52,639
our resource model has this event system

518
00:17:51,919 --> 00:17:54,960
built in

519
00:17:52,640 --> 00:17:56,720
which for programmers means that in the

520
00:17:54,960 --> 00:17:58,240
implementation of each kind of resource

521
00:17:56,720 --> 00:17:59,600
there's a main loop from like

522
00:17:58,240 --> 00:18:00,400
event-based programming main loop

523
00:17:59,600 --> 00:18:01,760
programming

524
00:18:00,400 --> 00:18:03,679
maybe that rings a bell but it basically

525
00:18:01,760 --> 00:18:05,679
means we can run some code inside that

526
00:18:03,679 --> 00:18:07,600
main loop

527
00:18:05,679 --> 00:18:09,120
and one of the things we can do is we

528
00:18:07,600 --> 00:18:11,120
can run a tftp server

529
00:18:09,120 --> 00:18:13,120
in the resource it's just a simple

530
00:18:11,120 --> 00:18:15,120
daemon could be a web server it could be

531
00:18:13,120 --> 00:18:16,399
even a huge database server although

532
00:18:15,120 --> 00:18:18,399
that might get a little huge

533
00:18:16,400 --> 00:18:20,400
but just as a simple example we have a

534
00:18:18,400 --> 00:18:22,400
tftp server resource which i've built

535
00:18:20,400 --> 00:18:25,120
which i'll show you in a second

536
00:18:22,400 --> 00:18:26,080
and the cool thing is so you have the

537
00:18:25,120 --> 00:18:28,479
resource itself

538
00:18:26,080 --> 00:18:29,600
when that first resource runs it sets up

539
00:18:28,480 --> 00:18:31,840
the server and starts

540
00:18:29,600 --> 00:18:32,719
listening it's in the mgmt binary so

541
00:18:31,840 --> 00:18:35,520
it's just like a

542
00:18:32,720 --> 00:18:36,720
super powerful binary and then the other

543
00:18:35,520 --> 00:18:39,280
thing is say you want to actually have

544
00:18:36,720 --> 00:18:42,080
files that that resource serves

545
00:18:39,280 --> 00:18:43,678
i've defined down here a tftp file so

546
00:18:42,080 --> 00:18:45,678
there's no data on disk anywhere it's

547
00:18:43,679 --> 00:18:46,240
going directly into memory in the tftp

548
00:18:45,679 --> 00:18:48,000
server

549
00:18:46,240 --> 00:18:50,240
and just for fun for traditionalist i've

550
00:18:48,000 --> 00:18:51,840
made a normal folder

551
00:18:50,240 --> 00:18:53,440
which is this root directory here so you

552
00:18:51,840 --> 00:18:54,879
can actually just have a folder of

553
00:18:53,440 --> 00:18:56,720
stuff on a disk and that will also be

554
00:18:54,880 --> 00:18:59,280
part of the tftp server resource

555
00:18:56,720 --> 00:19:01,120
now here's the magic part you might

556
00:18:59,280 --> 00:19:01,840
remember this from a very early talk i

557
00:19:01,120 --> 00:19:04,000
gave

558
00:19:01,840 --> 00:19:05,600
many years ago called automatic grouping

559
00:19:04,000 --> 00:19:07,120
so this is a graph of resources that

560
00:19:05,600 --> 00:19:11,120
mgmt produces

561
00:19:07,120 --> 00:19:12,399
right and mgmt does a really cool thing

562
00:19:11,120 --> 00:19:14,479
with this graph

563
00:19:12,400 --> 00:19:16,240
um which is it makes it more efficient

564
00:19:14,480 --> 00:19:17,039
in that if you see there's three package

565
00:19:16,240 --> 00:19:18,480
resources

566
00:19:17,039 --> 00:19:19,760
and with puppet and every other tool

567
00:19:18,480 --> 00:19:20,720
what's going to happen it's going to see

568
00:19:19,760 --> 00:19:22,240
this graph

569
00:19:20,720 --> 00:19:24,160
those are the dependencies those are the

570
00:19:22,240 --> 00:19:25,760
different resources and it's going to

571
00:19:24,160 --> 00:19:28,000
start up the package manager

572
00:19:25,760 --> 00:19:30,480
install powertop then shut it down

573
00:19:28,000 --> 00:19:32,880
install calc shut it down install sl

574
00:19:30,480 --> 00:19:33,520
which has a lot of overhead so mgmt can

575
00:19:32,880 --> 00:19:35,039
actually

576
00:19:33,520 --> 00:19:36,639
analyze this graph you don't have to do

577
00:19:35,039 --> 00:19:38,480
anything happens automatically and we'll

578
00:19:36,640 --> 00:19:40,720
rearrange this particular graph

579
00:19:38,480 --> 00:19:42,240
to look like this and that will group

580
00:19:40,720 --> 00:19:42,880
those three resources that can be run

581
00:19:42,240 --> 00:19:44,400
together

582
00:19:42,880 --> 00:19:46,559
and it will actually take that package

583
00:19:44,400 --> 00:19:47,200
resource and turn it into a like yum

584
00:19:46,559 --> 00:19:49,280
install

585
00:19:47,200 --> 00:19:51,120
three packages in one transaction which

586
00:19:49,280 --> 00:19:54,559
makes it really fast

587
00:19:51,120 --> 00:19:56,879
and so the way this works for the tftp

588
00:19:54,559 --> 00:20:00,320
resource

589
00:19:56,880 --> 00:20:01,679
is that different parts of the resource

590
00:20:00,320 --> 00:20:02,799
that all should be part of the same

591
00:20:01,679 --> 00:20:04,559
running code base

592
00:20:02,799 --> 00:20:06,320
in this case the server and all the

593
00:20:04,559 --> 00:20:08,000
different file definitions will actually

594
00:20:06,320 --> 00:20:08,639
be grouped together automatically in the

595
00:20:08,000 --> 00:20:10,080
background

596
00:20:08,640 --> 00:20:12,559
and so they'll all function together as

597
00:20:10,080 --> 00:20:14,559
a single entity

598
00:20:12,559 --> 00:20:16,240
so magic stuff happens but to the end

599
00:20:14,559 --> 00:20:17,918
user it looks simple and separate

600
00:20:16,240 --> 00:20:19,600
so different parts of your code

601
00:20:17,919 --> 00:20:21,760
different modules

602
00:20:19,600 --> 00:20:22,879
in the apache package versus some other

603
00:20:21,760 --> 00:20:24,799
package can actually now

604
00:20:22,880 --> 00:20:26,640
contribute code to each other's

605
00:20:24,799 --> 00:20:28,480
functioning with automatic grouping

606
00:20:26,640 --> 00:20:29,760
does that make sense this was always

607
00:20:28,480 --> 00:20:31,840
like a problem we had in puppet

608
00:20:29,760 --> 00:20:33,520
there was no way for this module to play

609
00:20:31,840 --> 00:20:36,399
nicely with the firewall module

610
00:20:33,520 --> 00:20:37,600
or vice versa exported resources got you

611
00:20:36,400 --> 00:20:39,200
for some of the stuff

612
00:20:37,600 --> 00:20:41,199
which we can do in a different way and

613
00:20:39,200 --> 00:20:42,880
other way as well but this is a core

614
00:20:41,200 --> 00:20:43,919
thing which was not in puppet which i

615
00:20:42,880 --> 00:20:44,720
think is quite helpful you want to see a

616
00:20:43,919 --> 00:20:49,360
demo of this

617
00:20:44,720 --> 00:20:52,000
yes no yeah you want to see a demo

618
00:20:49,360 --> 00:20:54,080
i'm trying to put the energy so all

619
00:20:52,000 --> 00:20:56,720
right so let's run this tftp so i'm just

620
00:20:54,080 --> 00:20:58,480
running it here on the left

621
00:20:56,720 --> 00:21:00,320
and i forget how to actually i have a

622
00:20:58,480 --> 00:21:04,960
little um it's not

623
00:21:00,320 --> 00:21:07,120
as exciting as you want tftp

624
00:21:04,960 --> 00:21:08,799
so i have a go run i just have a simple

625
00:21:07,120 --> 00:21:10,799
tftp client

626
00:21:08,799 --> 00:21:11,918
in in the git repository so you can just

627
00:21:10,799 --> 00:21:15,280
run that yourself

628
00:21:11,919 --> 00:21:17,120
it's on port 1069 so i don't need root

629
00:21:15,280 --> 00:21:19,360
and we can just ask it i'll just put

630
00:21:17,120 --> 00:21:20,879
some here ask for file zero

631
00:21:19,360 --> 00:21:22,399
and you can see on the left you see in

632
00:21:20,880 --> 00:21:23,360
the logs the resource is like ah

633
00:21:22,400 --> 00:21:24,799
something happened

634
00:21:23,360 --> 00:21:26,479
i requested a file and you can see the

635
00:21:24,799 --> 00:21:29,440
output of the file right there

636
00:21:26,480 --> 00:21:30,640
okay and you can do other stuff there's

637
00:21:29,440 --> 00:21:32,480
another file

638
00:21:30,640 --> 00:21:33,840
on the file server you can see that and

639
00:21:32,480 --> 00:21:36,559
so on and so forth

640
00:21:33,840 --> 00:21:38,080
cool this is actually practical it's not

641
00:21:36,559 --> 00:21:39,200
useless to have a tft server because i

642
00:21:38,080 --> 00:21:40,720
have to do something real

643
00:21:39,200 --> 00:21:44,400
so i'm going to try this one demo over

644
00:21:40,720 --> 00:21:45,679
ssh just to show you don't tell

645
00:21:44,400 --> 00:21:47,760
so this is some phone that i have

646
00:21:45,679 --> 00:21:51,280
running in canada

647
00:21:47,760 --> 00:21:54,480
and over here this is mgmt running

648
00:21:51,280 --> 00:21:56,639
and what it's doing it's just an mgmt

649
00:21:54,480 --> 00:21:57,760
cluster in canada somewhere running a

650
00:21:56,640 --> 00:22:00,960
tftp server

651
00:21:57,760 --> 00:22:03,280
and it has files for as you guess

652
00:22:00,960 --> 00:22:04,400
uh each mac address for the device

653
00:22:03,280 --> 00:22:07,440
there's a

654
00:22:04,400 --> 00:22:10,480
mgmt template which builds the templates

655
00:22:07,440 --> 00:22:11,679
and let's restart the phone this is in

656
00:22:10,480 --> 00:22:13,200
someone's office so let's hope they

657
00:22:11,679 --> 00:22:16,960
don't mind

658
00:22:13,200 --> 00:22:17,919
um i think factory sets probably better

659
00:22:16,960 --> 00:22:20,400
i don't know if this is going to work

660
00:22:17,919 --> 00:22:21,840
because like i've been gone for a while

661
00:22:20,400 --> 00:22:23,600
and they might have moved the phone

662
00:22:21,840 --> 00:22:26,158
around but in theory

663
00:22:23,600 --> 00:22:27,678
this poor phone in some ladies office is

664
00:22:26,159 --> 00:22:30,480
going to reboot right now

665
00:22:27,679 --> 00:22:32,960
and after a while right here i'll just

666
00:22:30,480 --> 00:22:35,840
show you mgmt is really running

667
00:22:32,960 --> 00:22:37,600
um oh what was that about oh that's my

668
00:22:35,840 --> 00:22:41,439
ssh forwarding

669
00:22:37,600 --> 00:22:42,480
after a while you should see

670
00:22:41,440 --> 00:22:43,840
this will take a little while because

671
00:22:42,480 --> 00:22:45,360
the phone is like from grand stream

672
00:22:43,840 --> 00:22:45,760
which is this chinese company that makes

673
00:22:45,360 --> 00:22:48,000
really

674
00:22:45,760 --> 00:22:49,440
bad software so if anyone knows anyone

675
00:22:48,000 --> 00:22:51,360
grants you i found more bugs in these

676
00:22:49,440 --> 00:22:52,960
phones it's unbelievable

677
00:22:51,360 --> 00:22:54,479
so that's just the long term demo it

678
00:22:52,960 --> 00:22:56,080
should eventually come back and it will

679
00:22:54,480 --> 00:22:58,480
provision itself and takes a little

680
00:22:56,080 --> 00:23:01,678
while um and while that happens

681
00:22:58,480 --> 00:23:03,120
you'll see the logs and like i'm really

682
00:23:01,679 --> 00:23:05,679
using this now in production for

683
00:23:03,120 --> 00:23:07,520
setting up crappy sip phones that's cool

684
00:23:05,679 --> 00:23:11,840
right walter

685
00:23:07,520 --> 00:23:14,080
hey uh so i got a few minutes left

686
00:23:11,840 --> 00:23:15,360
50. what is the time it's end okay so

687
00:23:14,080 --> 00:23:17,600
i'm gonna so

688
00:23:15,360 --> 00:23:19,600
um this the the connection areas you're

689
00:23:17,600 --> 00:23:20,959
seeing is just my ssh tunnel because

690
00:23:19,600 --> 00:23:23,280
the web browser is trying to connect

691
00:23:20,960 --> 00:23:24,720
back and but in a while the phone should

692
00:23:23,280 --> 00:23:26,000
boot up while that happens i'm just

693
00:23:24,720 --> 00:23:27,120
going to sort of finish off

694
00:23:26,000 --> 00:23:30,080
the end of the talk and then we'll look

695
00:23:27,120 --> 00:23:34,719
at the logs because that's awesome

696
00:23:30,080 --> 00:23:36,080
this is a shorter talk so what's left so

697
00:23:34,720 --> 00:23:37,600
i'd always like a few more functions in

698
00:23:36,080 --> 00:23:39,199
the standard library we actually have a

699
00:23:37,600 --> 00:23:40,639
lot of the golang standard library

700
00:23:39,200 --> 00:23:42,400
imported automatically

701
00:23:40,640 --> 00:23:43,760
into mgmt so we have all the functions

702
00:23:42,400 --> 00:23:45,600
you could want

703
00:23:43,760 --> 00:23:46,879
um there are some new features which are

704
00:23:45,600 --> 00:23:48,559
not there yet

705
00:23:46,880 --> 00:23:50,320
there's a few bugs unfortunately there's

706
00:23:48,559 --> 00:23:51,918
a really yucky race in the engine and

707
00:23:50,320 --> 00:23:52,559
there's this function as value stuff

708
00:23:51,919 --> 00:23:53,679
which i'm

709
00:23:52,559 --> 00:23:56,158
going to probably talk about a bit

710
00:23:53,679 --> 00:23:56,640
tomorrow in the languages devroom which

711
00:23:56,159 --> 00:23:58,799
is not

712
00:23:56,640 --> 00:24:01,039
finished but how can you help this is

713
00:23:58,799 --> 00:24:02,799
about you so use this test it patch it

714
00:24:01,039 --> 00:24:04,158
share it document it start blog it tweet

715
00:24:02,799 --> 00:24:04,559
it discuss it hack it if you think it's

716
00:24:04,159 --> 00:24:06,159
cool

717
00:24:04,559 --> 00:24:07,678
hack on this stuff are we at a hacker

718
00:24:06,159 --> 00:24:10,000
conference

719
00:24:07,679 --> 00:24:11,039
like i get surprisingly few patches from

720
00:24:10,000 --> 00:24:14,000
hacker conferences

721
00:24:11,039 --> 00:24:15,440
so i'm kind of like worried um and i

722
00:24:14,000 --> 00:24:17,200
basically i used to work at red hat

723
00:24:15,440 --> 00:24:18,720
and they stopped funding my work i

724
00:24:17,200 --> 00:24:20,080
decided to leave red hat and just sort

725
00:24:18,720 --> 00:24:22,080
of do this on my own dime

726
00:24:20,080 --> 00:24:23,439
so it super sucks to pay for all this

727
00:24:22,080 --> 00:24:25,120
stuff and life's expensive

728
00:24:23,440 --> 00:24:27,279
so if you want to send me money on the

729
00:24:25,120 --> 00:24:30,639
internets finding a hacker

730
00:24:27,279 --> 00:24:31,919
is very sexy i'm trying to make this

731
00:24:30,640 --> 00:24:32,559
into something that will be viable on

732
00:24:31,919 --> 00:24:33,760
its own

733
00:24:32,559 --> 00:24:35,039
because i don't want to do proprietary

734
00:24:33,760 --> 00:24:36,320
software i like to do this because i

735
00:24:35,039 --> 00:24:39,520
believe in this project

736
00:24:36,320 --> 00:24:41,678
but um you know you got to eat so

737
00:24:39,520 --> 00:24:42,639
in the next six months or in 2020 i'm

738
00:24:41,679 --> 00:24:44,320
going to be trying to launch

739
00:24:42,640 --> 00:24:46,559
a corporate sponsorship thing so we're

740
00:24:44,320 --> 00:24:47,918
having an mgmt website that's launching

741
00:24:46,559 --> 00:24:49,600
and we're going to put your logo in the

742
00:24:47,919 --> 00:24:51,440
big front and center

743
00:24:49,600 --> 00:24:52,959
for like some small amount of money per

744
00:24:51,440 --> 00:24:54,559
year so if you work for a company and

745
00:24:52,960 --> 00:24:56,400
you can convince them for like

746
00:24:54,559 --> 00:24:58,720
a few thousand euros per year or

747
00:24:56,400 --> 00:25:01,840
something like that small amount

748
00:24:58,720 --> 00:25:03,600
that would be great um and uh

749
00:25:01,840 --> 00:25:04,959
then we'll free we won't forget you when

750
00:25:03,600 --> 00:25:07,600
we're a big company

751
00:25:04,960 --> 00:25:08,559
and we like are feeling angry with small

752
00:25:07,600 --> 00:25:11,120
businesses i'll be like

753
00:25:08,559 --> 00:25:12,080
you are a founder sponsor so so yeah

754
00:25:11,120 --> 00:25:13,840
please reach out to me

755
00:25:12,080 --> 00:25:16,158
send me a message to this contact form

756
00:25:13,840 --> 00:25:17,600
saying hey i'd love to have uh

757
00:25:16,159 --> 00:25:19,279
my company be involved or i'd like to

758
00:25:17,600 --> 00:25:20,480
have a training session or i'd like to

759
00:25:19,279 --> 00:25:23,279
help sponsor help out

760
00:25:20,480 --> 00:25:24,640
we'd love to work with you that cool

761
00:25:23,279 --> 00:25:26,840
yeah will you all do this

762
00:25:24,640 --> 00:25:28,159
ask your companies please let's just

763
00:25:26,840 --> 00:25:30,559
recap

764
00:25:28,159 --> 00:25:32,159
i'll let you recap it's a recapping joke

765
00:25:30,559 --> 00:25:34,720
it's not funny i've used it before

766
00:25:32,159 --> 00:25:36,159
uh there's an irc channel where i talk

767
00:25:34,720 --> 00:25:37,760
about what i'm working on and stuff like

768
00:25:36,159 --> 00:25:40,320
that there's a tweeter bot

769
00:25:37,760 --> 00:25:41,679
um and a mailing list there's the

770
00:25:40,320 --> 00:25:43,039
technical blog of james so everyone

771
00:25:41,679 --> 00:25:43,600
knows about this now so you can go to

772
00:25:43,039 --> 00:25:46,320
google

773
00:25:43,600 --> 00:25:46,799
it has rss even check it out i'm purple

774
00:25:46,320 --> 00:25:49,600
idea

775
00:25:46,799 --> 00:25:51,039
on twitter and github and all this stuff

776
00:25:49,600 --> 00:25:53,600
so if you want to ping me

777
00:25:51,039 --> 00:25:56,240
uh which is fun uh oh this is actually

778
00:25:53,600 --> 00:25:59,120
the wrong date so not tomorrow but um

779
00:25:56,240 --> 00:26:01,279
tomorrow there is one more technical

780
00:25:59,120 --> 00:26:03,279
talk about mgmt in the minimalistic

781
00:26:01,279 --> 00:26:06,720
languages dev room that i'm giving

782
00:26:03,279 --> 00:26:08,080
and then the day after like in ghent

783
00:26:06,720 --> 00:26:08,720
there's this conference that chris and

784
00:26:08,080 --> 00:26:12,960
everyone else

785
00:26:08,720 --> 00:26:12,960
organizing which there's more fun stuff

786
00:26:13,520 --> 00:26:17,039
and if you want if you come i will give

787
00:26:15,600 --> 00:26:19,360
you a sticker on your way out

788
00:26:17,039 --> 00:26:20,960
now let's just uh quickly see actually

789
00:26:19,360 --> 00:26:23,678
you can see right here

790
00:26:20,960 --> 00:26:24,000
the tftp server is in fact reading and

791
00:26:23,679 --> 00:26:27,120
the phone

792
00:26:24,000 --> 00:26:30,000
is provisioning so it's uh

793
00:26:27,120 --> 00:26:32,158
starting up so that actually worked wait

794
00:26:30,000 --> 00:26:32,159
wait

795
00:26:32,880 --> 00:26:38,960
uh almost two seconds two seconds

796
00:26:36,400 --> 00:26:40,799
uh you can thank chris and toshan if you

797
00:26:38,960 --> 00:26:53,840
like my talk he's here on the front

798
00:26:40,799 --> 00:26:53,840
uh thank you very much

799
00:26:54,320 --> 00:26:56,399
you

