1
00:00:04,790 --> 00:00:09,529
<font color="#E5E5E5">all right I think we're ready to go</font>

2
00:00:09,980 --> 00:00:15,210
<font color="#CCCCCC">first thanks for everyone to come here</font>

3
00:00:13,320 --> 00:00:16,740
to see my presentation<font color="#CCCCCC"> today my</font><font color="#E5E5E5"> name is</font>

4
00:00:15,210 --> 00:00:21,150
<font color="#CCCCCC">Lucas rusik</font>

5
00:00:16,740 --> 00:00:22,650
<font color="#CCCCCC">I work</font><font color="#E5E5E5"> on Cody and my spare time</font><font color="#CCCCCC"> I have</font>

6
00:00:21,150 --> 00:00:27,299
a few other colleagues here with me as

7
00:00:22,650 --> 00:00:29,930
well<font color="#CCCCCC"> that do it as well this</font><font color="#E5E5E5"> is my</font>

8
00:00:27,300 --> 00:00:32,549
actually first time<font color="#E5E5E5"> being at FOSDEM</font>

9
00:00:29,930 --> 00:00:34,920
<font color="#CCCCCC">first time presenting</font><font color="#E5E5E5"> at FOSDEM so</font>

10
00:00:32,549 --> 00:00:38,190
<font color="#E5E5E5">that's a really exciting opportunity</font><font color="#CCCCCC"> for</font>

11
00:00:34,920 --> 00:00:44,010
me there's a few<font color="#CCCCCC"> parts</font><font color="#E5E5E5"> of this</font>

12
00:00:38,190 --> 00:00:46,910
presentation<font color="#CCCCCC"> and we'll see what we got</font>

13
00:00:44,010 --> 00:00:46,910
<font color="#CCCCCC">here</font><font color="#E5E5E5"> so</font>

14
00:01:05,260 --> 00:01:12,040
next slide<font color="#CCCCCC"> okay all</font><font color="#E5E5E5"> right so just a</font>

15
00:01:10,750 --> 00:01:15,190
quick overview<font color="#CCCCCC"> of what I'm gonna</font><font color="#E5E5E5"> be</font>

16
00:01:12,040 --> 00:01:19,290
going over<font color="#E5E5E5"> here</font><font color="#CCCCCC"> problems</font><font color="#E5E5E5"> that we're</font>

17
00:01:15,190 --> 00:01:24,130
facing and<font color="#E5E5E5"> what the actual problems are</font>

18
00:01:19,290 --> 00:01:25,710
how we solve these problems<font color="#CCCCCC"> and</font><font color="#E5E5E5"> then</font>

19
00:01:24,130 --> 00:01:29,280
<font color="#CCCCCC">where</font><font color="#E5E5E5"> we're gonna go from</font><font color="#CCCCCC"> here so</font>

20
00:01:25,710 --> 00:01:33,699
<font color="#CCCCCC">everything</font><font color="#E5E5E5"> I'm presenting in here is</font>

21
00:01:29,280 --> 00:01:36,910
already<font color="#CCCCCC"> in Cody master it'll be in</font><font color="#E5E5E5"> the</font>

22
00:01:33,700 --> 00:01:40,660
<font color="#E5E5E5">version 18 release if you saw</font><font color="#CCCCCC"> Martin's</font>

23
00:01:36,910 --> 00:01:43,929
<font color="#E5E5E5">talk earlier</font><font color="#CCCCCC"> he mentioned</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> there's</font>

24
00:01:40,660 --> 00:01:46,929
<font color="#E5E5E5">the new</font><font color="#CCCCCC"> DRM backend that's a big</font><font color="#E5E5E5"> part of</font>

25
00:01:43,930 --> 00:01:48,310
this<font color="#CCCCCC"> so I was actually planning on</font><font color="#E5E5E5"> doing</font>

26
00:01:46,930 --> 00:01:53,020
a demo but<font color="#E5E5E5"> I don't think I'm gonna be</font>

27
00:01:48,310 --> 00:01:55,030
<font color="#CCCCCC">doing it</font><font color="#E5E5E5"> because I the board I have was</font>

28
00:01:53,020 --> 00:01:56,560
only has HDMI<font color="#E5E5E5"> out and I</font><font color="#CCCCCC"> don't</font><font color="#E5E5E5"> have an</font>

29
00:01:55,030 --> 00:01:58,030
<font color="#E5E5E5">adapter and I don't even know if</font><font color="#CCCCCC"> it</font>

30
00:01:56,560 --> 00:02:03,070
would<font color="#CCCCCC"> honestly work at this resolution</font>

31
00:01:58,030 --> 00:02:07,690
anyway but we can maybe<font color="#E5E5E5"> find something</font>

32
00:02:03,070 --> 00:02:10,239
later<font color="#E5E5E5"> to to play with it so just a bit</font>

33
00:02:07,690 --> 00:02:12,310
<font color="#E5E5E5">of terminology that I'd like to go over</font>

34
00:02:10,240 --> 00:02:15,400
<font color="#CCCCCC">before getting into</font><font color="#E5E5E5"> it there's there's</font>

35
00:02:12,310 --> 00:02:18,790
so many abbreviations in the Linux

36
00:02:15,400 --> 00:02:21,550
kernel<font color="#E5E5E5"> stuff so stuff you'll see</font>

37
00:02:18,790 --> 00:02:23,380
throughout this<font color="#CCCCCC"> DRM kms is the direct</font>

38
00:02:21,550 --> 00:02:25,840
rendering<font color="#CCCCCC"> Rena jure a</font><font color="#E5E5E5"> kernel mode</font>

39
00:02:23,380 --> 00:02:28,180
setting<font color="#E5E5E5"> I assume most of you know what</font>

40
00:02:25,840 --> 00:02:30,600
<font color="#CCCCCC">that is</font><font color="#E5E5E5"> being in this graphics dev room</font>

41
00:02:28,180 --> 00:02:34,300
but we'll touch on that a bit<font color="#E5E5E5"> later</font>

42
00:02:30,600 --> 00:02:37,299
<font color="#CCCCCC">spc being single board computer devices</font>

43
00:02:34,300 --> 00:02:39,940
like raspberry<font color="#E5E5E5"> PI's and I brought a</font>

44
00:02:37,300 --> 00:02:43,480
dragon board here but there's plenty<font color="#E5E5E5"> of</font>

45
00:02:39,940 --> 00:02:46,900
<font color="#E5E5E5">other stuff out there system-on-a-chip</font>

46
00:02:43,480 --> 00:02:51,010
<font color="#CCCCCC">a</font><font color="#E5E5E5"> similar idea</font><font color="#CCCCCC"> v4 l2 is the video for</font>

47
00:02:46,900 --> 00:02:54,450
<font color="#E5E5E5">Linux</font><font color="#CCCCCC"> two subsystem</font><font color="#E5E5E5"> in the Linux kernel</font>

48
00:02:51,010 --> 00:02:56,890
<font color="#E5E5E5">and then BSP being board Support Package</font>

49
00:02:54,450 --> 00:03:00,810
<font color="#CCCCCC">it's something</font><font color="#E5E5E5"> that vendors supply with</font>

50
00:02:56,890 --> 00:03:03,670
their with<font color="#CCCCCC"> their single</font><font color="#E5E5E5"> board computers</font>

51
00:03:00,810 --> 00:03:07,660
<font color="#CCCCCC">it's usually a static kernel release and</font>

52
00:03:03,670 --> 00:03:11,380
<font color="#E5E5E5">that's what you have to</font><font color="#CCCCCC"> use and then</font><font color="#E5E5E5"> RK</font>

53
00:03:07,660 --> 00:03:15,450
<font color="#E5E5E5">MPP is the rock ship media process</font>

54
00:03:11,380 --> 00:03:15,450
platform so

55
00:03:18,410 --> 00:03:23,780
what is this actual problem<font color="#CCCCCC"> that we see</font>

56
00:03:20,880 --> 00:03:23,780
today

57
00:03:24,950 --> 00:03:33,839
<font color="#E5E5E5">so many new single board computers come</font>

58
00:03:29,280 --> 00:03:39,209
out all<font color="#E5E5E5"> the</font><font color="#CCCCCC"> time there's now eight or</font>

59
00:03:33,840 --> 00:03:41,160
<font color="#CCCCCC">nine top SOC vendors that we see all</font>

60
00:03:39,209 --> 00:03:43,920
with like varying levels of<font color="#CCCCCC"> support in</font>

61
00:03:41,160 --> 00:03:45,720
the<font color="#E5E5E5"> Linux kernel</font><font color="#CCCCCC"> people buy these new</font>

62
00:03:43,920 --> 00:03:51,569
boards on a whim<font color="#CCCCCC"> and hope for them to</font>

63
00:03:45,720 --> 00:03:54,000
work in in their applications<font color="#CCCCCC"> it's quite</font>

64
00:03:51,569 --> 00:03:55,649
a big<font color="#E5E5E5"> problem it creates quite a lot of</font>

65
00:03:54,000 --> 00:03:59,040
<font color="#E5E5E5">code maintenance</font><font color="#CCCCCC"> especially when there's</font>

66
00:03:55,650 --> 00:04:05,870
a<font color="#E5E5E5"> specific platform platform</font><font color="#CCCCCC"> specific</font>

67
00:03:59,040 --> 00:04:05,870
code in in in your application so

68
00:04:05,989 --> 00:04:12,930
<font color="#CCCCCC">oftentimes you're stuck with the vendors</font>

69
00:04:08,569 --> 00:04:15,030
<font color="#CCCCCC">board Support Package which in a lot of</font>

70
00:04:12,930 --> 00:04:17,310
<font color="#E5E5E5">cases it's usually a really old colonel</font>

71
00:04:15,030 --> 00:04:20,130
I mean<font color="#CCCCCC"> AM logics kernel is based on</font>

72
00:04:17,310 --> 00:04:24,680
three point one four which is severely

73
00:04:20,130 --> 00:04:27,360
outdated by today's standards so and

74
00:04:24,680 --> 00:04:31,080
they<font color="#CCCCCC"> really haven't done much to update</font>

75
00:04:27,360 --> 00:04:32,640
that<font color="#E5E5E5"> but that's their their thing</font><font color="#CCCCCC"> a lot</font>

76
00:04:31,080 --> 00:04:35,700
<font color="#CCCCCC">of these</font><font color="#E5E5E5"> solutions use proprietary</font>

77
00:04:32,640 --> 00:04:38,550
methods as well to do all the windowing

78
00:04:35,700 --> 00:04:40,469
stuff so<font color="#E5E5E5"> they provide you a thing and</font>

79
00:04:38,550 --> 00:04:44,010
provide some<font color="#CCCCCC"> documentation on how</font><font color="#E5E5E5"> to use</font>

80
00:04:40,470 --> 00:04:45,780
<font color="#E5E5E5">this blob and you've write your code</font>

81
00:04:44,010 --> 00:04:51,180
around<font color="#E5E5E5"> it and it does some magic inside</font>

82
00:04:45,780 --> 00:04:53,010
it and and hope it works<font color="#CCCCCC"> but they're</font>

83
00:04:51,180 --> 00:04:54,810
usually all<font color="#E5E5E5"> platform-specific so they</font>

84
00:04:53,010 --> 00:04:58,469
all require<font color="#E5E5E5"> platform-specific wrappers</font>

85
00:04:54,810 --> 00:05:00,990
<font color="#CCCCCC">around certain</font><font color="#E5E5E5"> things so this becomes a</font>

86
00:04:58,470 --> 00:05:03,389
huge<font color="#E5E5E5"> maintenance burden</font><font color="#CCCCCC"> I'll show you in</font>

87
00:05:00,990 --> 00:05:07,010
a sec here<font color="#CCCCCC"> what I actually mean by that</font>

88
00:05:03,389 --> 00:05:10,620
but it's it's actually<font color="#E5E5E5"> quite large so</font>

89
00:05:07,010 --> 00:05:12,180
currently in Cody as of the version 17

90
00:05:10,620 --> 00:05:16,139
released so the<font color="#E5E5E5"> version that's already</font>

91
00:05:12,180 --> 00:05:20,190
<font color="#E5E5E5">out</font><font color="#CCCCCC"> raspberry pi am logic and I am x-6</font>

92
00:05:16,139 --> 00:05:22,039
support<font color="#CCCCCC"> existed varying degrees the</font>

93
00:05:20,190 --> 00:05:25,169
success with kind<font color="#E5E5E5"> of all of them but</font>

94
00:05:22,039 --> 00:05:30,180
<font color="#CCCCCC">raspberry pi being pretty well and it</font><font color="#E5E5E5"> is</font>

95
00:05:25,169 --> 00:05:35,580
a<font color="#CCCCCC"> vendor</font><font color="#E5E5E5"> supplied kernel with blobs</font><font color="#CCCCCC"> to</font>

96
00:05:30,180 --> 00:05:38,760
use it<font color="#CCCCCC"> and logic is in my opinion a bit</font>

97
00:05:35,580 --> 00:05:43,440
of a hack but we're working<font color="#E5E5E5"> on it and</font>

98
00:05:38,760 --> 00:05:48,690
then imx6<font color="#E5E5E5"> kind of just lost interest by</font>

99
00:05:43,440 --> 00:05:50,940
people and so as of now<font color="#E5E5E5"> imx6 has</font>

100
00:05:48,690 --> 00:05:53,070
actually been ripped out<font color="#E5E5E5"> of</font><font color="#CCCCCC"> cody</font><font color="#E5E5E5"> thanks</font>

101
00:05:50,940 --> 00:05:57,860
to me

102
00:05:53,070 --> 00:06:01,979
we've actually rejected some PRS for

103
00:05:57,860 --> 00:06:03,660
specific code in<font color="#CCCCCC"> in Cody just</font><font color="#E5E5E5"> because we</font>

104
00:06:01,979 --> 00:06:06,719
didn't<font color="#E5E5E5"> want to take on this maintenance</font>

105
00:06:03,660 --> 00:06:09,300
<font color="#E5E5E5">burden anymore there's already not</font>

106
00:06:06,720 --> 00:06:12,449
enough<font color="#E5E5E5"> maintainer</font><font color="#CCCCCC"> zin Cody</font><font color="#E5E5E5"> for a lot of</font>

107
00:06:09,300 --> 00:06:15,150
the a<font color="#CCCCCC"> lot</font><font color="#E5E5E5"> of the work we do and in most</font>

108
00:06:12,449 --> 00:06:17,370
areas there's only one maintainer<font color="#CCCCCC"> of</font>

109
00:06:15,150 --> 00:06:23,359
<font color="#E5E5E5">some things and if that maintainer</font>

110
00:06:17,370 --> 00:06:30,479
<font color="#E5E5E5">leaves like with imx6</font><font color="#CCCCCC"> that code dies and</font>

111
00:06:23,360 --> 00:06:33,150
just no one's there to<font color="#CCCCCC"> save it</font><font color="#E5E5E5"> so this</font>

112
00:06:30,479 --> 00:06:35,639
<font color="#E5E5E5">is a just a this is</font><font color="#CCCCCC"> actually a bit of an</font>

113
00:06:33,150 --> 00:06:37,130
old photo<font color="#CCCCCC"> now though all</font><font color="#E5E5E5"> that all the</font>

114
00:06:35,639 --> 00:06:40,880
<font color="#CCCCCC">boards that</font><font color="#E5E5E5"> I kind of have I've</font>

115
00:06:37,130 --> 00:06:45,719
accumulated quite a few since this but I

116
00:06:40,880 --> 00:06:51,659
mean supporting each single<font color="#E5E5E5"> board is</font>

117
00:06:45,720 --> 00:06:55,440
very difficult to cross compile<font color="#E5E5E5"> for each</font>

118
00:06:51,660 --> 00:06:59,550
board<font color="#E5E5E5"> takes a lot of time to burn it</font><font color="#CCCCCC"> to</font>

119
00:06:55,440 --> 00:07:03,240
a SD<font color="#CCCCCC"> card</font><font color="#E5E5E5"> and run it and on each board</font>

120
00:06:59,550 --> 00:07:06,139
takes a lot of<font color="#E5E5E5"> time so what we want to</font>

121
00:07:03,240 --> 00:07:11,099
<font color="#CCCCCC">do is try and</font><font color="#E5E5E5"> implement a way where we</font>

122
00:07:06,139 --> 00:07:17,250
<font color="#CCCCCC">have a single code path basically</font><font color="#E5E5E5"> for</font>

123
00:07:11,099 --> 00:07:19,940
use on all the different<font color="#E5E5E5"> boards so this</font>

124
00:07:17,250 --> 00:07:25,199
was platform-specific code for imx6 this

125
00:07:19,940 --> 00:07:29,520
<font color="#CCCCCC">disc was ripped out bear in mind these</font>

126
00:07:25,199 --> 00:07:31,650
are<font color="#E5E5E5"> just simple metrics they include the</font>

127
00:07:29,520 --> 00:07:34,590
<font color="#E5E5E5">header files and stuff too but I mean</font>

128
00:07:31,650 --> 00:07:37,169
<font color="#E5E5E5">3700 lines of platform-specific specific</font>

129
00:07:34,590 --> 00:07:42,210
code on a on a board that<font color="#CCCCCC"> maybe a</font>

130
00:07:37,169 --> 00:07:43,599
hundred<font color="#E5E5E5"> people ran Cody on is was it</font>

131
00:07:42,210 --> 00:07:45,969
wasn't<font color="#CCCCCC"> great in</font><font color="#E5E5E5"> our opinions</font>

132
00:07:43,600 --> 00:07:46,840
so we really needed to<font color="#E5E5E5"> look</font><font color="#CCCCCC"> in other</font>

133
00:07:45,970 --> 00:07:48,940
methods

134
00:07:46,840 --> 00:07:51,010
I mean<font color="#CCCCCC"> Raspberry Pi</font><font color="#E5E5E5"> is even worse</font><font color="#CCCCCC"> than</font>

135
00:07:48,940 --> 00:07:53,560
this<font color="#E5E5E5"> but there's nothing we can really</font>

136
00:07:51,010 --> 00:07:58,870
do for<font color="#CCCCCC"> that at the moment and I'll kind</font>

137
00:07:53,560 --> 00:08:00,280
of talk<font color="#E5E5E5"> about that later</font><font color="#CCCCCC"> but yeah</font><font color="#E5E5E5"> this</font>

138
00:07:58,870 --> 00:08:02,230
<font color="#CCCCCC">is just a rough</font><font color="#E5E5E5"> example keep that in</font>

139
00:08:00,280 --> 00:08:05,369
mind<font color="#E5E5E5"> I have some other stuff coming up</font>

140
00:08:02,230 --> 00:08:09,700
as well<font color="#CCCCCC"> for for where we're going so</font>

141
00:08:05,370 --> 00:08:12,700
just<font color="#CCCCCC"> an</font><font color="#E5E5E5"> overview</font><font color="#CCCCCC"> of kind of some of this</font>

142
00:08:09,700 --> 00:08:17,860
<font color="#CCCCCC">stuff that</font><font color="#E5E5E5"> I'll be covering</font><font color="#CCCCCC"> at how we</font>

143
00:08:12,700 --> 00:08:21,070
<font color="#CCCCCC">solved this reusing DRM I'll briefly</font>

144
00:08:17,860 --> 00:08:23,020
talk<font color="#E5E5E5"> about ffmpeg and how some of</font><font color="#CCCCCC"> the</font>

145
00:08:21,070 --> 00:08:25,840
<font color="#E5E5E5">dacotahs support there</font><font color="#CCCCCC"> helps us a lot</font>

146
00:08:23,020 --> 00:08:29,260
and then we we have this new<font color="#E5E5E5"> thing</font>

147
00:08:25,840 --> 00:08:31,030
<font color="#E5E5E5">called DRM prime is the new rendering</font>

148
00:08:29,260 --> 00:08:34,299
method we use across<font color="#E5E5E5"> some of these new</font>

149
00:08:31,030 --> 00:08:39,130
boards so it's all<font color="#E5E5E5"> pretty exciting stuff</font>

150
00:08:34,299 --> 00:08:41,130
it's all<font color="#E5E5E5"> really new</font><font color="#CCCCCC"> stuff and I actually</font>

151
00:08:39,130 --> 00:08:44,950
hope this<font color="#CCCCCC"> maybe helps some other</font>

152
00:08:41,130 --> 00:08:47,020
applications<font color="#CCCCCC"> figure out how to</font><font color="#E5E5E5"> implement</font>

153
00:08:44,950 --> 00:08:48,550
some<font color="#E5E5E5"> of this stuff because when it's</font>

154
00:08:47,020 --> 00:08:50,230
<font color="#CCCCCC">brand new technology</font><font color="#E5E5E5"> sometimes it's</font>

155
00:08:48,550 --> 00:08:52,990
<font color="#E5E5E5">really</font><font color="#CCCCCC"> difficult to figure it out</font><font color="#E5E5E5"> on</font>

156
00:08:50,230 --> 00:08:55,600
your<font color="#CCCCCC"> own and I have a quite a crew of</font>

157
00:08:52,990 --> 00:08:57,460
<font color="#E5E5E5">guys that</font><font color="#CCCCCC"> are all kind of</font><font color="#E5E5E5"> working on</font>

158
00:08:55,600 --> 00:09:03,250
<font color="#CCCCCC">this with me in various different areas</font>

159
00:08:57,460 --> 00:09:07,990
<font color="#E5E5E5">so but some people might not so so DRM</font>

160
00:09:03,250 --> 00:09:13,630
and kms<font color="#CCCCCC"> grms the display subsystem in in</font>

161
00:09:07,990 --> 00:09:19,540
the<font color="#E5E5E5"> Linux kernel</font><font color="#CCCCCC"> it's still sort of</font>

162
00:09:13,630 --> 00:09:23,350
<font color="#E5E5E5">relatively new but most main</font><font color="#CCCCCC"> graphic</font>

163
00:09:19,540 --> 00:09:27,270
<font color="#E5E5E5">systems have a upstream drm driver which</font>

164
00:09:23,350 --> 00:09:29,590
<font color="#E5E5E5">is fantastic</font><font color="#CCCCCC"> so now in kodi</font><font color="#E5E5E5"> any</font>

165
00:09:27,270 --> 00:09:33,040
<font color="#E5E5E5">basically any board that has a drm</font>

166
00:09:29,590 --> 00:09:36,550
driver<font color="#E5E5E5"> can can run</font><font color="#CCCCCC"> Kodi</font><font color="#E5E5E5"> which is awesome</font>

167
00:09:33,040 --> 00:09:38,520
<font color="#E5E5E5">and I mean most people</font><font color="#CCCCCC"> think of the</font><font color="#E5E5E5"> DRM</font>

168
00:09:36,550 --> 00:09:41,530
subsystem on all the big the big

169
00:09:38,520 --> 00:09:45,069
graphics platforms like Intel<font color="#CCCCCC"> and NVIDIA</font>

170
00:09:41,530 --> 00:09:49,709
and<font color="#E5E5E5"> AMD and stuff</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> there's so many</font>

171
00:09:45,070 --> 00:09:53,920
<font color="#E5E5E5">more as well</font><font color="#CCCCCC"> this dragon board runs on</font>

172
00:09:49,710 --> 00:09:55,870
the MSM kernel driver<font color="#CCCCCC"> it has an Adreno</font>

173
00:09:53,920 --> 00:09:56,699
chipset in it

174
00:09:55,870 --> 00:09:59,580
it's

175
00:09:56,700 --> 00:10:03,090
really fantastic<font color="#E5E5E5"> raspberry-pi recently</font>

176
00:09:59,580 --> 00:10:07,640
gained<font color="#E5E5E5"> a drm driver</font><font color="#CCCCCC"> we currently can't</font>

177
00:10:03,090 --> 00:10:11,490
use it<font color="#E5E5E5"> because</font><font color="#CCCCCC"> of reasons I'll get</font><font color="#E5E5E5"> into</font>

178
00:10:07,640 --> 00:10:14,790
imx6<font color="#E5E5E5"> says it</font><font color="#CCCCCC"> drm driver and hopefully</font>

179
00:10:11,490 --> 00:10:19,110
the upcoming<font color="#CCCCCC"> high mx8 will soon to all</font>

180
00:10:14,790 --> 00:10:21,750
winner is<font color="#E5E5E5"> varying levels of</font><font color="#CCCCCC"> support</font>

181
00:10:19,110 --> 00:10:25,710
once the h3<font color="#E5E5E5"> drm driver emerges that</font>

182
00:10:21,750 --> 00:10:29,580
would be really<font color="#E5E5E5"> fantastic and</font><font color="#CCCCCC"> Rockchip i</font>

183
00:10:25,710 --> 00:10:31,590
believe<font color="#E5E5E5"> its upstream</font><font color="#CCCCCC"> but there's still</font><font color="#E5E5E5"> a</font>

184
00:10:29,580 --> 00:10:34,890
lot of stuff lacking in the upstream

185
00:10:31,590 --> 00:10:36,480
rocks<font color="#E5E5E5"> rock trip stuff but rock</font><font color="#CCCCCC"> ship's</font>

186
00:10:34,890 --> 00:10:38,160
board<font color="#CCCCCC"> Support Package is</font><font color="#E5E5E5"> based on four</font>

187
00:10:36,480 --> 00:10:42,810
point four so it's<font color="#E5E5E5"> not really that hold</font>

188
00:10:38,160 --> 00:10:46,650
<font color="#E5E5E5">yep so I'm I'm</font><font color="#CCCCCC"> mainly focusing on all</font>

189
00:10:42,810 --> 00:10:50,069
<font color="#E5E5E5">the embedded platforms</font><font color="#CCCCCC"> I've</font><font color="#E5E5E5"> tested it on</font>

190
00:10:46,650 --> 00:10:54,300
all these<font color="#CCCCCC"> platforms and including AMD</font>

191
00:10:50,070 --> 00:10:56,010
and Intel and it can run<font color="#E5E5E5"> I mean</font><font color="#CCCCCC"> I'm</font>

192
00:10:54,300 --> 00:10:59,370
really relatively<font color="#E5E5E5"> new to</font><font color="#CCCCCC"> this scene</font>

193
00:10:56,010 --> 00:11:02,010
anyway<font color="#E5E5E5"> I've only been</font><font color="#CCCCCC"> working on this</font>

194
00:10:59,370 --> 00:11:04,530
stuff for<font color="#E5E5E5"> less than a year</font><font color="#CCCCCC"> now</font>

195
00:11:02,010 --> 00:11:06,480
I attended the<font color="#CCCCCC"> embedded Linux conference</font>

196
00:11:04,530 --> 00:11:08,880
last year<font color="#CCCCCC"> in Portland</font>

197
00:11:06,480 --> 00:11:11,070
I met<font color="#E5E5E5"> mark</font><font color="#CCCCCC"> Jaynes there</font><font color="#E5E5E5"> who gave a</font>

198
00:11:08,880 --> 00:11:13,200
presentation earlier<font color="#E5E5E5"> today and he</font>

199
00:11:11,070 --> 00:11:17,460
<font color="#E5E5E5">basically asked me why Cody doesn't run</font>

200
00:11:13,200 --> 00:11:18,840
on the frame buffer on DRM and I really

201
00:11:17,460 --> 00:11:23,430
didn't have<font color="#E5E5E5"> an</font><font color="#CCCCCC"> answer for him</font><font color="#E5E5E5"> at the</font>

202
00:11:18,840 --> 00:11:26,700
<font color="#E5E5E5">time so I went home</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> looked into it</font>

203
00:11:23,430 --> 00:11:29,430
and wrote the DRM framework for Cody and

204
00:11:26,700 --> 00:11:31,320
and that's where we<font color="#CCCCCC"> are so if you have</font>

205
00:11:29,430 --> 00:11:32,849
<font color="#E5E5E5">more</font><font color="#CCCCCC"> interest in like learning</font><font color="#E5E5E5"> about it</font>

206
00:11:31,320 --> 00:11:37,110
<font color="#CCCCCC">in</font><font color="#E5E5E5"> general there's tons of stuff out</font>

207
00:11:32,850 --> 00:11:40,890
<font color="#E5E5E5">there this one linked presentation by</font>

208
00:11:37,110 --> 00:11:45,200
Boris<font color="#CCCCCC"> Breslin is really fantastic that's</font>

209
00:11:40,890 --> 00:11:49,470
where this photo is from<font color="#E5E5E5"> as well so yeah</font>

210
00:11:45,200 --> 00:11:54,060
so the implementation<font color="#CCCCCC"> for</font><font color="#E5E5E5"> DRM kms is</font>

211
00:11:49,470 --> 00:11:56,390
about<font color="#E5E5E5"> twenty five</font><font color="#CCCCCC"> hundred</font><font color="#E5E5E5"> lines</font><font color="#CCCCCC"> this is</font>

212
00:11:54,060 --> 00:11:58,979
just the windowing<font color="#E5E5E5"> in general the</font>

213
00:11:56,390 --> 00:12:02,400
doesn't include decoding or rendering

214
00:11:58,980 --> 00:12:04,710
<font color="#CCCCCC">yet but 2500 lines to run on all these</font>

215
00:12:02,400 --> 00:12:07,020
different<font color="#E5E5E5"> platforms is pretty great</font>

216
00:12:04,710 --> 00:12:10,350
it's there's no<font color="#CCCCCC"> platform specific code</font>

217
00:12:07,020 --> 00:12:13,079
in there<font color="#CCCCCC"> it's designed</font><font color="#E5E5E5"> to run on</font>

218
00:12:10,350 --> 00:12:15,780
all the<font color="#CCCCCC"> platforms there are some</font><font color="#E5E5E5"> quirks</font>

219
00:12:13,080 --> 00:12:20,340
between platforms<font color="#E5E5E5"> which I'll talk about</font>

220
00:12:15,780 --> 00:12:22,439
a bit<font color="#E5E5E5"> later but really</font><font color="#CCCCCC"> it's general</font>

221
00:12:20,340 --> 00:12:28,920
enough that it can run so which is

222
00:12:22,440 --> 00:12:31,380
<font color="#E5E5E5">really exciting</font><font color="#CCCCCC"> so then we get into</font>

223
00:12:28,920 --> 00:12:35,880
<font color="#CCCCCC">video decoding and and rendering which</font>

224
00:12:31,380 --> 00:12:41,189
is a huge issue<font color="#CCCCCC"> again in the past</font><font color="#E5E5E5"> all</font>

225
00:12:35,880 --> 00:12:46,470
the video decoding on on these chipsets

226
00:12:41,190 --> 00:12:50,280
<font color="#E5E5E5">are somehow using</font><font color="#CCCCCC"> binary blob</font><font color="#E5E5E5"> that does</font>

227
00:12:46,470 --> 00:12:51,810
some magic<font color="#CCCCCC"> and then gives us a decoded</font>

228
00:12:50,280 --> 00:12:53,150
frame after<font color="#E5E5E5"> and we have to do something</font>

229
00:12:51,810 --> 00:12:55,949
<font color="#E5E5E5">with it</font>

230
00:12:53,150 --> 00:12:59,939
it's very<font color="#CCCCCC"> board specific it's not very</font>

231
00:12:55,950 --> 00:13:00,450
nice<font color="#CCCCCC"> to work with so what can</font><font color="#E5E5E5"> we do</font>

232
00:12:59,940 --> 00:13:03,750
about that

233
00:13:00,450 --> 00:13:07,950
<font color="#CCCCCC">and there's there's a couple of things</font>

234
00:13:03,750 --> 00:13:10,020
actually<font color="#CCCCCC"> mainland main thing I'll talk</font>

235
00:13:07,950 --> 00:13:12,960
<font color="#E5E5E5">be talking about is the video for</font><font color="#CCCCCC"> linux</font>

236
00:13:10,020 --> 00:13:17,220
<font color="#CCCCCC">to</font><font color="#E5E5E5"> subsystem in the linux kernel which</font>

237
00:13:12,960 --> 00:13:20,400
is<font color="#E5E5E5"> designed to do this it's allows</font>

238
00:13:17,220 --> 00:13:22,470
access to<font color="#CCCCCC"> the hardware video decoders on</font>

239
00:13:20,400 --> 00:13:24,449
the board if there's a driver<font color="#E5E5E5"> a video</font>

240
00:13:22,470 --> 00:13:28,770
for linux<font color="#CCCCCC"> 2 driver</font><font color="#E5E5E5"> available</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> that</font>

241
00:13:24,450 --> 00:13:29,310
board<font color="#CCCCCC"> which there is actually quite a</font>

242
00:13:28,770 --> 00:13:33,290
<font color="#E5E5E5">lot</font>

243
00:13:29,310 --> 00:13:37,199
the imx6 drivers there this the<font color="#CCCCCC"> Qualcomm</font>

244
00:13:33,290 --> 00:13:42,209
<font color="#CCCCCC">Venis drivers already upstream mediatek</font>

245
00:13:37,200 --> 00:13:44,730
has one I<font color="#E5E5E5"> think high silicon has one</font><font color="#CCCCCC"> and</font>

246
00:13:42,210 --> 00:13:47,070
then all<font color="#E5E5E5"> winners is in the works but</font>

247
00:13:44,730 --> 00:13:51,570
there's some<font color="#E5E5E5"> kind of flux</font><font color="#CCCCCC"> in the fee for</font>

248
00:13:47,070 --> 00:13:53,400
<font color="#E5E5E5">l2 subsystem right now so so the main</font>

249
00:13:51,570 --> 00:13:58,230
issue<font color="#CCCCCC"> is is on all these embedded</font>

250
00:13:53,400 --> 00:14:02,990
<font color="#CCCCCC">low-power platforms how can we take</font><font color="#E5E5E5"> a</font>

251
00:13:58,230 --> 00:14:05,700
decoded frame and send it to<font color="#E5E5E5"> the</font><font color="#CCCCCC"> scanner</font>

252
00:14:02,990 --> 00:14:08,400
<font color="#CCCCCC">without copying to get maximum</font>

253
00:14:05,700 --> 00:14:10,200
performance<font color="#CCCCCC"> because that's the main</font>

254
00:14:08,400 --> 00:14:12,660
thing we're<font color="#CCCCCC"> looking for on these low</font>

255
00:14:10,200 --> 00:14:16,230
power systems on<font color="#E5E5E5"> your on your i7 at home</font>

256
00:14:12,660 --> 00:14:18,510
it<font color="#CCCCCC"> really doesn't matter but on a little</font>

257
00:14:16,230 --> 00:14:21,440
Raspberry Pi<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> single core Raspberry</font>

258
00:14:18,510 --> 00:14:21,439
Pi it's a huge thing

259
00:14:21,980 --> 00:14:28,810
<font color="#CCCCCC">hmm so the DRM system actually</font><font color="#E5E5E5"> allows</font><font color="#CCCCCC"> us</font>

260
00:14:26,030 --> 00:14:34,730
<font color="#E5E5E5">to do this in a really interesting way</font>

261
00:14:28,810 --> 00:14:37,430
<font color="#CCCCCC">this is a this is</font><font color="#E5E5E5"> the decoder and</font>

262
00:14:34,730 --> 00:14:42,770
renderer<font color="#E5E5E5"> that we wrote in Cody with help</font>

263
00:14:37,430 --> 00:14:45,770
<font color="#E5E5E5">by Jonas in the crowd there it's 750</font>

264
00:14:42,770 --> 00:14:49,310
lines<font color="#E5E5E5"> total code</font><font color="#CCCCCC"> I don't really expect</font>

265
00:14:45,770 --> 00:14:51,770
<font color="#E5E5E5">it to get much bigger than</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> until a</font>

266
00:14:49,310 --> 00:14:56,569
little<font color="#E5E5E5"> bit</font><font color="#CCCCCC"> in the</font><font color="#E5E5E5"> future when HDR stuff</font>

267
00:14:51,770 --> 00:14:58,400
is kind of<font color="#E5E5E5"> calmed down but that that's</font>

268
00:14:56,570 --> 00:15:00,800
all<font color="#E5E5E5"> we need and the nice thing</font><font color="#CCCCCC"> about</font>

269
00:14:58,400 --> 00:15:05,240
this as well as it<font color="#CCCCCC"> is platform agnostic</font>

270
00:15:00,800 --> 00:15:07,670
<font color="#CCCCCC">all the work is off put into ffmpeg to</font>

271
00:15:05,240 --> 00:15:10,250
juice<font color="#E5E5E5"> do some of the</font><font color="#CCCCCC"> heavy lifting for</font>

272
00:15:07,670 --> 00:15:14,689
us<font color="#E5E5E5"> and to deal</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> some</font><font color="#CCCCCC"> of the little</font>

273
00:15:10,250 --> 00:15:18,050
bits of platform stuff that<font color="#CCCCCC"> that we need</font>

274
00:15:14,690 --> 00:15:19,580
<font color="#E5E5E5">to do so just uh the code really doesn't</font>

275
00:15:18,050 --> 00:15:21,380
there's a few areas<font color="#E5E5E5"> here where</font><font color="#CCCCCC"> I have</font>

276
00:15:19,580 --> 00:15:24,530
code on the screen<font color="#E5E5E5"> it's not really a big</font>

277
00:15:21,380 --> 00:15:26,840
deal<font color="#CCCCCC"> it's really just filler it's hard</font>

278
00:15:24,530 --> 00:15:28,939
<font color="#E5E5E5">to take code out of context</font><font color="#CCCCCC"> and</font>

279
00:15:26,840 --> 00:15:31,430
understand what it means but this is an

280
00:15:28,940 --> 00:15:36,020
important part of ffmpeg this has been

281
00:15:31,430 --> 00:15:39,920
in in ffmpeg master for I<font color="#E5E5E5"> think only</font>

282
00:15:36,020 --> 00:15:43,699
<font color="#E5E5E5">about four or five months now</font><font color="#CCCCCC"> and this</font>

283
00:15:39,920 --> 00:15:51,010
is a big part of what we use so what

284
00:15:43,700 --> 00:15:54,530
happens is we<font color="#E5E5E5"> basically will be getting</font>

285
00:15:51,010 --> 00:15:58,120
something back from ffmpeg<font color="#E5E5E5"> as I show</font>

286
00:15:54,530 --> 00:16:02,089
<font color="#E5E5E5">here</font><font color="#CCCCCC"> we take a frame send it to ffmpeg</font>

287
00:15:58,120 --> 00:16:05,300
<font color="#E5E5E5">the specific decoder in ffmpeg decodes</font>

288
00:16:02,090 --> 00:16:11,560
that<font color="#E5E5E5"> frame either using v4</font><font color="#CCCCCC"> l2 or in the</font>

289
00:16:05,300 --> 00:16:14,180
case of<font color="#CCCCCC"> Rockchip</font><font color="#E5E5E5"> its</font><font color="#CCCCCC"> RK MPP and then</font>

290
00:16:11,560 --> 00:16:20,589
<font color="#E5E5E5">we're requesting a certain pixel format</font>

291
00:16:14,180 --> 00:16:26,120
back from ffmpeg<font color="#CCCCCC"> and using</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> AV</font><font color="#E5E5E5"> DRM</font>

292
00:16:20,590 --> 00:16:28,160
<font color="#E5E5E5">frame descriptor we get back</font><font color="#CCCCCC"> ffmpeg puts</font>

293
00:16:26,120 --> 00:16:29,990
the decoded frame<font color="#E5E5E5"> in a in a memory</font>

294
00:16:28,160 --> 00:16:33,020
<font color="#E5E5E5">buffer and it stays in</font><font color="#CCCCCC"> that memory</font>

295
00:16:29,990 --> 00:16:35,600
buffer for good so what we<font color="#E5E5E5"> actually get</font>

296
00:16:33,020 --> 00:16:37,759
back from ffmpeg<font color="#E5E5E5"> is this a</font><font color="#CCCCCC"> vdr</font><font color="#E5E5E5"> M frame</font>

297
00:16:35,600 --> 00:16:40,670
<font color="#CCCCCC">descriptor which contains file</font>

298
00:16:37,759 --> 00:16:43,430
descriptor for the memory location of

299
00:16:40,670 --> 00:16:45,349
the decoded frame and just<font color="#CCCCCC"> some</font><font color="#E5E5E5"> other</font>

300
00:16:43,430 --> 00:16:49,550
information<font color="#E5E5E5"> about that frame like the</font>

301
00:16:45,350 --> 00:16:55,519
size and the pixel format and and

302
00:16:49,550 --> 00:17:00,189
whatnot<font color="#CCCCCC"> so we get we</font><font color="#E5E5E5"> get these two these</font>

303
00:16:55,519 --> 00:17:03,709
<font color="#CCCCCC">two things back what we do with this is</font>

304
00:17:00,190 --> 00:17:07,400
is<font color="#CCCCCC"> really interesting</font><font color="#E5E5E5"> so we get the</font>

305
00:17:03,709 --> 00:17:10,369
frame back<font color="#E5E5E5"> we we can unpack this sort of</font>

306
00:17:07,400 --> 00:17:14,630
container<font color="#E5E5E5"> that</font><font color="#CCCCCC"> is a VDD RM frame of</font>

307
00:17:10,369 --> 00:17:20,239
<font color="#E5E5E5">scripture and and use it and what we do</font>

308
00:17:14,630 --> 00:17:27,289
is we<font color="#E5E5E5"> typically in in ffmpeg we get back</font>

309
00:17:20,240 --> 00:17:29,450
<font color="#CCCCCC">a frame in the enve 12</font><font color="#E5E5E5"> pixel format</font><font color="#CCCCCC"> v4l</font>

310
00:17:27,289 --> 00:17:32,480
<font color="#E5E5E5">to does support some other ones but NB</font>

311
00:17:29,450 --> 00:17:34,340
<font color="#E5E5E5">12 is kind of what we're using now</font><font color="#CCCCCC"> and</font>

312
00:17:32,480 --> 00:17:38,809
what's unique<font color="#E5E5E5"> about all these embedded</font>

313
00:17:34,340 --> 00:17:43,520
<font color="#E5E5E5">platforms</font><font color="#CCCCCC"> is that they're designed to</font>

314
00:17:38,809 --> 00:17:46,970
<font color="#E5E5E5">use with these certain pixel formats so</font>

315
00:17:43,520 --> 00:17:50,539
you can send it directly<font color="#CCCCCC"> to a plane</font>

316
00:17:46,970 --> 00:17:53,210
<font color="#E5E5E5">itself and and be shown on the plane</font>

317
00:17:50,539 --> 00:17:55,789
<font color="#E5E5E5">so all these embedded platforms support</font>

318
00:17:53,210 --> 00:18:04,970
and b12<font color="#CCCCCC"> in their in their output planes</font>

319
00:17:55,789 --> 00:18:07,700
<font color="#E5E5E5">and what we do is we get we get the</font>

320
00:18:04,970 --> 00:18:09,289
handle basically from from the file

321
00:18:07,700 --> 00:18:12,409
descriptor from their memory buffer and

322
00:18:09,289 --> 00:18:14,809
then and then we add add the frame

323
00:18:12,409 --> 00:18:16,460
buffer<font color="#E5E5E5"> to it this this is kind of the</font>

324
00:18:14,809 --> 00:18:19,490
same thing you would do with regular

325
00:18:16,460 --> 00:18:22,880
<font color="#CCCCCC">OpenGL stuff as well but we</font><font color="#E5E5E5"> we're taking</font>

326
00:18:19,490 --> 00:18:25,549
the direct region<font color="#E5E5E5"> in there the frame</font>

327
00:18:22,880 --> 00:18:28,130
from<font color="#CCCCCC"> the rec region in the memory taxes</font>

328
00:18:25,549 --> 00:18:30,200
it<font color="#E5E5E5"> so once we add the frame buffer</font><font color="#CCCCCC"> we</font>

329
00:18:28,130 --> 00:18:32,240
get a frame buffer ID and then we can

330
00:18:30,200 --> 00:18:32,799
let the<font color="#E5E5E5"> DRM subsystem do all the work</font>

331
00:18:32,240 --> 00:18:35,780
<font color="#CCCCCC">for us</font>

332
00:18:32,799 --> 00:18:39,770
we passed the frame buffer ID into<font color="#E5E5E5"> an</font>

333
00:18:35,780 --> 00:18:41,678
atomic mode set it<font color="#CCCCCC"> just includes some</font>

334
00:18:39,770 --> 00:18:43,879
properties the width and<font color="#E5E5E5"> height</font><font color="#CCCCCC"> and</font>

335
00:18:41,679 --> 00:18:49,040
location of<font color="#E5E5E5"> the frame where</font><font color="#CCCCCC"> it should</font><font color="#E5E5E5"> be</font>

336
00:18:43,880 --> 00:18:49,440
<font color="#E5E5E5">displayed</font><font color="#CCCCCC"> and and and then we just do</font>

337
00:18:49,040 --> 00:18:53,158
the

338
00:18:49,440 --> 00:18:55,440
commit<font color="#CCCCCC"> and this is</font><font color="#E5E5E5"> really nice</font>

339
00:18:53,159 --> 00:18:59,059
<font color="#CCCCCC">yeah it it's it's actually</font><font color="#E5E5E5"> a very simple</font>

340
00:18:55,440 --> 00:19:04,889
process<font color="#CCCCCC"> as he saw it was 750 lines of</font>

341
00:18:59,059 --> 00:19:10,799
code to<font color="#CCCCCC"> do this and it makes it makes</font>

342
00:19:04,889 --> 00:19:13,019
<font color="#E5E5E5">our life really</font><font color="#CCCCCC"> easy this is what I'm</font>

343
00:19:10,799 --> 00:19:15,000
talking about with<font color="#E5E5E5"> planes hmm this is a</font>

344
00:19:13,019 --> 00:19:18,720
sample output<font color="#E5E5E5"> from the dragon board</font>

345
00:19:15,000 --> 00:19:22,370
using the mode mode test utility<font color="#E5E5E5"> that's</font>

346
00:19:18,720 --> 00:19:25,679
in the lead<font color="#CCCCCC"> Lib DRM</font><font color="#E5E5E5"> test suite and</font>

347
00:19:22,370 --> 00:19:29,459
<font color="#E5E5E5">there's a lot of different pixel formats</font>

348
00:19:25,679 --> 00:19:32,840
there that the planes<font color="#E5E5E5"> support so the</font>

349
00:19:29,460 --> 00:19:38,879
next thing we come across<font color="#E5E5E5"> is how do we</font>

350
00:19:32,840 --> 00:19:42,658
support<font color="#CCCCCC"> multiple planes</font><font color="#E5E5E5"> and do the</font>

351
00:19:38,879 --> 00:19:44,850
compositing for it<font color="#CCCCCC"> but in the DRM</font>

352
00:19:42,659 --> 00:19:47,129
subsystem<font color="#E5E5E5"> that it does that</font><font color="#CCCCCC"> for us we</font>

353
00:19:44,850 --> 00:19:50,908
just<font color="#E5E5E5"> have</font><font color="#CCCCCC"> to set</font><font color="#E5E5E5"> the planes ourselves so</font>

354
00:19:47,129 --> 00:19:56,759
in the<font color="#CCCCCC"> -</font><font color="#E5E5E5"> in the example here the top</font>

355
00:19:50,909 --> 00:19:58,769
plane<font color="#E5E5E5"> is is a type 1 which means is a</font>

356
00:19:56,759 --> 00:20:01,340
primary plane and then the bottom one<font color="#CCCCCC"> is</font>

357
00:19:58,769 --> 00:20:03,690
<font color="#CCCCCC">the type</font><font color="#E5E5E5"> 0 which is an overlay plane and</font>

358
00:20:01,340 --> 00:20:05,789
there's actually a type 2 which is a

359
00:20:03,690 --> 00:20:10,799
<font color="#E5E5E5">hardware cursor but we don't use</font><font color="#CCCCCC"> that at</font>

360
00:20:05,789 --> 00:20:18,179
all so both these planes support<font color="#E5E5E5"> NB 12</font>

361
00:20:10,799 --> 00:20:19,740
as well<font color="#CCCCCC"> as a ton of other</font><font color="#E5E5E5"> modes</font><font color="#CCCCCC"> and so</font>

362
00:20:18,179 --> 00:20:27,389
we use<font color="#E5E5E5"> these two planes to our advantage</font>

363
00:20:19,740 --> 00:20:29,240
<font color="#E5E5E5">i I made these these graphics I took me</font>

364
00:20:27,389 --> 00:20:33,209
a bit<font color="#CCCCCC"> of</font><font color="#E5E5E5"> time</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> don't</font><font color="#CCCCCC"> really do much</font><font color="#E5E5E5"> for</font>

365
00:20:29,240 --> 00:20:39,090
in<font color="#CCCCCC"> GIMP</font><font color="#E5E5E5"> anymore but I was really</font><font color="#CCCCCC"> happy</font>

366
00:20:33,210 --> 00:20:43,379
with<font color="#E5E5E5"> that</font><font color="#CCCCCC"> so what we actually do in Cody</font>

367
00:20:39,090 --> 00:20:46,740
<font color="#E5E5E5">now is we get a we get a frame and we</font>

368
00:20:43,379 --> 00:20:49,769
pass it to the plane for for video

369
00:20:46,740 --> 00:20:51,570
playback<font color="#E5E5E5"> and the video playback really</font>

370
00:20:49,769 --> 00:20:52,860
wants to be in<font color="#CCCCCC"> the primary</font><font color="#E5E5E5"> plane and we</font>

371
00:20:51,570 --> 00:20:55,139
want to do this because<font color="#E5E5E5"> the overlay</font>

372
00:20:52,860 --> 00:20:59,340
plane is made to<font color="#CCCCCC"> be in front</font><font color="#E5E5E5"> of the</font>

373
00:20:55,139 --> 00:21:02,399
primary plane and so<font color="#E5E5E5"> we put the Cody GUI</font>

374
00:20:59,340 --> 00:21:05,970
into the overlay plane

375
00:21:02,400 --> 00:21:08,130
and and then the DRM system and the

376
00:21:05,970 --> 00:21:10,260
hardware<font color="#E5E5E5"> composites it and</font><font color="#CCCCCC"> outputs it</font>

377
00:21:08,130 --> 00:21:12,030
<font color="#CCCCCC">together so in both</font><font color="#E5E5E5"> of these there's a</font>

378
00:21:10,260 --> 00:21:14,610
one with the black frame that's just a

379
00:21:12,030 --> 00:21:18,620
hard the hardware cursor frame which we

380
00:21:14,610 --> 00:21:21,000
don't use it's just<font color="#E5E5E5"> there to</font><font color="#CCCCCC"> represent</font>

381
00:21:18,620 --> 00:21:26,399
<font color="#E5E5E5">but in the first example with video</font>

382
00:21:21,000 --> 00:21:28,580
playback<font color="#E5E5E5"> we show that Cody the Cody GUI</font>

383
00:21:26,400 --> 00:21:32,370
is actually shifted to the overlay

384
00:21:28,580 --> 00:21:36,330
overlay plane<font color="#CCCCCC"> while the video is playing</font>

385
00:21:32,370 --> 00:21:38,189
back in the in the primary plane<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is</font>

386
00:21:36,330 --> 00:21:41,129
<font color="#CCCCCC">a this is what it kind</font><font color="#E5E5E5"> of allows us to</font>

387
00:21:38,190 --> 00:21:42,810
have such great performance when the

388
00:21:41,130 --> 00:21:46,530
<font color="#E5E5E5">Cody</font><font color="#CCCCCC"> Gy isn't shown at all</font><font color="#E5E5E5"> we can</font>

389
00:21:42,810 --> 00:21:48,000
<font color="#E5E5E5">completely disable the plane</font><font color="#CCCCCC"> so you</font><font color="#E5E5E5"> it's</font>

390
00:21:46,530 --> 00:21:51,870
rendering nothing so we might as well

391
00:21:48,000 --> 00:21:54,200
<font color="#E5E5E5">just disable it completely</font><font color="#CCCCCC"> and then once</font>

392
00:21:51,870 --> 00:21:57,239
the video stops we<font color="#CCCCCC"> can actually</font><font color="#E5E5E5"> shift</font>

393
00:21:54,200 --> 00:22:00,330
<font color="#CCCCCC">Cody GUI from the overlay back to the</font>

394
00:21:57,240 --> 00:22:03,260
primary plane<font color="#E5E5E5"> and I actually</font><font color="#CCCCCC"> just need</font>

395
00:22:00,330 --> 00:22:05,159
<font color="#E5E5E5">to do that because of there's certain</font>

396
00:22:03,260 --> 00:22:06,990
transparency issues and things<font color="#E5E5E5"> that</font>

397
00:22:05,160 --> 00:22:16,020
happen when<font color="#E5E5E5"> you leave it in the overlay</font>

398
00:22:06,990 --> 00:22:18,750
plane so this<font color="#CCCCCC"> all this</font><font color="#E5E5E5"> all happens in a</font>

399
00:22:16,020 --> 00:22:20,730
<font color="#CCCCCC">single atomic commit that's</font><font color="#E5E5E5"> what's</font>

400
00:22:18,750 --> 00:22:22,770
really convenient<font color="#CCCCCC"> about doing it</font><font color="#E5E5E5"> there</font>

401
00:22:20,730 --> 00:22:25,020
is actually a<font color="#E5E5E5"> atomic attribute called</font>

402
00:22:22,770 --> 00:22:29,129
<font color="#CCCCCC">Zed position but it's not widely</font>

403
00:22:25,020 --> 00:22:31,440
supported<font color="#E5E5E5"> in the mainline kernel</font><font color="#CCCCCC"> it</font>

404
00:22:29,130 --> 00:22:34,320
<font color="#E5E5E5">actually tells the hardware to do the</font>

405
00:22:31,440 --> 00:22:38,340
compa<font color="#E5E5E5"> composition to move the planes</font>

406
00:22:34,320 --> 00:22:39,780
around<font color="#E5E5E5"> manually but we don't want to</font>

407
00:22:38,340 --> 00:22:42,959
really support something that's not

408
00:22:39,780 --> 00:22:44,850
there<font color="#E5E5E5"> for every</font><font color="#CCCCCC"> platform yet so we do</font><font color="#E5E5E5"> it</font>

409
00:22:42,960 --> 00:22:49,950
this way<font color="#CCCCCC"> and</font><font color="#E5E5E5"> it works at a really</font>

410
00:22:44,850 --> 00:22:52,860
<font color="#CCCCCC">fantastic so</font><font color="#E5E5E5"> there's some other issues</font>

411
00:22:49,950 --> 00:22:55,740
with with doing this of<font color="#E5E5E5"> course that I've</font>

412
00:22:52,860 --> 00:22:59,610
ran into using all the various hardware

413
00:22:55,740 --> 00:23:03,030
<font color="#E5E5E5">that I have the imx6 device in</font>

414
00:22:59,610 --> 00:23:07,860
particular the<font color="#CCCCCC"> drm driver or the</font>

415
00:23:03,030 --> 00:23:12,060
<font color="#CCCCCC">hardware has a hardware</font><font color="#E5E5E5"> scaler but it's</font>

416
00:23:07,860 --> 00:23:15,189
<font color="#E5E5E5">not plumbed into the the DRM pipeline so</font>

417
00:23:12,060 --> 00:23:18,850
unfortunately there is no plane scaling

418
00:23:15,190 --> 00:23:23,320
so you cannot play<font color="#E5E5E5"> a 720p video on a</font>

419
00:23:18,850 --> 00:23:25,689
1080p<font color="#CCCCCC"> screen on eye on the imx6 it'll</font>

420
00:23:23,320 --> 00:23:29,830
<font color="#CCCCCC">just say there's a size mismatch and</font>

421
00:23:25,690 --> 00:23:33,700
<font color="#E5E5E5">it'll fail</font><font color="#CCCCCC"> put on rock chip and the</font>

422
00:23:29,830 --> 00:23:35,408
dragon board it works just<font color="#E5E5E5"> fine</font><font color="#CCCCCC"> there</font>

423
00:23:33,700 --> 00:23:36,700
are<font color="#CCCCCC"> things we can kind of do about that</font>

424
00:23:35,409 --> 00:23:38,950
<font color="#E5E5E5">and</font><font color="#CCCCCC"> there's a</font><font color="#E5E5E5"> lot of stuff I've looked</font>

425
00:23:36,700 --> 00:23:43,059
into<font color="#E5E5E5"> and how to how to solve</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> and</font>

426
00:23:38,950 --> 00:23:44,620
all<font color="#E5E5E5"> of them are sort of complicated</font><font color="#CCCCCC"> it</font>

427
00:23:43,059 --> 00:23:49,120
would<font color="#E5E5E5"> be nice if there was</font><font color="#CCCCCC"> just a scaler</font>

428
00:23:44,620 --> 00:23:51,908
involved but<font color="#E5E5E5"> ops higher-ups tell me that</font>

429
00:23:49,120 --> 00:23:53,469
even if<font color="#CCCCCC"> they're</font><font color="#E5E5E5"> there that we can access</font>

430
00:23:51,909 --> 00:23:56,620
something<font color="#E5E5E5"> but it'll probably have to be</font>

431
00:23:53,470 --> 00:23:59,019
done<font color="#E5E5E5"> through ffmpeg instead so not</font>

432
00:23:56,620 --> 00:24:01,330
really that<font color="#E5E5E5"> great</font><font color="#CCCCCC"> and then the other</font>

433
00:23:59,019 --> 00:24:03,700
thing is<font color="#E5E5E5"> when doing when when putting a</font>

434
00:24:01,330 --> 00:24:07,299
frame into the<font color="#E5E5E5"> the plane directly we</font>

435
00:24:03,700 --> 00:24:08,620
can't use<font color="#E5E5E5"> GL shaders which are a big</font>

436
00:24:07,299 --> 00:24:10,918
<font color="#E5E5E5">part of</font><font color="#CCCCCC"> CODIS so doing</font><font color="#E5E5E5"> things like</font>

437
00:24:08,620 --> 00:24:14,408
scaling and and color correction<font color="#CCCCCC"> and</font>

438
00:24:10,919 --> 00:24:16,509
deinterlacing and stuff<font color="#CCCCCC"> I think v4l -</font>

439
00:24:14,409 --> 00:24:22,379
and rkm PPE but<font color="#CCCCCC"> with</font><font color="#E5E5E5"> support</font>

440
00:24:16,509 --> 00:24:26,019
<font color="#CCCCCC">deinterlacing</font><font color="#E5E5E5"> but just just</font><font color="#CCCCCC"> because so</font>

441
00:24:22,379 --> 00:24:28,350
<font color="#CCCCCC">so some sort</font><font color="#E5E5E5"> of alternative</font><font color="#CCCCCC"> solutions</font>

442
00:24:26,019 --> 00:24:32,740
that we've kind of<font color="#E5E5E5"> had to come</font><font color="#CCCCCC"> up</font><font color="#E5E5E5"> with</font>

443
00:24:28,350 --> 00:24:35,590
and this<font color="#E5E5E5"> is really only spurred out of</font>

444
00:24:32,740 --> 00:24:38,860
that that imx6 board that<font color="#E5E5E5"> that doesn't</font>

445
00:24:35,590 --> 00:24:41,408
support<font color="#CCCCCC"> plain scaling</font><font color="#E5E5E5"> we had to look</font>

446
00:24:38,860 --> 00:24:45,370
into some other solutions and the other

447
00:24:41,409 --> 00:24:51,159
solutions all involve using<font color="#E5E5E5"> OpenGL and</font>

448
00:24:45,370 --> 00:24:53,439
in this in this<font color="#E5E5E5"> case OpenGL ES so</font><font color="#CCCCCC"> which</font>

449
00:24:51,159 --> 00:24:56,710
also invite it involves writing<font color="#E5E5E5"> another</font>

450
00:24:53,440 --> 00:24:59,440
renderer for<font color="#CCCCCC"> it or another</font><font color="#E5E5E5"> code path but</font>

451
00:24:56,710 --> 00:25:01,840
it's not such a bad<font color="#E5E5E5"> thing</font>

452
00:24:59,440 --> 00:25:07,059
<font color="#CCCCCC">a lot of that code can</font><font color="#E5E5E5"> kind of be reused</font>

453
00:25:01,840 --> 00:25:13,240
but it's not it's not ideal<font color="#CCCCCC"> but we kind</font>

454
00:25:07,059 --> 00:25:15,250
<font color="#E5E5E5">of have to</font><font color="#CCCCCC"> work with what we get so so</font>

455
00:25:13,240 --> 00:25:18,039
what happens in this case is that we

456
00:25:15,250 --> 00:25:21,220
actually get the file descriptor from

457
00:25:18,039 --> 00:25:24,580
ffmpeg<font color="#E5E5E5"> and and we import it into you</font>

458
00:25:21,220 --> 00:25:26,500
into GL and and use it from there<font color="#CCCCCC"> and</font>

459
00:25:24,580 --> 00:25:30,510
then we can<font color="#CCCCCC"> do</font><font color="#E5E5E5"> image manipulation on it</font>

460
00:25:26,500 --> 00:25:30,510
<font color="#CCCCCC">in in</font><font color="#E5E5E5"> that case</font>

461
00:25:31,200 --> 00:25:36,750
it works<font color="#CCCCCC"> I have</font><font color="#E5E5E5"> it working on the dragon</font>

462
00:25:34,540 --> 00:25:36,750
board

463
00:25:37,480 --> 00:25:42,790
the performance is<font color="#E5E5E5"> still great it's the</font>

464
00:25:41,050 --> 00:25:47,200
problem<font color="#E5E5E5"> the main problem with</font><font color="#CCCCCC"> it is that</font>

465
00:25:42,790 --> 00:25:48,700
it requires GLS<font color="#CCCCCC"> three because of the</font>

466
00:25:47,200 --> 00:25:52,660
some of<font color="#E5E5E5"> the texture support that is</font>

467
00:25:48,700 --> 00:25:55,300
<font color="#CCCCCC">needed for</font><font color="#E5E5E5"> it and most of these small</font>

468
00:25:52,660 --> 00:25:59,640
arm boards only<font color="#E5E5E5"> support GL</font><font color="#CCCCCC"> ES</font><font color="#E5E5E5"> 2 which is</font>

469
00:25:55,300 --> 00:26:02,260
really unfortunate but<font color="#E5E5E5"> that's again life</font>

470
00:25:59,640 --> 00:26:04,840
<font color="#CCCCCC">so there</font><font color="#E5E5E5"> are some other</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> that we</font>

471
00:26:02,260 --> 00:26:09,220
can<font color="#E5E5E5"> do with GL ES 2 there's this GL</font>

472
00:26:04,840 --> 00:26:11,050
texture external<font color="#E5E5E5"> oh yes call that we can</font>

473
00:26:09,220 --> 00:26:12,550
use and I've sort<font color="#E5E5E5"> of worked on it a</font>

474
00:26:11,050 --> 00:26:18,669
little<font color="#E5E5E5"> bit</font><font color="#CCCCCC"> I never actually got it fully</font>

475
00:26:12,550 --> 00:26:23,830
working<font color="#E5E5E5"> it's it's working in</font><font color="#CCCCCC"> MP v I</font>

476
00:26:18,670 --> 00:26:27,760
believe<font color="#E5E5E5"> but again it depends on the</font>

477
00:26:23,830 --> 00:26:30,429
<font color="#E5E5E5">hardware</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> if if the GL es driver</font>

478
00:26:27,760 --> 00:26:39,820
<font color="#E5E5E5">actually supports importing of</font><font color="#CCCCCC"> an v12</font>

479
00:26:30,430 --> 00:26:42,670
format or not which<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> xyx doesn't that</font>

480
00:26:39,820 --> 00:26:45,790
would be great<font color="#CCCCCC"> I know imx6</font><font color="#E5E5E5"> actually</font>

481
00:26:42,670 --> 00:26:50,770
supports using<font color="#E5E5E5"> Yui</font>

482
00:26:45,790 --> 00:26:54,040
yeah Yui<font color="#CCCCCC"> v outputting from v4 l2 and the</font>

483
00:26:50,770 --> 00:26:55,600
<font color="#E5E5E5">end plane support and in GL but I just</font>

484
00:26:54,040 --> 00:27:04,990
<font color="#E5E5E5">haven't got around to really testing</font>

485
00:26:55,600 --> 00:27:06,250
that yet so great<font color="#CCCCCC"> okay so but again it</font>

486
00:27:04,990 --> 00:27:08,200
yeah it's one<font color="#E5E5E5"> of those things where it</font>

487
00:27:06,250 --> 00:27:11,860
depends platform to platform if that's

488
00:27:08,200 --> 00:27:16,510
if that's<font color="#E5E5E5"> a problem</font><font color="#CCCCCC"> in case</font><font color="#E5E5E5"> people don't</font>

489
00:27:11,860 --> 00:27:21,100
really know regular<font color="#E5E5E5"> OpenGL can't import</font>

490
00:27:16,510 --> 00:27:23,740
and b12 or certain like<font color="#E5E5E5"> planar formats</font>

491
00:27:21,100 --> 00:27:26,860
so the reason<font color="#E5E5E5"> it's required with GL es</font>

492
00:27:23,740 --> 00:27:29,620
for the one method is<font color="#CCCCCC"> because some of</font>

493
00:27:26,860 --> 00:27:32,560
<font color="#E5E5E5">the textures support that we have</font><font color="#CCCCCC"> to use</font>

494
00:27:29,620 --> 00:27:35,800
we basically break the end<font color="#CCCCCC"> b12 in image</font>

495
00:27:32,560 --> 00:27:40,810
into into their own planes in GL and

496
00:27:35,800 --> 00:27:43,409
then use shaders to<font color="#CCCCCC"> a sample sample</font><font color="#E5E5E5"> it</font>

497
00:27:40,810 --> 00:27:43,409
from there<font color="#E5E5E5"> so</font>

498
00:27:43,620 --> 00:27:50,969
I have some code<font color="#CCCCCC"> that kind of covers it</font>

499
00:27:48,210 --> 00:27:54,750
<font color="#CCCCCC">but it's not</font><font color="#E5E5E5"> really important because</font>

500
00:27:50,970 --> 00:27:57,679
<font color="#CCCCCC">again it's just</font><font color="#E5E5E5"> out</font><font color="#CCCCCC"> of context</font><font color="#E5E5E5"> but so</font>

501
00:27:54,750 --> 00:28:01,080
here we're actually<font color="#E5E5E5"> just importing in</font>

502
00:27:57,679 --> 00:28:05,789
our<font color="#CCCCCC"> 8th</font><font color="#E5E5E5"> texture</font><font color="#CCCCCC"> in in the</font><font color="#E5E5E5"> in the Y plane</font>

503
00:28:01,080 --> 00:28:09,059
<font color="#CCCCCC">and and then in the uv-plane we import a</font>

504
00:28:05,789 --> 00:28:11,279
<font color="#CCCCCC">gr8</font><font color="#E5E5E5"> 8 texture and yet those those two</font>

505
00:28:09,059 --> 00:28:14,428
<font color="#CCCCCC">are the problem because converting</font><font color="#E5E5E5"> from</font>

506
00:28:11,279 --> 00:28:16,909
these these the<font color="#E5E5E5"> DRM format to a GL</font>

507
00:28:14,429 --> 00:28:21,450
format requires a certain<font color="#CCCCCC"> level of</font>

508
00:28:16,909 --> 00:28:22,919
<font color="#E5E5E5">OpenGL which is just unfortunate</font><font color="#CCCCCC"> this</font>

509
00:28:21,450 --> 00:28:24,330
was<font color="#CCCCCC"> actually</font><font color="#E5E5E5"> kind of this method was</font>

510
00:28:22,919 --> 00:28:25,830
actually kind of copied from some other

511
00:28:24,330 --> 00:28:28,830
code that<font color="#CCCCCC"> we have in Kodi right now as</font>

512
00:28:25,830 --> 00:28:32,549
well because<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> the way that vApp</font>

513
00:28:28,830 --> 00:28:35,340
II works<font color="#CCCCCC"> in encode II because in it with</font>

514
00:28:32,549 --> 00:28:40,320
vApp II we get an NB<font color="#CCCCCC"> 12 frame</font><font color="#E5E5E5"> and we</font>

515
00:28:35,340 --> 00:28:44,490
import it<font color="#E5E5E5"> into GL using this so very</font>

516
00:28:40,320 --> 00:28:47,240
<font color="#E5E5E5">similar code</font><font color="#CCCCCC"> it does work but again</font>

517
00:28:44,490 --> 00:28:49,799
there's some<font color="#E5E5E5"> competes so we don't really</font>

518
00:28:47,240 --> 00:28:53,340
don't really know exactly<font color="#E5E5E5"> how we want to</font>

519
00:28:49,799 --> 00:28:55,289
move<font color="#CCCCCC"> forward here</font><font color="#E5E5E5"> if if this is</font>

520
00:28:53,340 --> 00:28:58,019
<font color="#CCCCCC">something we do want to implement or not</font>

521
00:28:55,289 --> 00:29:02,510
and if we do this<font color="#E5E5E5"> would</font><font color="#CCCCCC"> be a fallback</font>

522
00:28:58,019 --> 00:29:07,019
method for the direct so plain method

523
00:29:02,510 --> 00:29:09,210
that we are<font color="#E5E5E5"> using</font><font color="#CCCCCC"> currently so something</font>

524
00:29:07,019 --> 00:29:12,210
to talk<font color="#E5E5E5"> about in the</font><font color="#CCCCCC"> future but that's</font>

525
00:29:09,210 --> 00:29:17,070
that's just<font color="#E5E5E5"> how it is so and then and</font>

526
00:29:12,210 --> 00:29:21,330
then we just take the imported images

527
00:29:17,070 --> 00:29:24,210
and convert it to textures so<font color="#E5E5E5"> the other</font>

528
00:29:21,330 --> 00:29:27,449
method is the the<font color="#E5E5E5"> OES method and that's</font>

529
00:29:24,210 --> 00:29:33,149
<font color="#E5E5E5">specific to GL</font><font color="#CCCCCC"> es that's where we can</font>

530
00:29:27,450 --> 00:29:35,100
import<font color="#CCCCCC"> NB 12 directly but again</font><font color="#E5E5E5"> there's</font>

531
00:29:33,149 --> 00:29:36,520
some issues with that<font color="#CCCCCC"> so it's</font><font color="#E5E5E5"> it's a</font>

532
00:29:35,100 --> 00:29:39,869
<font color="#CCCCCC">little</font><font color="#E5E5E5"> difficult</font>

533
00:29:36,520 --> 00:29:39,869
[Music]

534
00:29:43,140 --> 00:29:52,350
so<font color="#E5E5E5"> I there was a couple platforms that I</font>

535
00:29:47,650 --> 00:29:54,640
wanted<font color="#E5E5E5"> to go over Raspberry Pi is</font>

536
00:29:52,350 --> 00:29:56,469
unfortunately<font color="#E5E5E5"> not really going down this</font>

537
00:29:54,640 --> 00:29:58,570
path<font color="#CCCCCC"> as of yet</font>

538
00:29:56,470 --> 00:30:00,600
upstream there is the VC for driver

539
00:29:58,570 --> 00:30:03,549
which<font color="#CCCCCC"> is really great it works fantastic</font>

540
00:30:00,600 --> 00:30:06,760
<font color="#CCCCCC">but when using VC</font><font color="#E5E5E5"> for you get no you get</font>

541
00:30:03,549 --> 00:30:08,460
no video decoding<font color="#CCCCCC"> support</font><font color="#E5E5E5"> because you</font>

542
00:30:06,760 --> 00:30:14,290
have to go through<font color="#E5E5E5"> their magic blob</font>

543
00:30:08,460 --> 00:30:18,160
which hopefully<font color="#E5E5E5"> I one day would will</font>

544
00:30:14,290 --> 00:30:20,049
happen but as of<font color="#CCCCCC"> now it's not so we</font>

545
00:30:18,160 --> 00:30:22,540
still have to<font color="#CCCCCC"> have</font><font color="#E5E5E5"> plug that</font>

546
00:30:20,049 --> 00:30:27,639
<font color="#E5E5E5">platform-specific code for for Raspberry</font>

547
00:30:22,540 --> 00:30:32,980
Pi<font color="#CCCCCC"> there's no real signs of</font><font color="#E5E5E5"> that</font>

548
00:30:27,640 --> 00:30:36,280
changing but that's how it is<font color="#CCCCCC"> am logic</font>

549
00:30:32,980 --> 00:30:38,440
is kind of<font color="#E5E5E5"> the same way and it's really</font>

550
00:30:36,280 --> 00:30:42,639
<font color="#E5E5E5">too bad</font><font color="#CCCCCC"> because</font><font color="#E5E5E5"> there is so much</font>

551
00:30:38,440 --> 00:30:44,679
analogic uptake in in people<font color="#E5E5E5"> buying</font>

552
00:30:42,640 --> 00:30:46,360
devices<font color="#E5E5E5"> they're so cheap you can</font><font color="#CCCCCC"> buy</font>

553
00:30:44,679 --> 00:30:49,299
them<font color="#E5E5E5"> for</font><font color="#CCCCCC"> twenty or thirty dollars</font><font color="#E5E5E5"> and</font>

554
00:30:46,360 --> 00:30:52,780
<font color="#E5E5E5">and have</font><font color="#CCCCCC"> Kody working on them which</font><font color="#E5E5E5"> is</font>

555
00:30:49,299 --> 00:30:55,840
fantastic<font color="#CCCCCC"> but</font><font color="#E5E5E5"> you're you're so stuck in</font>

556
00:30:52,780 --> 00:30:58,059
using all the problems that come<font color="#CCCCCC"> along</font>

557
00:30:55,840 --> 00:31:04,959
<font color="#E5E5E5">with their code and the nightmare that</font>

558
00:30:58,059 --> 00:31:07,570
is<font color="#CCCCCC"> am codec</font><font color="#E5E5E5"> and and yeah so there has</font>

559
00:31:04,960 --> 00:31:09,640
been effort to create<font color="#E5E5E5"> a DRM driver for</font>

560
00:31:07,570 --> 00:31:13,120
<font color="#E5E5E5">am logic which is fantastic it was done</font>

561
00:31:09,640 --> 00:31:14,440
by<font color="#CCCCCC"> B</font><font color="#E5E5E5"> Libre</font><font color="#CCCCCC"> we we talked with them</font><font color="#E5E5E5"> quite</font>

562
00:31:13,120 --> 00:31:16,629
a<font color="#E5E5E5"> lot</font>

563
00:31:14,440 --> 00:31:19,270
<font color="#E5E5E5">the problem becomes after this the video</font>

564
00:31:16,630 --> 00:31:21,130
<font color="#E5E5E5">decoding again so we've been talking</font>

565
00:31:19,270 --> 00:31:23,799
<font color="#CCCCCC">with</font><font color="#E5E5E5"> M logic and apparently there's some</font>

566
00:31:21,130 --> 00:31:26,410
work that they're doing<font color="#E5E5E5"> to do either a V</font>

567
00:31:23,799 --> 00:31:28,990
<font color="#E5E5E5">for l2 implementation or ffmpeg into</font>

568
00:31:26,410 --> 00:31:31,450
implementation<font color="#CCCCCC"> but</font><font color="#E5E5E5"> I yet to actually</font><font color="#CCCCCC"> see</font>

569
00:31:28,990 --> 00:31:34,120
<font color="#CCCCCC">anything so I</font><font color="#E5E5E5"> don't I don't really know</font>

570
00:31:31,450 --> 00:31:39,220
<font color="#CCCCCC">and then</font><font color="#E5E5E5"> even then with M logic it they</font>

571
00:31:34,120 --> 00:31:42,639
don't<font color="#E5E5E5"> have a</font><font color="#CCCCCC"> GBM compatible library for</font>

572
00:31:39,220 --> 00:31:44,980
<font color="#E5E5E5">Lib</font><font color="#CCCCCC"> Malley</font><font color="#E5E5E5"> so it's there's so</font><font color="#CCCCCC"> many</font>

573
00:31:42,640 --> 00:31:47,440
<font color="#E5E5E5">little things that</font><font color="#CCCCCC"> are problems with</font>

574
00:31:44,980 --> 00:31:50,740
these<font color="#CCCCCC"> platforms but</font><font color="#E5E5E5"> all winner is almost</font>

575
00:31:47,440 --> 00:31:55,750
<font color="#E5E5E5">there which is great</font><font color="#CCCCCC"> all winners kind of</font>

576
00:31:50,740 --> 00:31:58,750
had a I don't know<font color="#CCCCCC"> interesting past but</font>

577
00:31:55,750 --> 00:32:00,549
I have<font color="#CCCCCC"> Kody running on an orange</font><font color="#E5E5E5"> pie</font>

578
00:31:58,750 --> 00:32:03,100
there's just no hardware decoding

579
00:32:00,549 --> 00:32:08,770
<font color="#E5E5E5">support yet for it but as soon as that</font>

580
00:32:03,100 --> 00:32:11,620
driver is in which I mean there was the

581
00:32:08,770 --> 00:32:16,389
Kickstarter<font color="#CCCCCC"> the other day to do the all</font>

582
00:32:11,620 --> 00:32:18,129
<font color="#E5E5E5">winner</font><font color="#CCCCCC"> be for LT driver and apparently</font>

583
00:32:16,390 --> 00:32:22,780
it's there it's<font color="#E5E5E5"> just it needs reworking</font>

584
00:32:18,130 --> 00:32:27,669
for the new<font color="#E5E5E5"> v4 l to rework that's kind</font>

585
00:32:22,780 --> 00:32:30,700
<font color="#E5E5E5">of happening right now</font><font color="#CCCCCC"> rock ship is</font>

586
00:32:27,669 --> 00:32:31,900
working<font color="#E5E5E5"> it's all there</font>

587
00:32:30,700 --> 00:32:33,700
there's a lot of work going<font color="#CCCCCC"> into the</font>

588
00:32:31,900 --> 00:32:35,530
rock trip<font color="#CCCCCC"> colonel to support various</font>

589
00:32:33,700 --> 00:32:37,480
stuff<font color="#E5E5E5"> but the nice thing</font><font color="#CCCCCC"> about some of</font>

590
00:32:35,530 --> 00:32:41,740
these<font color="#E5E5E5"> boards is they will be</font><font color="#CCCCCC"> able to</font>

591
00:32:37,480 --> 00:32:47,830
support 4k<font color="#E5E5E5"> at 60fps which is really</font>

592
00:32:41,740 --> 00:32:49,480
awesome<font color="#E5E5E5"> and these do h.265 as well as so</font>

593
00:32:47,830 --> 00:32:52,389
they're<font color="#E5E5E5"> really up to</font><font color="#CCCCCC"> date and their</font>

594
00:32:49,480 --> 00:32:54,039
stuff<font color="#E5E5E5"> unfortunately it's not</font><font color="#CCCCCC"> quite</font>

595
00:32:52,390 --> 00:32:56,409
mainline kernel<font color="#CCCCCC"> but there's a lot</font><font color="#E5E5E5"> of</font>

596
00:32:54,039 --> 00:32:59,020
stuff being shifted to<font color="#E5E5E5"> there it's just</font>

597
00:32:56,409 --> 00:33:01,870
some<font color="#CCCCCC"> of the stuff specific with the GPU</font>

598
00:32:59,020 --> 00:33:07,600
and and<font color="#E5E5E5"> whatnot</font><font color="#CCCCCC"> that is stuck in the</font>

599
00:33:01,870 --> 00:33:09,850
rock ship specific kernel<font color="#E5E5E5"> so and this</font>

600
00:33:07,600 --> 00:33:16,120
<font color="#CCCCCC">qualcomm board is is</font><font color="#E5E5E5"> actually fantastic</font>

601
00:33:09,850 --> 00:33:18,250
apart from some stuff which the<font color="#CCCCCC"> software</font>

602
00:33:16,120 --> 00:33:25,270
support is is<font color="#E5E5E5"> amazing this board runs on</font>

603
00:33:18,250 --> 00:33:28,390
all open source software now it's

604
00:33:25,270 --> 00:33:30,429
completely upstream<font color="#E5E5E5"> it's running on</font>

605
00:33:28,390 --> 00:33:32,350
mainline kernel<font color="#E5E5E5"> there's still a couple</font>

606
00:33:30,429 --> 00:33:37,090
<font color="#E5E5E5">things missing but it's not really</font>

607
00:33:32,350 --> 00:33:41,320
needed<font color="#CCCCCC"> for our cases and yeah if they</font>

608
00:33:37,090 --> 00:33:48,129
would<font color="#E5E5E5"> just</font><font color="#CCCCCC"> make it a proper board layout</font>

609
00:33:41,320 --> 00:33:50,260
and power plug and and whatever else<font color="#CCCCCC"> but</font>

610
00:33:48,130 --> 00:33:54,730
and the<font color="#E5E5E5"> Android partition scheme is</font>

611
00:33:50,260 --> 00:33:57,100
<font color="#CCCCCC">really bad but that's life so I this</font>

612
00:33:54,730 --> 00:33:59,710
<font color="#E5E5E5">this works</font><font color="#CCCCCC"> I would really like to</font><font color="#E5E5E5"> show</font>

613
00:33:57,100 --> 00:34:04,120
it but yeah<font color="#E5E5E5"> and then and then imx6 as</font>

614
00:33:59,710 --> 00:34:07,000
well<font color="#CCCCCC"> is is all up main main line as well</font>

615
00:34:04,120 --> 00:34:09,149
<font color="#E5E5E5">which</font><font color="#CCCCCC"> is really</font><font color="#E5E5E5"> great</font><font color="#CCCCCC"> there's kind</font><font color="#E5E5E5"> of</font>

616
00:34:07,000 --> 00:34:11,668
mix of<font color="#E5E5E5"> myth mixed</font><font color="#CCCCCC"> six</font>

617
00:34:09,149 --> 00:34:14,668
with this because<font color="#E5E5E5"> imx6</font><font color="#CCCCCC"> platforms</font><font color="#E5E5E5"> so old</font>

618
00:34:11,668 --> 00:34:16,918
<font color="#E5E5E5">it only really supports h.264 and stuff</font>

619
00:34:14,668 --> 00:34:20,638
anyway

620
00:34:16,918 --> 00:34:23,009
<font color="#CCCCCC">I really</font><font color="#E5E5E5"> look forward to</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> am</font><font color="#CCCCCC"> x8 which</font>

621
00:34:20,639 --> 00:34:25,319
is kind of<font color="#E5E5E5"> II it's already kind of been</font>

622
00:34:23,010 --> 00:34:27,089
announced but hopefully the first<font color="#E5E5E5"> board</font>

623
00:34:25,319 --> 00:34:30,239
<font color="#E5E5E5">start showing up in the next few months</font>

624
00:34:27,089 --> 00:34:34,440
<font color="#E5E5E5">which is</font><font color="#CCCCCC"> really great</font><font color="#E5E5E5"> and I</font><font color="#CCCCCC"> mx8 will</font>

625
00:34:30,239 --> 00:34:40,589
<font color="#E5E5E5">have h.265 and vp9 and all the all the</font>

626
00:34:34,440 --> 00:34:48,839
<font color="#CCCCCC">good stuff so</font><font color="#E5E5E5"> future stuff</font><font color="#CCCCCC"> unfortunately</font>

627
00:34:40,589 --> 00:34:51,480
<font color="#CCCCCC">the the v4 l to the v4 l to</font><font color="#E5E5E5"> drm prime</font>

628
00:34:48,839 --> 00:34:52,949
work is not quite<font color="#CCCCCC"> mainline</font><font color="#E5E5E5"> I've already</font>

629
00:34:51,480 --> 00:34:54,210
submitted patches for<font color="#E5E5E5"> it but they do</font>

630
00:34:52,949 --> 00:34:58,410
need<font color="#CCCCCC"> some work</font><font color="#E5E5E5"> because they're quite</font>

631
00:34:54,210 --> 00:35:00,059
invasive<font color="#CCCCCC"> it's actually a minimal patch I</font>

632
00:34:58,410 --> 00:35:02,190
think it's like 30 lines or<font color="#E5E5E5"> something</font>

633
00:35:00,059 --> 00:35:04,710
<font color="#E5E5E5">like</font><font color="#CCCCCC"> that but it's</font><font color="#E5E5E5"> still something that</font>

634
00:35:02,190 --> 00:35:06,809
<font color="#E5E5E5">needs</font><font color="#CCCCCC"> to go in</font><font color="#E5E5E5"> the rock trip supports in</font>

635
00:35:04,710 --> 00:35:09,720
ffmpeg<font color="#E5E5E5"> already so that's totally fine</font>

636
00:35:06,809 --> 00:35:11,490
<font color="#E5E5E5">and then so the only other stuff kind of</font>

637
00:35:09,720 --> 00:35:14,098
missing from<font color="#E5E5E5"> Cody is going to be HDR</font>

638
00:35:11,490 --> 00:35:15,899
stuff but that<font color="#CCCCCC"> needs to kind of be</font>

639
00:35:14,099 --> 00:35:17,220
solved in the mainline kernel and<font color="#E5E5E5"> how</font>

640
00:35:15,900 --> 00:35:23,039
they want to want<font color="#E5E5E5"> to do that stuff</font>

641
00:35:17,220 --> 00:35:25,709
<font color="#E5E5E5">anyway</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> what's nice about this is it's</font>

642
00:35:23,039 --> 00:35:27,480
it's already done all in<font color="#CCCCCC"> Kodi so now</font>

643
00:35:25,710 --> 00:35:28,980
whenever the boards<font color="#E5E5E5"> come out and then</font>

644
00:35:27,480 --> 00:35:31,349
the drivers are implemented for them

645
00:35:28,980 --> 00:35:34,079
<font color="#E5E5E5">it'll just it'll just work so it's not</font>

646
00:35:31,349 --> 00:35:37,020
like we have<font color="#CCCCCC"> to back port stuff into</font>

647
00:35:34,079 --> 00:35:39,150
Kodi version 18<font color="#E5E5E5"> when it is released to</font>

648
00:35:37,020 --> 00:35:45,660
<font color="#CCCCCC">allow support for these other platforms</font>

649
00:35:39,150 --> 00:35:51,690
so not going<font color="#E5E5E5"> to do a demo</font><font color="#CCCCCC"> I don't</font><font color="#E5E5E5"> have</font>

650
00:35:45,660 --> 00:35:58,879
the adapter here but that's<font color="#E5E5E5"> fine so any</font>

651
00:35:51,690 --> 00:35:58,880
questions<font color="#E5E5E5"> about anything really good</font>

652
00:36:04,010 --> 00:36:26,670
yeah yeah<font color="#E5E5E5"> it so okay</font><font color="#CCCCCC"> so it's kind of</font>

653
00:36:23,579 --> 00:36:30,200
<font color="#CCCCCC">sick</font><font color="#E5E5E5"> comments about using a feel</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> think</font>

654
00:36:26,670 --> 00:36:35,010
it's done by a employer<font color="#CCCCCC"> MPV years who is</font>

655
00:36:30,200 --> 00:36:37,319
yeah<font color="#CCCCCC"> and player</font><font color="#E5E5E5"> so MPV</font><font color="#CCCCCC"> they have a new</font>

656
00:36:35,010 --> 00:36:40,710
library called lipless<font color="#CCCCCC"> ebo it's it's</font>

657
00:36:37,320 --> 00:36:42,150
meant<font color="#E5E5E5"> to do a bunch of like color</font>

658
00:36:40,710 --> 00:36:44,220
correction<font color="#E5E5E5"> and all sorts of other stuff</font>

659
00:36:42,150 --> 00:36:46,710
kind<font color="#E5E5E5"> of as a single framework and</font>

660
00:36:44,220 --> 00:36:50,939
whatnot<font color="#E5E5E5"> it's possibly something we might</font>

661
00:36:46,710 --> 00:36:53,040
look into but<font color="#E5E5E5"> we have certain</font><font color="#CCCCCC"> maintainer</font>

662
00:36:50,940 --> 00:36:55,980
<font color="#CCCCCC">x' that really like to avoid external</font>

663
00:36:53,040 --> 00:36:59,430
<font color="#E5E5E5">libraries and things but we'll see it</font>

664
00:36:55,980 --> 00:37:01,829
just yeah<font color="#CCCCCC"> there is kind of early support</font>

665
00:36:59,430 --> 00:37:04,710
in<font color="#CCCCCC"> Kody for doing</font><font color="#E5E5E5"> HDR stuff at least</font>

666
00:37:01,829 --> 00:37:07,619
some of<font color="#CCCCCC"> the pipelining is there it's</font>

667
00:37:04,710 --> 00:37:09,660
just getting it actually<font color="#E5E5E5"> to all the way</font>

668
00:37:07,619 --> 00:37:14,930
to the screen is kind<font color="#E5E5E5"> of where we're at</font>

669
00:37:09,660 --> 00:37:14,930
<font color="#CCCCCC">right now so yeah anyone else</font>

670
00:37:20,750 --> 00:37:28,370
go ahead<font color="#E5E5E5"> I don't</font><font color="#CCCCCC"> actually have any</font>

671
00:37:26,820 --> 00:37:33,030
benchmarks are there in the fact that

672
00:37:28,370 --> 00:37:35,940
without the kind<font color="#E5E5E5"> of</font><font color="#CCCCCC"> v4l to</font><font color="#E5E5E5"> stuff on on</font>

673
00:37:33,030 --> 00:37:40,500
<font color="#CCCCCC">Kody it just won't</font><font color="#E5E5E5"> run on platforms like</font>

674
00:37:35,940 --> 00:37:41,970
imx6<font color="#CCCCCC"> using the proprietary method worked</font>

675
00:37:40,500 --> 00:37:44,910
but it's basically doing the<font color="#CCCCCC"> same thing</font>

676
00:37:41,970 --> 00:37:46,980
so<font color="#CCCCCC"> you you could you could play kind</font><font color="#E5E5E5"> of</font>

677
00:37:44,910 --> 00:37:50,759
<font color="#E5E5E5">standard def playback using software</font>

678
00:37:46,980 --> 00:37:58,710
decoding<font color="#E5E5E5"> but but here you actually can</font>

679
00:37:50,760 --> 00:38:01,530
play full 1080p 60 frames so yeah anyone

680
00:37:58,710 --> 00:38:16,610
<font color="#CCCCCC">else any other questions like just in</font>

681
00:38:01,530 --> 00:38:18,270
general<font color="#E5E5E5"> about Cody or anything yeah</font>

682
00:38:16,610 --> 00:38:20,730
unfortunately there's quite a bit of

683
00:38:18,270 --> 00:38:23,970
<font color="#E5E5E5">work still to do for IM</font><font color="#CCCCCC"> x8 as far as</font>

684
00:38:20,730 --> 00:38:25,260
<font color="#E5E5E5">they know the the hardware video decoder</font>

685
00:38:23,970 --> 00:38:27,270
is a completely different chipset so

686
00:38:25,260 --> 00:38:29,450
that<font color="#CCCCCC"> v4l to drivers needs to be</font>

687
00:38:27,270 --> 00:38:31,500
<font color="#E5E5E5">completely implemented from scratch</font>

688
00:38:29,450 --> 00:38:34,710
apparently there's great documentation

689
00:38:31,500 --> 00:38:36,510
<font color="#E5E5E5">for the</font><font color="#CCCCCC"> MX a chip though so hopefully</font>

690
00:38:34,710 --> 00:38:40,860
it'll be done in<font color="#CCCCCC"> a kind of relatively</font>

691
00:38:36,510 --> 00:38:44,370
quick time period<font color="#CCCCCC"> there's been patches</font>

692
00:38:40,860 --> 00:38:46,980
already for Mesa<font color="#E5E5E5"> for</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> MX 8 that are on</font>

693
00:38:44,370 --> 00:38:49,529
their way<font color="#E5E5E5"> to being merged soon and then</font>

694
00:38:46,980 --> 00:38:57,030
and then they kind of<font color="#E5E5E5"> have to hook it up</font>

695
00:38:49,530 --> 00:39:00,150
<font color="#E5E5E5">in the MX</font><font color="#CCCCCC"> DRM driver</font><font color="#E5E5E5"> so yeah so close</font>

696
00:38:57,030 --> 00:39:02,820
<font color="#E5E5E5">but we'll see it depends when boards</font>

697
00:39:00,150 --> 00:39:05,750
come out<font color="#CCCCCC"> -</font><font color="#E5E5E5"> the only one</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> really aware</font>

698
00:39:02,820 --> 00:39:08,160
of<font color="#E5E5E5"> for consumer purchases there's a</font>

699
00:39:05,750 --> 00:39:09,720
board called the<font color="#CCCCCC"> wan</font><font color="#E5E5E5"> board which is</font>

700
00:39:08,160 --> 00:39:11,549
going<font color="#E5E5E5"> to be based on</font><font color="#CCCCCC"> IM x8 but it's</font>

701
00:39:09,720 --> 00:39:13,459
<font color="#CCCCCC">available</font><font color="#E5E5E5"> for pre-order only right</font><font color="#CCCCCC"> now</font>

702
00:39:11,550 --> 00:39:16,460
and<font color="#CCCCCC"> I</font><font color="#E5E5E5"> think comes out in a few</font><font color="#CCCCCC"> months so</font>

703
00:39:13,460 --> 00:39:16,460
yeah

704
00:39:21,310 --> 00:39:27,049
[Laughter]

705
00:39:24,259 --> 00:39:29,989
that's a<font color="#E5E5E5"> really tough question so I</font>

706
00:39:27,049 --> 00:39:31,549
actually<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> actually not only part of</font>

707
00:39:29,989 --> 00:39:35,599
<font color="#E5E5E5">Cody I am part of a project called the</font>

708
00:39:31,549 --> 00:39:39,099
<font color="#CCCCCC">Libre</font><font color="#E5E5E5"> lek</font><font color="#CCCCCC"> it's built from scratch Linux</font>

709
00:39:35,599 --> 00:39:42,109
distribution just<font color="#E5E5E5"> meant to run Cody</font><font color="#CCCCCC"> and</font>

710
00:39:39,099 --> 00:39:45,169
currently our<font color="#E5E5E5"> biggest you space is is</font>

711
00:39:42,109 --> 00:39:47,179
Raspberry Pi still<font color="#E5E5E5"> Raspberry Pi still an</font>

712
00:39:45,169 --> 00:39:49,069
awesome<font color="#CCCCCC"> platform for the for the money</font>

713
00:39:47,179 --> 00:39:52,419
you get it's been<font color="#CCCCCC"> like continually</font>

714
00:39:49,069 --> 00:39:55,009
tweaked like<font color="#CCCCCC"> sits it since it came</font><font color="#E5E5E5"> out</font>

715
00:39:52,419 --> 00:39:57,679
<font color="#E5E5E5">we have guys working with us from the</font>

716
00:39:55,009 --> 00:40:01,130
Raspberry Pi<font color="#CCCCCC"> foundation</font><font color="#E5E5E5"> to to work and</font>

717
00:39:57,679 --> 00:40:03,019
improve<font color="#CCCCCC"> it all the time</font><font color="#E5E5E5"> so I I think</font>

718
00:40:01,130 --> 00:40:04,609
<font color="#E5E5E5">Raspberry Pi is great unfortunately it's</font>

719
00:40:03,019 --> 00:40:06,078
a<font color="#CCCCCC"> little behind now because</font><font color="#E5E5E5"> it there's</font>

720
00:40:04,609 --> 00:40:10,098
so many other boards that are<font color="#E5E5E5"> coming out</font>

721
00:40:06,079 --> 00:40:12,109
but it<font color="#E5E5E5"> I have really strong opinions</font>

722
00:40:10,099 --> 00:40:17,269
<font color="#CCCCCC">about some of the</font><font color="#E5E5E5"> boards coming out and</font>

723
00:40:12,109 --> 00:40:22,038
<font color="#CCCCCC">I I don't</font><font color="#E5E5E5"> really need to cloud it with</font>

724
00:40:17,269 --> 00:40:26,649
some of this<font color="#E5E5E5"> stuff so yeah</font><font color="#CCCCCC"> alright hey</font>

725
00:40:22,039 --> 00:40:26,649
else<font color="#CCCCCC"> No</font>

726
00:40:27,620 --> 00:40:33,810
is it HDMI to VGA<font color="#CCCCCC"> I mean we can give it</font>

727
00:40:31,860 --> 00:40:35,550
a go I<font color="#CCCCCC"> haven't</font><font color="#E5E5E5"> I've never ran it on that</font>

728
00:40:33,810 --> 00:40:38,340
low of<font color="#E5E5E5"> a resolution and never used an</font>

729
00:40:35,550 --> 00:40:42,210
adapter before so<font color="#CCCCCC"> yeah it could work it</font>

730
00:40:38,340 --> 00:40:55,820
could<font color="#E5E5E5"> not sure I think there was</font><font color="#CCCCCC"> before</font>

731
00:40:42,210 --> 00:40:58,320
but I<font color="#E5E5E5"> don't see it before so you can I</font>

732
00:40:55,820 --> 00:41:04,260
<font color="#E5E5E5">can't change anything until it's running</font>

733
00:40:58,320 --> 00:41:06,830
but yeah and it that's<font color="#E5E5E5"> that's if it'll</font>

734
00:41:04,260 --> 00:41:06,830
<font color="#CCCCCC">run anyway so</font>

735
00:42:47,800 --> 00:42:55,150
no idea it's running but there's<font color="#E5E5E5"> yeah</font>

736
00:42:52,480 --> 00:43:00,190
I<font color="#E5E5E5"> don't know</font><font color="#CCCCCC"> if it's the adapter or what</font>

737
00:42:55,150 --> 00:43:01,140
<font color="#CCCCCC">so yeah</font><font color="#E5E5E5"> so anyway thank you</font><font color="#CCCCCC"> guys for</font>

738
00:43:00,190 --> 00:43:10,949
<font color="#E5E5E5">coming</font>

739
00:43:01,140 --> 00:43:10,949
[Applause]

