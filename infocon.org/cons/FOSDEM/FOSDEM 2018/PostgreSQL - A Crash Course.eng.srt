1
00:00:07,130 --> 00:00:12,700
we are just starting<font color="#E5E5E5"> now with Joe Conway</font>

2
00:00:10,730 --> 00:00:17,290
giving a talk<font color="#CCCCCC"> about</font>

3
00:00:12,700 --> 00:00:25,750
into<font color="#CCCCCC"> posters and we're giving the warm</font>

4
00:00:17,290 --> 00:00:27,939
applause<font color="#CCCCCC"> cheese thank you so my name is</font>

5
00:00:25,750 --> 00:00:30,820
Joe Conway and I work for<font color="#CCCCCC"> a</font><font color="#E5E5E5"> company</font>

6
00:00:27,939 --> 00:00:33,430
called crunchy data<font color="#E5E5E5"> mostly in the States</font>

7
00:00:30,820 --> 00:00:34,930
not here<font color="#E5E5E5"> I've been with the Postgres</font>

8
00:00:33,430 --> 00:00:37,000
community they've been using<font color="#CCCCCC"> postcode</font>

9
00:00:34,930 --> 00:00:39,489
<font color="#CCCCCC">for like 20 years</font><font color="#E5E5E5"> and start getting</font>

10
00:00:37,000 --> 00:00:41,320
active with the community<font color="#E5E5E5"> like</font><font color="#CCCCCC"> eighteen</font>

11
00:00:39,489 --> 00:00:45,250
<font color="#E5E5E5">years ago</font><font color="#CCCCCC"> and I was</font><font color="#E5E5E5"> gonna</font><font color="#CCCCCC"> committed for</font>

12
00:00:41,320 --> 00:00:46,540
15 years or so<font color="#E5E5E5"> these slides there's a</font>

13
00:00:45,250 --> 00:00:48,010
lot of detail on<font color="#E5E5E5"> here I'm going to go</font>

14
00:00:46,540 --> 00:00:49,300
through them fairly<font color="#CCCCCC"> quickly</font><font color="#E5E5E5"> because</font>

15
00:00:48,010 --> 00:00:51,610
that's the only<font color="#E5E5E5"> way to do it</font><font color="#CCCCCC"> in 50</font>

16
00:00:49,300 --> 00:00:53,799
minutes<font color="#E5E5E5"> they will be available</font><font color="#CCCCCC"> if</font>

17
00:00:51,610 --> 00:00:57,010
nowhere else on my own website<font color="#E5E5E5"> Joe</font>

18
00:00:53,799 --> 00:00:59,799
<font color="#E5E5E5">Conway calm I'm not sure what the</font>

19
00:00:57,010 --> 00:01:02,409
Postgres guys have coordinated for us to

20
00:00:59,799 --> 00:01:06,700
put slides<font color="#E5E5E5"> somewhere centralized or not</font>

21
00:01:02,409 --> 00:01:09,520
but the wiki<font color="#E5E5E5"> so we still</font><font color="#CCCCCC"> use the wiki</font>

22
00:01:06,700 --> 00:01:11,950
<font color="#CCCCCC">okay so the wiki dot</font><font color="#E5E5E5"> Postgres</font><font color="#CCCCCC"> sequel org</font>

23
00:01:09,520 --> 00:01:14,048
<font color="#E5E5E5">there's a page that has basically all</font>

24
00:01:11,950 --> 00:01:16,030
the<font color="#E5E5E5"> conferences you drill in and all</font>

25
00:01:14,049 --> 00:01:21,280
<font color="#CCCCCC">that way each individual conference wiki</font>

26
00:01:16,030 --> 00:01:23,649
page or links<font color="#CCCCCC"> to the talks so this talk</font>

27
00:01:21,280 --> 00:01:25,240
is<font color="#E5E5E5"> basically an introductory talk to</font>

28
00:01:23,649 --> 00:01:26,500
help you<font color="#E5E5E5"> get</font><font color="#CCCCCC"> up</font><font color="#E5E5E5"> and running on Postgres</font>

29
00:01:25,240 --> 00:01:29,460
if you're<font color="#E5E5E5"> already familiar with the post</font>

30
00:01:26,500 --> 00:01:32,039
class<font color="#CCCCCC"> you probably don't need to be here</font>

31
00:01:29,460 --> 00:01:34,270
<font color="#CCCCCC">you might still learn something actually</font>

32
00:01:32,039 --> 00:01:35,740
<font color="#E5E5E5">even after all these years whenever I</font>

33
00:01:34,270 --> 00:01:38,770
sit<font color="#E5E5E5"> down to prepare talk like this I</font>

34
00:01:35,740 --> 00:01:40,479
learned something<font color="#E5E5E5"> I didn't know so it's</font>

35
00:01:38,770 --> 00:01:45,609
you know it hopefully<font color="#E5E5E5"> is worth your</font>

36
00:01:40,479 --> 00:01:49,030
<font color="#E5E5E5">while you</font><font color="#CCCCCC"> stand</font><font color="#E5E5E5"> out with how you install</font>

37
00:01:45,609 --> 00:01:51,429
those<font color="#E5E5E5"> graphs and</font><font color="#CCCCCC"> well did</font><font color="#E5E5E5"> you also see</font>

38
00:01:49,030 --> 00:01:53,909
<font color="#CCCCCC">on these slides is that</font><font color="#E5E5E5"> I'm trying</font><font color="#CCCCCC"> to</font>

39
00:01:51,429 --> 00:01:56,880
cover<font color="#E5E5E5"> sort of the main ways to do things</font>

40
00:01:53,909 --> 00:02:00,130
that are different<font color="#E5E5E5"> between different</font>

41
00:01:56,880 --> 00:02:01,600
distributions<font color="#E5E5E5"> so and and as with</font>

42
00:02:00,130 --> 00:02:03,969
everything in Postgres there's typically

43
00:02:01,600 --> 00:02:06,419
<font color="#E5E5E5">more than one way to do the same thing</font>

44
00:02:03,969 --> 00:02:09,788
for<font color="#E5E5E5"> the basic</font><font color="#CCCCCC"> administrative type</font>

45
00:02:06,420 --> 00:02:11,860
operations so to start out when you

46
00:02:09,788 --> 00:02:14,260
install you can get<font color="#E5E5E5"> you</font><font color="#CCCCCC"> already rpms or</font>

47
00:02:11,860 --> 00:02:18,120
<font color="#CCCCCC">Deb's</font><font color="#E5E5E5"> either from your own</font><font color="#CCCCCC"> distribution</font>

48
00:02:14,260 --> 00:02:21,399
or from the<font color="#E5E5E5"> Postgres</font><font color="#CCCCCC"> development group</font>

49
00:02:18,120 --> 00:02:22,390
<font color="#E5E5E5">distribution the OPM's be managed by</font>

50
00:02:21,400 --> 00:02:25,060
<font color="#CCCCCC">Debra was in the</font>

51
00:02:22,390 --> 00:02:27,519
the room and the the<font color="#CCCCCC"> Deb's are managed</font>

52
00:02:25,060 --> 00:02:29,560
by Christophe Berg<font color="#CCCCCC"> and some other folks</font>

53
00:02:27,520 --> 00:02:32,950
<font color="#E5E5E5">who are wandering</font><font color="#CCCCCC"> around</font><font color="#E5E5E5"> falls down</font>

54
00:02:29,560 --> 00:02:36,850
somewhere right<font color="#CCCCCC"> now</font><font color="#E5E5E5"> there also builds</font>

55
00:02:32,950 --> 00:02:38,500
for<font color="#CCCCCC"> Windows</font><font color="#E5E5E5"> available these</font><font color="#CCCCCC"> blue</font><font color="#E5E5E5"> are my</font>

56
00:02:36,850 --> 00:02:41,350
slides<font color="#E5E5E5"> if</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> go download them later</font><font color="#CCCCCC"> or</font>

57
00:02:38,500 --> 00:02:43,120
links<font color="#CCCCCC"> to those spots on the</font><font color="#E5E5E5"> website so</font>

58
00:02:41,350 --> 00:02:44,560
you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> go find them but there's at</font>

59
00:02:43,120 --> 00:02:46,420
least a<font color="#CCCCCC"> couple</font><font color="#E5E5E5"> of different</font>

60
00:02:44,560 --> 00:02:48,640
distributions of<font color="#E5E5E5"> Windows binaries you</font>

61
00:02:46,420 --> 00:02:51,190
can get I don't<font color="#E5E5E5"> necessarily recommend</font>

62
00:02:48,640 --> 00:02:52,809
<font color="#E5E5E5">you</font><font color="#CCCCCC"> and Postgres on</font><font color="#E5E5E5"> Windows</font><font color="#CCCCCC"> but lots of</font>

63
00:02:51,190 --> 00:02:56,890
people do for development purposes at

64
00:02:52,810 --> 00:03:00,070
least<font color="#E5E5E5"> Mac has options and Solaris</font><font color="#CCCCCC"> and in</font>

65
00:02:56,890 --> 00:03:01,179
<font color="#CCCCCC">various bsds have options and</font><font color="#E5E5E5"> I know I</font>

66
00:03:00,070 --> 00:03:03,750
<font color="#E5E5E5">just said that this is kind of an</font>

67
00:03:01,180 --> 00:03:06,070
introductory talk talk but<font color="#E5E5E5"> I'm going</font><font color="#CCCCCC"> to</font>

68
00:03:03,750 --> 00:03:08,350
spend just<font color="#E5E5E5"> a couple of slides talking</font>

69
00:03:06,070 --> 00:03:11,290
<font color="#E5E5E5">about how you might build and install</font>

70
00:03:08,350 --> 00:03:12,790
<font color="#E5E5E5">Postgres from source because that's kind</font>

71
00:03:11,290 --> 00:03:15,519
of a useful<font color="#CCCCCC"> skill to</font><font color="#E5E5E5"> have it is it's</font>

72
00:03:12,790 --> 00:03:17,890
actually surprisingly not that<font color="#E5E5E5"> terribly</font>

73
00:03:15,520 --> 00:03:19,420
difficult<font color="#E5E5E5"> it's just so I'm just getting</font>

74
00:03:17,890 --> 00:03:25,029
started might sound scary<font color="#CCCCCC"> but it's not</font>

75
00:03:19,420 --> 00:03:27,730
that hard so my example<font color="#CCCCCC"> for this</font><font color="#E5E5E5"> is</font>

76
00:03:25,030 --> 00:03:30,610
going<font color="#E5E5E5"> to be on a red hat system on a red</font>

77
00:03:27,730 --> 00:03:33,190
hat or a variant system<font color="#E5E5E5"> you're going to</font>

78
00:03:30,610 --> 00:03:35,470
need to install<font color="#CCCCCC"> git</font><font color="#E5E5E5"> in order to get the</font>

79
00:03:33,190 --> 00:03:36,370
Postgres source tree and then you're

80
00:03:35,470 --> 00:03:39,580
going to<font color="#E5E5E5"> need a bunch of build</font>

81
00:03:36,370 --> 00:03:41,549
dependencies<font color="#E5E5E5"> and this statement here is</font>

82
00:03:39,580 --> 00:03:44,680
<font color="#CCCCCC">the yum install and a bunch of packages</font>

83
00:03:41,549 --> 00:03:47,350
<font color="#E5E5E5">these are what I find I need on a kind</font>

84
00:03:44,680 --> 00:03:50,230
<font color="#E5E5E5">of a clean</font><font color="#CCCCCC"> Red</font><font color="#E5E5E5"> Hat system in order to be</font>

85
00:03:47,350 --> 00:03:51,340
able to build<font color="#E5E5E5"> Postgres so you know I'm</font>

86
00:03:50,230 --> 00:03:54,130
<font color="#E5E5E5">not going to try and go</font><font color="#CCCCCC"> through these in</font>

87
00:03:51,340 --> 00:03:56,220
<font color="#E5E5E5">one by</font><font color="#CCCCCC"> one in detail but if you download</font>

88
00:03:54,130 --> 00:03:58,090
the<font color="#E5E5E5"> slides you</font><font color="#CCCCCC"> can get them from</font><font color="#E5E5E5"> there</font>

89
00:03:56,220 --> 00:04:01,450
the<font color="#CCCCCC"> next</font><font color="#E5E5E5"> thing you're going to want</font><font color="#CCCCCC"> to</font>

90
00:03:58,090 --> 00:04:03,010
do is clone the Postgres source so you

91
00:04:01,450 --> 00:04:05,339
know you typically<font color="#E5E5E5"> want to make a spot</font>

92
00:04:03,010 --> 00:04:07,899
where you're going to land<font color="#E5E5E5"> that tree</font>

93
00:04:05,340 --> 00:04:11,110
switch into it and then use git clone

94
00:04:07,900 --> 00:04:13,930
<font color="#CCCCCC">and then this is the URL</font><font color="#E5E5E5"> that you would</font>

95
00:04:11,110 --> 00:04:17,290
use with git clone to clone<font color="#CCCCCC"> and</font><font color="#E5E5E5"> Postgres</font>

96
00:04:13,930 --> 00:04:20,290
from the<font color="#E5E5E5"> domain repository and then CD</font>

97
00:04:17,290 --> 00:04:25,090
into that directory<font color="#CCCCCC"> and check out</font><font color="#E5E5E5"> a</font>

98
00:04:20,290 --> 00:04:28,210
branch<font color="#E5E5E5"> so in post case the branches are</font>

99
00:04:25,090 --> 00:04:28,888
named<font color="#E5E5E5"> like this well and actually prior</font>

100
00:04:28,210 --> 00:04:31,770
to post press

101
00:04:28,889 --> 00:04:35,249
this would be<font color="#CCCCCC"> round</font><font color="#E5E5E5"> nine nine underscore</font>

102
00:04:31,770 --> 00:04:37,799
six underscore stable or nine underscore

103
00:04:35,249 --> 00:04:40,590
five underscore stable<font color="#E5E5E5"> ten is</font><font color="#CCCCCC"> the latest</font>

104
00:04:37,800 --> 00:04:42,900
stable branch so if you wanted<font color="#E5E5E5"> to build</font>

105
00:04:40,590 --> 00:04:50,219
<font color="#E5E5E5">the latest post class this</font><font color="#CCCCCC"> is the one</font>

106
00:04:42,900 --> 00:04:51,599
that<font color="#E5E5E5"> you would check out now I'm</font>

107
00:04:50,219 --> 00:04:53,580
<font color="#CCCCCC">assuming that we're on a system where we</font>

108
00:04:51,599 --> 00:04:56,520
<font color="#CCCCCC">already</font><font color="#E5E5E5"> have the Postgres</font><font color="#CCCCCC"> Development</font>

109
00:04:53,580 --> 00:04:59,099
<font color="#CCCCCC">Group rpms installed on the system and I</font>

110
00:04:56,520 --> 00:05:02,698
want<font color="#E5E5E5"> to compile Postgres for debug build</font>

111
00:04:59,099 --> 00:05:04,469
so I can troubleshoot something so<font color="#E5E5E5"> I</font>

112
00:05:02,699 --> 00:05:07,110
want<font color="#CCCCCC"> it to be configured</font><font color="#E5E5E5"> basically the</font>

113
00:05:04,469 --> 00:05:08,370
same way as what<font color="#CCCCCC"> I get from</font><font color="#E5E5E5"> the RPM so</font>

114
00:05:07,110 --> 00:05:11,069
what I'm<font color="#E5E5E5"> going to do is capture and</font>

115
00:05:08,370 --> 00:05:14,909
modify a couple of flags<font color="#E5E5E5"> from</font><font color="#CCCCCC"> the</font>

116
00:05:11,069 --> 00:05:18,659
existing bill from<font color="#CCCCCC"> the RPM so this</font>

117
00:05:14,909 --> 00:05:20,430
command here is just first I'm<font color="#E5E5E5"> exporting</font>

118
00:05:18,659 --> 00:05:26,370
the path to my binaries and<font color="#E5E5E5"> then I'm</font>

119
00:05:20,430 --> 00:05:29,189
going to run PG config configure which

120
00:05:26,370 --> 00:05:32,550
will get<font color="#CCCCCC"> me exactly the way the rpms</font>

121
00:05:29,189 --> 00:05:36,169
were built and I'm going to<font color="#E5E5E5"> replace the</font>

122
00:05:32,550 --> 00:05:40,379
optimization level and the debug flag

123
00:05:36,169 --> 00:05:43,469
<font color="#E5E5E5">that was used by the RPM maintainer</font><font color="#CCCCCC"> in</font>

124
00:05:40,379 --> 00:05:44,909
order to use these flags instead which

125
00:05:43,469 --> 00:05:49,620
are going<font color="#E5E5E5"> to give me a more debuggable</font>

126
00:05:44,909 --> 00:05:51,449
build and then you just once you've done

127
00:05:49,620 --> 00:05:54,330
that configure step<font color="#E5E5E5"> you</font><font color="#CCCCCC"> just do make and</font>

128
00:05:51,449 --> 00:05:55,710
make install this<font color="#E5E5E5"> - J I make if you're</font>

129
00:05:54,330 --> 00:05:57,029
<font color="#E5E5E5">not aware of it that just</font><font color="#CCCCCC"> does a</font>

130
00:05:55,710 --> 00:06:03,299
parallel make so it makes a<font color="#E5E5E5"> lot of</font>

131
00:05:57,029 --> 00:06:05,399
faster once you've done that<font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font>

132
00:06:03,300 --> 00:06:08,759
typical debug workflow is you're<font color="#E5E5E5"> going</font>

133
00:06:05,399 --> 00:06:10,889
<font color="#E5E5E5">to log</font><font color="#CCCCCC"> in to</font><font color="#E5E5E5"> P sequel or some client you</font>

134
00:06:08,759 --> 00:06:12,750
find the<font color="#CCCCCC"> backend process associated with</font>

135
00:06:10,889 --> 00:06:15,149
that client<font color="#E5E5E5"> usually you do that just on</font>

136
00:06:12,750 --> 00:06:19,770
the server<font color="#E5E5E5"> that</font><font color="#CCCCCC"> Postgres</font><font color="#E5E5E5"> is running on</font>

137
00:06:15,149 --> 00:06:22,139
use PS identify the<font color="#E5E5E5"> backend that does</font>

138
00:06:19,770 --> 00:06:24,479
the database that<font color="#CCCCCC"> you're logged in</font><font color="#E5E5E5"> to</font>

139
00:06:22,139 --> 00:06:27,750
<font color="#E5E5E5">attach to it with gdb and set a</font>

140
00:06:24,479 --> 00:06:29,520
<font color="#CCCCCC">breakpoint</font><font color="#E5E5E5"> and then execute some</font>

141
00:06:27,750 --> 00:06:31,860
statement<font color="#E5E5E5"> from your piece equal session</font>

142
00:06:29,520 --> 00:06:34,109
and then go on<font color="#CCCCCC"> with your debugging</font><font color="#E5E5E5"> and</font>

143
00:06:31,860 --> 00:06:36,449
<font color="#E5E5E5">again someone was joking that the name</font>

144
00:06:34,110 --> 00:06:38,879
<font color="#E5E5E5">of this this talk was you know a crash</font>

145
00:06:36,449 --> 00:06:40,980
course<font color="#CCCCCC"> so maybe we could do a whole</font>

146
00:06:38,879 --> 00:06:43,360
<font color="#E5E5E5">course on this but</font>

147
00:06:40,980 --> 00:06:45,100
that's well beyond the<font color="#E5E5E5"> scope of this</font>

148
00:06:43,360 --> 00:06:51,970
<font color="#E5E5E5">thing</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> any questions about that</font><font color="#CCCCCC"> before</font>

149
00:06:45,100 --> 00:06:53,650
<font color="#E5E5E5">I move on</font><font color="#CCCCCC"> okay so the</font><font color="#E5E5E5"> first step</font><font color="#CCCCCC"> now</font>

150
00:06:51,970 --> 00:06:55,660
that<font color="#CCCCCC"> you've got Postgres installed you</font>

151
00:06:53,650 --> 00:06:58,359
probably install it<font color="#E5E5E5"> from a</font><font color="#CCCCCC"> debian</font>

152
00:06:55,660 --> 00:07:01,360
package<font color="#CCCCCC"> or an RPM as you want to</font>

153
00:06:58,360 --> 00:07:04,270
<font color="#E5E5E5">configure it so the files that are used</font>

154
00:07:01,360 --> 00:07:06,190
<font color="#CCCCCC">for</font><font color="#E5E5E5"> configuration are called</font><font color="#CCCCCC"> PostgreSQL</font>

155
00:07:04,270 --> 00:07:09,310
<font color="#CCCCCC">Kampf and then there's also this</font>

156
00:07:06,190 --> 00:07:11,530
<font color="#CCCCCC">PostgreSQL Auto Kampf and that is</font>

157
00:07:09,310 --> 00:07:14,800
actually<font color="#E5E5E5"> generated when you do a an</font>

158
00:07:11,530 --> 00:07:16,710
ultra system command<font color="#CCCCCC"> so you wouldn't</font>

159
00:07:14,800 --> 00:07:20,080
normally want<font color="#E5E5E5"> to edit</font><font color="#CCCCCC"> that one directly</font>

160
00:07:16,710 --> 00:07:22,510
the the<font color="#CCCCCC"> formula file is normally a name</font>

161
00:07:20,080 --> 00:07:26,260
of our configuration variable equals and

162
00:07:22,510 --> 00:07:28,560
then<font color="#E5E5E5"> a value and now in order to</font>

163
00:07:26,260 --> 00:07:32,500
activate<font color="#E5E5E5"> the changes that you make</font>

164
00:07:28,560 --> 00:07:36,040
you're<font color="#E5E5E5"> going to need to reload the</font>

165
00:07:32,500 --> 00:07:37,750
Postgres service and there's<font color="#CCCCCC"> an you</font><font color="#E5E5E5"> know</font>

166
00:07:36,040 --> 00:07:40,960
as I mentioned<font color="#CCCCCC"> earlier here's five</font>

167
00:07:37,750 --> 00:07:42,760
different<font color="#E5E5E5"> ways you can do that basically</font>

168
00:07:40,960 --> 00:07:44,799
you could there's a built-in command<font color="#E5E5E5"> a</font>

169
00:07:42,760 --> 00:07:47,440
<font color="#E5E5E5">Postgres called PG cough reload if you</font>

170
00:07:44,800 --> 00:07:50,860
select that that's going<font color="#E5E5E5"> to reload your</font>

171
00:07:47,440 --> 00:07:52,330
configuration file<font color="#E5E5E5"> there's also a binary</font>

172
00:07:50,860 --> 00:07:55,420
that<font color="#E5E5E5"> comes with Postgres called PG</font>

173
00:07:52,330 --> 00:07:58,060
control you can<font color="#CCCCCC"> use that with a path</font><font color="#E5E5E5"> to</font>

174
00:07:55,420 --> 00:07:59,760
<font color="#CCCCCC">data directory</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> the instance of</font>

175
00:07:58,060 --> 00:08:03,870
<font color="#E5E5E5">Postgres you're interested in and just</font>

176
00:07:59,760 --> 00:08:07,000
<font color="#CCCCCC">the command reload</font><font color="#E5E5E5"> or if you're</font><font color="#CCCCCC"> using</font>

177
00:08:03,870 --> 00:08:08,860
<font color="#E5E5E5">the service</font><font color="#CCCCCC"> for the system control files</font>

178
00:08:07,000 --> 00:08:12,430
there's<font color="#CCCCCC"> also equivalent</font><font color="#E5E5E5"> ways to do that</font>

179
00:08:08,860 --> 00:08:14,620
<font color="#E5E5E5">service</font><font color="#CCCCCC"> Postgres reload system control</font>

180
00:08:12,430 --> 00:08:16,180
reload<font color="#CCCCCC"> I'm not sure why</font><font color="#E5E5E5"> they switch</font>

181
00:08:14,620 --> 00:08:19,950
these around but that<font color="#E5E5E5"> always bugs the</font>

182
00:08:16,180 --> 00:08:19,950
heck out of me<font color="#CCCCCC"> I don't know</font><font color="#E5E5E5"> about you</font>

183
00:08:24,240 --> 00:08:29,320
<font color="#E5E5E5">and then</font><font color="#CCCCCC"> finally the real you kind</font><font color="#E5E5E5"> of</font>

184
00:08:27,760 --> 00:08:31,750
<font color="#E5E5E5">old-school way to do this is you</font><font color="#CCCCCC"> can</font>

185
00:08:29,320 --> 00:08:34,000
send a signal signal to the postmaster

186
00:08:31,750 --> 00:08:38,110
<font color="#E5E5E5">pin so if you go find the actual</font>

187
00:08:34,000 --> 00:08:40,090
postmaster<font color="#E5E5E5"> post press spawns several</font>

188
00:08:38,110 --> 00:08:41,890
processes when it starts off even<font color="#E5E5E5"> when</font>

189
00:08:40,090 --> 00:08:43,870
nothing else<font color="#E5E5E5"> is</font><font color="#CCCCCC"> happening</font><font color="#E5E5E5"> but it's</font>

190
00:08:41,890 --> 00:08:45,939
usually pretty<font color="#E5E5E5"> easy to identify the one</font>

191
00:08:43,870 --> 00:08:48,050
<font color="#E5E5E5">that is the postmaster because it's got</font>

192
00:08:45,940 --> 00:08:50,060
the directory<font color="#CCCCCC"> for the</font>

193
00:08:48,050 --> 00:08:52,130
<font color="#E5E5E5">those data directory</font><font color="#CCCCCC"> in the command line</font>

194
00:08:50,060 --> 00:08:57,290
<font color="#E5E5E5">so if you find that one you can actually</font>

195
00:08:52,130 --> 00:08:59,480
<font color="#E5E5E5">send it</font><font color="#CCCCCC"> a signal</font><font color="#E5E5E5"> directly now if you</font>

196
00:08:57,290 --> 00:09:01,550
want to make changes you<font color="#CCCCCC"> could basically</font>

197
00:08:59,480 --> 00:09:03,470
have<font color="#E5E5E5"> you their persistent changes or you</font>

198
00:09:01,550 --> 00:09:06,079
can<font color="#CCCCCC"> have procession changes the</font>

199
00:09:03,470 --> 00:09:09,500
persistent changes are<font color="#E5E5E5"> going to live</font>

200
00:09:06,079 --> 00:09:12,079
across posts restarts across post

201
00:09:09,500 --> 00:09:14,120
<font color="#CCCCCC">request session restarts and so on so</font>

202
00:09:12,079 --> 00:09:17,479
yeah the canonical<font color="#E5E5E5"> way to do that is</font>

203
00:09:14,120 --> 00:09:19,970
<font color="#E5E5E5">modify post go see</font><font color="#CCCCCC"> koulikov you can also</font>

204
00:09:17,480 --> 00:09:21,529
actually<font color="#E5E5E5"> the postmaster itself when it</font>

205
00:09:19,970 --> 00:09:24,110
starts up<font color="#CCCCCC"> you</font><font color="#E5E5E5"> can you can feed it</font>

206
00:09:21,529 --> 00:09:27,649
options and some of the startup scripts

207
00:09:24,110 --> 00:09:29,029
<font color="#CCCCCC">that are around</font><font color="#E5E5E5"> do that</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> probably</font>

208
00:09:27,649 --> 00:09:31,279
<font color="#E5E5E5">not something that you're going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> mess</font>

209
00:09:29,029 --> 00:09:32,829
with as someone new to post Chris but

210
00:09:31,279 --> 00:09:35,630
that is something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can do and</font>

211
00:09:32,829 --> 00:09:39,099
then in recent releases I think<font color="#E5E5E5"> it spins</font>

212
00:09:35,630 --> 00:09:42,459
since about<font color="#CCCCCC"> post quest</font><font color="#E5E5E5"> nine</font><font color="#CCCCCC"> four so</font>

213
00:09:39,100 --> 00:09:45,440
there's this command called<font color="#E5E5E5"> alter system</font>

214
00:09:42,459 --> 00:09:48,949
so you can<font color="#E5E5E5"> say alter</font><font color="#CCCCCC"> system set or alter</font>

215
00:09:45,440 --> 00:09:50,570
system<font color="#E5E5E5"> reset with a particular</font>

216
00:09:48,950 --> 00:09:52,399
configuration<font color="#E5E5E5"> variable and it'll make</font>

217
00:09:50,570 --> 00:09:55,670
that change<font color="#E5E5E5"> and it makes a persistent by</font>

218
00:09:52,399 --> 00:09:59,270
using<font color="#E5E5E5"> that plus Co sequel</font><font color="#CCCCCC"> auto con fella</font>

219
00:09:55,670 --> 00:10:00,680
I<font color="#E5E5E5"> was talking about earlier this</font><font color="#CCCCCC"> is</font>

220
00:09:59,270 --> 00:10:02,000
something that<font color="#CCCCCC"> a lot of people I</font><font color="#E5E5E5"> think</font>

221
00:10:00,680 --> 00:10:03,290
are<font color="#E5E5E5"> not aware</font><font color="#CCCCCC"> of but there's another</font>

222
00:10:02,000 --> 00:10:05,060
there<font color="#E5E5E5"> are other ways</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can make</font>

223
00:10:03,290 --> 00:10:07,130
persistent<font color="#E5E5E5"> changes and make and bind</font>

224
00:10:05,060 --> 00:10:09,380
them specifically<font color="#E5E5E5"> so you can have you</font>

225
00:10:07,130 --> 00:10:12,470
can<font color="#E5E5E5"> alter a database and set a</font><font color="#CCCCCC"> variable</font>

226
00:10:09,380 --> 00:10:15,410
to be<font color="#CCCCCC"> a certain value</font><font color="#E5E5E5"> anytime</font><font color="#CCCCCC"> someone</font>

227
00:10:12,470 --> 00:10:17,060
logs into<font color="#CCCCCC"> a database or you can do the</font>

228
00:10:15,410 --> 00:10:20,630
<font color="#E5E5E5">same thing by altering</font><font color="#CCCCCC"> a role</font><font color="#E5E5E5"> you can</font>

229
00:10:17,060 --> 00:10:23,029
set a value<font color="#E5E5E5"> to be a certain variable to</font>

230
00:10:20,630 --> 00:10:25,130
<font color="#CCCCCC">be a certain value for a particular wall</font>

231
00:10:23,029 --> 00:10:27,170
anytime that raw logs in so for instance

232
00:10:25,130 --> 00:10:29,089
if<font color="#E5E5E5"> you've got a kind of a power user and</font>

233
00:10:27,170 --> 00:10:31,490
<font color="#E5E5E5">you</font><font color="#CCCCCC"> want to give them a</font><font color="#E5E5E5"> higher work mem</font>

234
00:10:29,089 --> 00:10:33,920
<font color="#CCCCCC">you could do</font><font color="#E5E5E5"> that so every time they log</font>

235
00:10:31,490 --> 00:10:35,750
in they get a higher work<font color="#E5E5E5"> mem even than</font>

236
00:10:33,920 --> 00:10:40,250
the one that's set<font color="#CCCCCC"> in for everyone</font><font color="#E5E5E5"> else</font>

237
00:10:35,750 --> 00:10:43,160
in Postgres<font color="#CCCCCC"> equal outcomes the first</font>

238
00:10:40,250 --> 00:10:44,779
<font color="#CCCCCC">session</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> change configuration</font>

239
00:10:43,160 --> 00:10:46,459
<font color="#E5E5E5">variables in procession using the set</font>

240
00:10:44,779 --> 00:10:48,920
command<font color="#E5E5E5"> that's kind</font><font color="#CCCCCC"> of the primary</font>

241
00:10:46,459 --> 00:10:51,290
<font color="#E5E5E5">method</font><font color="#CCCCCC"> reset will change it back</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> what</font>

242
00:10:48,920 --> 00:10:52,180
<font color="#E5E5E5">it was</font><font color="#CCCCCC"> originally when you started</font><font color="#E5E5E5"> sure</font>

243
00:10:51,290 --> 00:10:54,520
we'll<font color="#CCCCCC"> just show you</font>

244
00:10:52,180 --> 00:10:56,620
the value is but again there's five

245
00:10:54,520 --> 00:10:58,569
different<font color="#E5E5E5"> ways here that you can see and</font>

246
00:10:56,620 --> 00:11:00,760
<font color="#E5E5E5">change these things there's a view</font>

247
00:10:58,570 --> 00:11:03,310
called<font color="#E5E5E5"> PG settings which will expose all</font>

248
00:11:00,760 --> 00:11:04,839
<font color="#CCCCCC">of that you can select from that view to</font>

249
00:11:03,310 --> 00:11:08,290
look<font color="#E5E5E5"> at the values you can actually</font>

250
00:11:04,839 --> 00:11:11,589
<font color="#E5E5E5">update that view in order</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> change the</font>

251
00:11:08,290 --> 00:11:13,120
values but just know that<font color="#CCCCCC"> if</font><font color="#E5E5E5"> you do that</font>

252
00:11:11,589 --> 00:11:16,270
<font color="#E5E5E5">that is</font><font color="#CCCCCC"> just for the length of your</font>

253
00:11:13,120 --> 00:11:18,520
<font color="#E5E5E5">session as soon as you log out that goes</font>

254
00:11:16,270 --> 00:11:20,920
away<font color="#E5E5E5"> nobody else sees the same changes</font>

255
00:11:18,520 --> 00:11:25,270
and that in and of itself<font color="#E5E5E5"> can be</font><font color="#CCCCCC"> very</font>

256
00:11:20,920 --> 00:11:26,680
useful<font color="#E5E5E5"> there's also a function called</font>

257
00:11:25,270 --> 00:11:29,980
current setting which will give you a

258
00:11:26,680 --> 00:11:31,689
<font color="#CCCCCC">specific value for a specific variable</font>

259
00:11:29,980 --> 00:11:34,360
<font color="#E5E5E5">this can be really useful when</font><font color="#CCCCCC"> you're</font>

260
00:11:31,690 --> 00:11:35,770
<font color="#CCCCCC">doing</font><font color="#E5E5E5"> very scripting it could also be</font>

261
00:11:34,360 --> 00:11:38,680
useful<font color="#E5E5E5"> if you have like a</font><font color="#CCCCCC"> custom</font>

262
00:11:35,770 --> 00:11:40,420
variable<font color="#E5E5E5"> that you want to add to the</font>

263
00:11:38,680 --> 00:11:43,959
environment<font color="#E5E5E5"> and make use of in</font><font color="#CCCCCC"> your own</font>

264
00:11:40,420 --> 00:11:45,910
functions and then this set configures a

265
00:11:43,959 --> 00:11:52,930
way that you can<font color="#E5E5E5"> explicitly set a</font>

266
00:11:45,910 --> 00:11:54,790
<font color="#E5E5E5">variable using a function okay in terms</font>

267
00:11:52,930 --> 00:11:57,819
<font color="#E5E5E5">of the actual settings</font><font color="#CCCCCC"> for these</font>

268
00:11:54,790 --> 00:12:00,189
configuration<font color="#CCCCCC"> variables</font><font color="#E5E5E5"> there people do</font>

269
00:11:57,820 --> 00:12:02,050
<font color="#CCCCCC">three-hour tutorials on this that topic</font>

270
00:12:00,190 --> 00:12:04,300
alone so there's no way<font color="#E5E5E5"> to cover all</font>

271
00:12:02,050 --> 00:12:05,500
that<font color="#E5E5E5"> used to try and cover more of it in</font>

272
00:12:04,300 --> 00:12:08,290
this talk<font color="#E5E5E5"> and then I was running</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> of</font>

273
00:12:05,500 --> 00:12:10,209
<font color="#E5E5E5">time so really just keeping it</font><font color="#CCCCCC"> to a</font>

274
00:12:08,290 --> 00:12:12,579
<font color="#E5E5E5">couple of slides</font><font color="#CCCCCC"> these are kind of the</font>

275
00:12:10,209 --> 00:12:15,459
<font color="#CCCCCC">ones that you'll almost certainly</font><font color="#E5E5E5"> want</font>

276
00:12:12,580 --> 00:12:16,900
<font color="#E5E5E5">to at least look at the first one being</font>

277
00:12:15,459 --> 00:12:20,770
<font color="#E5E5E5">listen address is depending on the</font>

278
00:12:16,900 --> 00:12:22,390
<font color="#CCCCCC">distribution you're on that may be set</font>

279
00:12:20,770 --> 00:12:24,490
to something<font color="#E5E5E5"> like localhost if it's set</font>

280
00:12:22,390 --> 00:12:27,130
to<font color="#CCCCCC"> local as no one can connect</font><font color="#E5E5E5"> from off</font>

281
00:12:24,490 --> 00:12:29,650
your<font color="#CCCCCC"> box so your</font><font color="#E5E5E5"> your client may not</font><font color="#CCCCCC"> be</font>

282
00:12:27,130 --> 00:12:31,450
able<font color="#E5E5E5"> to connect until you change that</font><font color="#CCCCCC"> to</font>

283
00:12:29,650 --> 00:12:33,480
use either<font color="#E5E5E5"> like</font><font color="#CCCCCC"> asterisk which will mean</font>

284
00:12:31,450 --> 00:12:36,790
all your interfaces or a specific

285
00:12:33,480 --> 00:12:38,170
<font color="#E5E5E5">interface on the host so that's</font>

286
00:12:36,790 --> 00:12:39,939
<font color="#CCCCCC">something you probably</font><font color="#E5E5E5"> are going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> want</font>

287
00:12:38,170 --> 00:12:42,209
<font color="#E5E5E5">to change you might not you might</font><font color="#CCCCCC"> only</font>

288
00:12:39,940 --> 00:12:48,329
want<font color="#CCCCCC"> allow connections from low</font><font color="#E5E5E5"> closed</font>

289
00:12:42,209 --> 00:12:51,010
<font color="#E5E5E5">max connections defaults to</font><font color="#CCCCCC"> 100 this one</font>

290
00:12:48,329 --> 00:12:52,149
maybe I'll say about this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> that don't</font>

291
00:12:51,010 --> 00:12:54,790
make<font color="#E5E5E5"> that any higher than you really</font>

292
00:12:52,149 --> 00:12:57,160
need<font color="#E5E5E5"> it</font><font color="#CCCCCC"> and if you</font><font color="#E5E5E5"> find yourself wanting</font>

293
00:12:54,790 --> 00:12:58,360
<font color="#E5E5E5">to make it like 500 or a thousand then</font>

294
00:12:57,160 --> 00:13:01,569
you should be looking<font color="#E5E5E5"> at a connection</font>

295
00:12:58,360 --> 00:13:04,690
<font color="#CCCCCC">Pooler generally</font>

296
00:13:01,570 --> 00:13:06,400
speaking kind of rule<font color="#CCCCCC"> of thumb</font><font color="#E5E5E5"> you don't</font>

297
00:13:04,690 --> 00:13:09,310
want to have more<font color="#E5E5E5"> than about two or</font>

298
00:13:06,400 --> 00:13:12,220
two-and-a-half times<font color="#E5E5E5"> the number</font><font color="#CCCCCC"> of CPUs</font>

299
00:13:09,310 --> 00:13:14,650
in<font color="#E5E5E5"> terms of actively running connections</font>

300
00:13:12,220 --> 00:13:16,300
now<font color="#E5E5E5"> you can have a hundred open</font>

301
00:13:14,650 --> 00:13:18,490
connections<font color="#CCCCCC"> 80 of which are</font><font color="#E5E5E5"> doing</font>

302
00:13:16,300 --> 00:13:20,740
nothing<font color="#CCCCCC"> and</font><font color="#E5E5E5"> 20</font><font color="#CCCCCC"> of that</font><font color="#E5E5E5"> are active</font><font color="#CCCCCC"> at</font><font color="#E5E5E5"> any</font>

303
00:13:18,490 --> 00:13:22,150
given<font color="#CCCCCC"> time I'd be alright</font><font color="#E5E5E5"> but I still</font>

304
00:13:20,740 --> 00:13:24,400
wouldn't<font color="#E5E5E5"> leave a thousand open</font>

305
00:13:22,150 --> 00:13:26,319
connections<font color="#CCCCCC"> even if if</font><font color="#E5E5E5"> only 20</font><font color="#CCCCCC"> of them</font>

306
00:13:24,400 --> 00:13:28,030
were<font color="#E5E5E5"> active because those all those</font>

307
00:13:26,320 --> 00:13:30,820
<font color="#E5E5E5">connections use round to a certain</font>

308
00:13:28,030 --> 00:13:32,560
degree<font color="#E5E5E5"> they use resources there's they</font>

309
00:13:30,820 --> 00:13:33,880
add they increase the size of certain

310
00:13:32,560 --> 00:13:34,510
tables<font color="#CCCCCC"> in</font><font color="#E5E5E5"> shared memory</font><font color="#CCCCCC"> that post</font>

311
00:13:33,880 --> 00:13:39,100
<font color="#CCCCCC">Equestria's</font>

312
00:13:34,510 --> 00:13:43,990
so generally make that setting as well

313
00:13:39,100 --> 00:13:45,550
<font color="#CCCCCC">as works for</font><font color="#E5E5E5"> your environment shared</font>

314
00:13:43,990 --> 00:13:48,010
buffers this is the one<font color="#E5E5E5"> that virtually I</font>

315
00:13:45,550 --> 00:13:49,810
think everyone is probably<font color="#E5E5E5"> heard of this</font>

316
00:13:48,010 --> 00:13:52,060
post<font color="#E5E5E5"> quest shared buffers is what's used</font>

317
00:13:49,810 --> 00:13:56,290
<font color="#E5E5E5">for caching data once it's been read</font>

318
00:13:52,060 --> 00:13:58,119
from disk there<font color="#CCCCCC"> is a general formula</font>

319
00:13:56,290 --> 00:14:00,329
<font color="#E5E5E5">that you use somewhere between a quarter</font>

320
00:13:58,120 --> 00:14:04,230
<font color="#E5E5E5">and a half of RAM for</font><font color="#CCCCCC"> shared buffers but</font>

321
00:14:00,330 --> 00:14:06,790
number one that's<font color="#E5E5E5"> a bit old guidance and</font>

322
00:14:04,230 --> 00:14:08,980
number two it's<font color="#CCCCCC"> very dependent</font><font color="#E5E5E5"> on your</font>

323
00:14:06,790 --> 00:14:11,199
situation<font color="#CCCCCC"> if you've got a Java app</font>

324
00:14:08,980 --> 00:14:12,790
running<font color="#E5E5E5"> on the same host as Postgres</font>

325
00:14:11,200 --> 00:14:17,440
maybe that's not<font color="#E5E5E5"> a good</font><font color="#CCCCCC"> thing to do</font>

326
00:14:12,790 --> 00:14:19,420
because you<font color="#E5E5E5"> need more room for Java kind</font>

327
00:14:17,440 --> 00:14:21,550
of the best thing there is<font color="#E5E5E5"> I could say</font>

328
00:14:19,420 --> 00:14:27,010
<font color="#CCCCCC">is that is to test different settings</font>

329
00:14:21,550 --> 00:14:28,900
for<font color="#E5E5E5"> your workload and your data if if</font>

330
00:14:27,010 --> 00:14:31,000
your<font color="#CCCCCC"> database is fairly small</font><font color="#E5E5E5"> or if</font>

331
00:14:28,900 --> 00:14:33,579
<font color="#E5E5E5">you're working set the things that are</font>

332
00:14:31,000 --> 00:14:35,770
commonly<font color="#E5E5E5"> being accessed</font><font color="#CCCCCC"> it's small</font>

333
00:14:33,580 --> 00:14:37,150
<font color="#CCCCCC">enough to</font><font color="#E5E5E5"> fit in that value then</font>

334
00:14:35,770 --> 00:14:39,189
everything<font color="#E5E5E5"> is cached all the time and</font>

335
00:14:37,150 --> 00:14:42,699
that will make your<font color="#CCCCCC"> Postgres run really</font>

336
00:14:39,190 --> 00:14:44,350
fast<font color="#E5E5E5"> but if your</font><font color="#CCCCCC"> database is large and</font>

337
00:14:42,700 --> 00:14:46,630
<font color="#E5E5E5">there's no chance</font><font color="#CCCCCC"> it's ever gonna fit in</font>

338
00:14:44,350 --> 00:14:48,280
<font color="#E5E5E5">shared buffers merely making sure buffer</font>

339
00:14:46,630 --> 00:14:50,439
is big enough when it doesn't<font color="#CCCCCC"> all fit</font>

340
00:14:48,280 --> 00:14:53,020
anyway<font color="#E5E5E5"> it's probably</font><font color="#CCCCCC"> not gonna help it</font>

341
00:14:50,440 --> 00:14:54,580
may even<font color="#E5E5E5"> hurt so that's something that</font>

342
00:14:53,020 --> 00:14:59,650
<font color="#E5E5E5">you</font><font color="#CCCCCC"> really</font><font color="#E5E5E5"> want to test with with your</font>

343
00:14:54,580 --> 00:15:01,180
own<font color="#E5E5E5"> workload work</font><font color="#CCCCCC"> mem now</font><font color="#E5E5E5"> shared buffers</font>

344
00:14:59,650 --> 00:15:03,760
is kind<font color="#CCCCCC"> of a system-wide this is</font>

345
00:15:01,180 --> 00:15:05,620
allocated once<font color="#CCCCCC"> and it has that actually</font>

346
00:15:03,760 --> 00:15:07,180
confuses people<font color="#CCCCCC"> as when you look at top</font>

347
00:15:05,620 --> 00:15:10,570
and<font color="#CCCCCC"> you see all these post past sessions</font>

348
00:15:07,180 --> 00:15:14,020
<font color="#E5E5E5">they each look like they're using that</font>

349
00:15:10,570 --> 00:15:15,520
same amount<font color="#E5E5E5"> of shared memory while</font>

350
00:15:14,020 --> 00:15:18,610
they're all are<font color="#E5E5E5"> using the same pool so</font>

351
00:15:15,520 --> 00:15:19,770
it's not actually<font color="#E5E5E5"> duplicated work mam is</font>

352
00:15:18,610 --> 00:15:22,390
something that<font color="#E5E5E5"> has used</font>

353
00:15:19,770 --> 00:15:25,750
<font color="#E5E5E5">potentially</font><font color="#CCCCCC"> multiple times within a</font>

354
00:15:22,390 --> 00:15:28,540
given<font color="#E5E5E5"> query post special use</font><font color="#CCCCCC"> workmen</font><font color="#E5E5E5"> to</font>

355
00:15:25,750 --> 00:15:31,180
decide<font color="#E5E5E5"> to build hash tables basically so</font>

356
00:15:28,540 --> 00:15:32,800
if you've got aggregation going on you

357
00:15:31,180 --> 00:15:36,339
might have hash aggregates if you've got

358
00:15:32,800 --> 00:15:38,680
<font color="#CCCCCC">hashed joins going on there maybe hash</font>

359
00:15:36,339 --> 00:15:41,440
tables and memory for<font color="#E5E5E5"> that if you've got</font>

360
00:15:38,680 --> 00:15:43,359
sorts<font color="#CCCCCC"> going on there</font><font color="#E5E5E5"> maybe memory usage</font>

361
00:15:41,440 --> 00:15:45,630
for<font color="#CCCCCC"> that so</font><font color="#E5E5E5"> you can have</font><font color="#CCCCCC"> multiple</font><font color="#E5E5E5"> time</font>

362
00:15:43,360 --> 00:15:48,520
to work<font color="#CCCCCC"> mem just within a single</font><font color="#E5E5E5"> session</font>

363
00:15:45,630 --> 00:15:51,640
<font color="#E5E5E5">so what you don't want</font><font color="#CCCCCC"> to do is set that</font>

364
00:15:48,520 --> 00:15:54,699
<font color="#E5E5E5">to like you know a gigabyte and you've</font>

365
00:15:51,640 --> 00:15:56,770
got<font color="#E5E5E5"> 20 active sessions and and they're</font>

366
00:15:54,700 --> 00:15:59,980
all doing big queries and now suddenly

367
00:15:56,770 --> 00:16:02,319
<font color="#E5E5E5">you're you know Denali</font><font color="#CCCCCC"> - now of</font>

368
00:15:59,980 --> 00:16:04,450
servicing yourself because you're you're

369
00:16:02,320 --> 00:16:07,000
driving the server and<font color="#E5E5E5"> the swamp right</font>

370
00:16:04,450 --> 00:16:10,120
so this you<font color="#CCCCCC"> know 4 megabytes is the</font>

371
00:16:07,000 --> 00:16:11,620
default<font color="#E5E5E5"> that's really small again</font>

372
00:16:10,120 --> 00:16:13,390
<font color="#E5E5E5">depending on your workload</font><font color="#CCCCCC"> that might be</font>

373
00:16:11,620 --> 00:16:16,030
<font color="#E5E5E5">just fine if you're</font><font color="#CCCCCC"> doing OLTP type</font>

374
00:16:13,390 --> 00:16:17,350
stuff you might be<font color="#E5E5E5"> just fine for some</font>

375
00:16:16,030 --> 00:16:19,270
workloads you might benefit by

376
00:16:17,350 --> 00:16:21,670
<font color="#E5E5E5">increasing I would just be careful</font><font color="#CCCCCC"> about</font>

377
00:16:19,270 --> 00:16:23,530
<font color="#CCCCCC">doing that and then and again</font><font color="#E5E5E5"> as I</font>

378
00:16:21,670 --> 00:16:26,199
mentioned<font color="#E5E5E5"> earlier you might bind that</font>

379
00:16:23,530 --> 00:16:28,740
change to a specific user<font color="#CCCCCC"> or specific</font>

380
00:16:26,200 --> 00:16:31,540
database and<font color="#E5E5E5"> not have it be global</font>

381
00:16:28,740 --> 00:16:33,970
<font color="#E5E5E5">affective cache size is kind</font><font color="#CCCCCC"> of a hint</font>

382
00:16:31,540 --> 00:16:36,099
for the<font color="#E5E5E5"> planner</font><font color="#CCCCCC"> the general guidance</font><font color="#E5E5E5"> on</font>

383
00:16:33,970 --> 00:16:39,160
that is<font color="#E5E5E5"> to set</font><font color="#CCCCCC"> it basically equal to the</font>

384
00:16:36,100 --> 00:16:41,880
amount<font color="#E5E5E5"> of RAM that is used by</font><font color="#CCCCCC"> the OS for</font>

385
00:16:39,160 --> 00:16:44,380
buffering files<font color="#E5E5E5"> plus shared buffers</font><font color="#CCCCCC"> you</font>

386
00:16:41,880 --> 00:16:47,320
<font color="#CCCCCC">know again that</font><font color="#E5E5E5"> tends to be something</font>

387
00:16:44,380 --> 00:16:51,100
<font color="#E5E5E5">like</font><font color="#CCCCCC"> 1/2</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> 3/4</font><font color="#E5E5E5"> around</font><font color="#CCCCCC"> water</font><font color="#E5E5E5"> cases but</font>

388
00:16:47,320 --> 00:16:52,510
<font color="#CCCCCC">you know your mileage may vary</font><font color="#E5E5E5"> and then</font>

389
00:16:51,100 --> 00:16:54,900
finally I'll<font color="#CCCCCC"> talk about this random page</font>

390
00:16:52,510 --> 00:16:57,930
cost this number<font color="#E5E5E5"> for basically this is</font>

391
00:16:54,900 --> 00:16:59,699
<font color="#E5E5E5">Thursday there's a sequential page cause</font>

392
00:16:57,930 --> 00:17:02,219
<font color="#E5E5E5">random page</font><font color="#CCCCCC"> costs</font><font color="#E5E5E5"> in the sequential page</font>

393
00:16:59,700 --> 00:17:05,939
<font color="#E5E5E5">cost defaults to one random defaults the</font>

394
00:17:02,220 --> 00:17:08,790
<font color="#E5E5E5">four and the ideas on average it's about</font>

395
00:17:05,939 --> 00:17:12,990
four times<font color="#CCCCCC"> as expensive</font><font color="#E5E5E5"> to read</font><font color="#CCCCCC"> randomly</font>

396
00:17:08,790 --> 00:17:15,178
than it is sequentially<font color="#E5E5E5"> and that was</font>

397
00:17:12,990 --> 00:17:16,679
kind<font color="#CCCCCC"> of developed I</font><font color="#E5E5E5"> think Tom Lane</font>

398
00:17:15,179 --> 00:17:18,839
actually came<font color="#CCCCCC"> up with that number</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> he</font>

399
00:17:16,679 --> 00:17:23,010
probably came up with it<font color="#CCCCCC"> about 15</font><font color="#E5E5E5"> years</font>

400
00:17:18,839 --> 00:17:26,250
<font color="#E5E5E5">ago on</font><font color="#CCCCCC"> Hardware of the day so I find</font>

401
00:17:23,010 --> 00:17:28,319
often that<font color="#E5E5E5"> number in real life workloads</font>

402
00:17:26,250 --> 00:17:31,320
<font color="#CCCCCC">that number is</font><font color="#E5E5E5"> too</font><font color="#CCCCCC"> high and</font><font color="#E5E5E5"> it drives</font>

403
00:17:28,319 --> 00:17:33,300
bad plans<font color="#CCCCCC"> I</font><font color="#E5E5E5"> usually end up setting</font><font color="#CCCCCC"> that</font>

404
00:17:31,320 --> 00:17:34,980
down to two<font color="#CCCCCC"> and</font><font color="#E5E5E5"> sometimes a little lower</font>

405
00:17:33,300 --> 00:17:37,080
you wouldn't want ever<font color="#E5E5E5"> to be below</font>

406
00:17:34,980 --> 00:17:38,880
sequential page<font color="#E5E5E5"> cost because well</font><font color="#CCCCCC"> that</font>

407
00:17:37,080 --> 00:17:44,189
wouldn't<font color="#E5E5E5"> make any</font><font color="#CCCCCC"> sense and I have seen</font>

408
00:17:38,880 --> 00:17:47,850
<font color="#CCCCCC">people try and do that and</font><font color="#E5E5E5"> then finally</font>

409
00:17:44,190 --> 00:17:50,970
<font color="#CCCCCC">final bit of</font><font color="#E5E5E5"> push</font><font color="#CCCCCC"> Gustave</font><font color="#E5E5E5"> you probably</font>

410
00:17:47,850 --> 00:17:52,469
want to change your logline prefix the

411
00:17:50,970 --> 00:17:53,790
default does not give all that much

412
00:17:52,470 --> 00:17:55,770
<font color="#CCCCCC">information in the post</font><font color="#E5E5E5"> request log</font>

413
00:17:53,790 --> 00:17:57,990
<font color="#E5E5E5">there's a lot of</font><font color="#CCCCCC"> information available</font>

414
00:17:55,770 --> 00:18:01,500
<font color="#E5E5E5">at the very least you're probably gonna</font>

415
00:17:57,990 --> 00:18:03,900
<font color="#CCCCCC">want to have a timestamp so by changing</font>

416
00:18:01,500 --> 00:18:08,100
this<font color="#E5E5E5"> you'll get these additional items</font>

417
00:18:03,900 --> 00:18:11,720
added appended to the prefix to the<font color="#CCCCCC"> to</font>

418
00:18:08,100 --> 00:18:11,719
whatever<font color="#CCCCCC"> gets logged in the Postgres log</font>

419
00:18:13,370 --> 00:18:19,250
any questions about configuration

420
00:18:16,200 --> 00:18:19,250
settings before<font color="#E5E5E5"> everyone</font>

421
00:18:30,970 --> 00:18:35,960
so<font color="#CCCCCC"> you're asking a work ma'am will get</font>

422
00:18:33,920 --> 00:18:45,920
released once wherever you're doing

423
00:18:35,960 --> 00:18:47,420
<font color="#E5E5E5">finishes the memory structures that</font><font color="#CCCCCC"> are</font>

424
00:18:45,920 --> 00:18:50,110
using<font color="#CCCCCC"> that memory definitely get</font>

425
00:18:47,420 --> 00:18:53,240
released they get they get flushed

426
00:18:50,110 --> 00:18:55,490
<font color="#CCCCCC">Postgres has kind of a its own native</font>

427
00:18:53,240 --> 00:18:58,370
garbage collection so that<font color="#CCCCCC"> they will go</font>

428
00:18:55,490 --> 00:19:00,710
away whether the OS actually releases it

429
00:18:58,370 --> 00:19:05,330
from the process immediately<font color="#CCCCCC"> I</font><font color="#E5E5E5"> don't</font>

430
00:19:00,710 --> 00:19:10,610
know it'll<font color="#E5E5E5"> shrink back yeah it's not</font>

431
00:19:05,330 --> 00:19:11,720
it's<font color="#E5E5E5"> not holding</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> to that</font><font color="#CCCCCC"> okay so now</font>

432
00:19:10,610 --> 00:19:13,610
I'm<font color="#E5E5E5"> going to go on</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the host based</font>

433
00:19:11,720 --> 00:19:15,530
authentication file this is another

434
00:19:13,610 --> 00:19:18,110
critical file<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the configuration of</font>

435
00:19:15,530 --> 00:19:20,360
<font color="#CCCCCC">Postgres it's</font><font color="#E5E5E5"> usually determine who can</font>

436
00:19:18,110 --> 00:19:21,909
<font color="#CCCCCC">access the system</font><font color="#E5E5E5"> they'll all like to</font>

437
00:19:20,360 --> 00:19:24,639
think<font color="#E5E5E5"> of this files it's kind of like</font>

438
00:19:21,910 --> 00:19:28,640
the<font color="#CCCCCC"> sort</font><font color="#E5E5E5"> of firewall rules almost</font>

439
00:19:24,640 --> 00:19:30,680
<font color="#E5E5E5">basically you're</font><font color="#CCCCCC"> going to say</font><font color="#E5E5E5"> what</font><font color="#CCCCCC"> a</font>

440
00:19:28,640 --> 00:19:33,290
particular<font color="#CCCCCC"> client</font><font color="#E5E5E5"> tries to connect if</font>

441
00:19:30,680 --> 00:19:35,720
they match a set of rules on<font color="#E5E5E5"> this line</font>

442
00:19:33,290 --> 00:19:38,149
this<font color="#E5E5E5"> is the authentication scheme I'm</font>

443
00:19:35,720 --> 00:19:40,640
going to use including<font color="#CCCCCC"> you can have</font>

444
00:19:38,150 --> 00:19:42,740
reject as one<font color="#CCCCCC"> of those and the first</font>

445
00:19:40,640 --> 00:19:48,920
line<font color="#E5E5E5"> that fires is the one that gets</font>

446
00:19:42,740 --> 00:19:51,710
used so if the<font color="#CCCCCC"> person logging</font><font color="#E5E5E5"> in fails</font>

447
00:19:48,920 --> 00:19:53,000
to authenticate<font color="#E5E5E5"> on that line then they</font>

448
00:19:51,710 --> 00:19:55,190
just won't<font color="#E5E5E5"> be able</font><font color="#CCCCCC"> to log</font><font color="#E5E5E5"> into post</font>

449
00:19:53,000 --> 00:19:57,380
<font color="#CCCCCC">Chris systolic</font><font color="#E5E5E5"> it's going to move on try</font>

450
00:19:55,190 --> 00:19:58,190
<font color="#E5E5E5">another one I'll show you an example of</font>

451
00:19:57,380 --> 00:20:01,490
<font color="#E5E5E5">this in a minute</font>

452
00:19:58,190 --> 00:20:03,890
<font color="#E5E5E5">but basically this is which hosts can</font>

453
00:20:01,490 --> 00:20:07,190
<font color="#E5E5E5">connect</font><font color="#CCCCCC"> from how the client is</font>

454
00:20:03,890 --> 00:20:09,560
authenticated<font color="#E5E5E5"> the usernames that can be</font>

455
00:20:07,190 --> 00:20:11,900
used and which databases they can access

456
00:20:09,560 --> 00:20:13,490
<font color="#E5E5E5">I didn't mention this earlier but on a</font>

457
00:20:11,900 --> 00:20:14,660
lot of<font color="#E5E5E5"> my slides you'll also see I put</font>

458
00:20:13,490 --> 00:20:16,940
links right into the post<font color="#CCCCCC"> ghost</font>

459
00:20:14,660 --> 00:20:18,740
documentation for the topic<font color="#CCCCCC"> that I'm</font>

460
00:20:16,940 --> 00:20:20,780
talking about so again<font color="#E5E5E5"> when you download</font>

461
00:20:18,740 --> 00:20:25,190
the slides you can<font color="#E5E5E5"> drill in and get more</font>

462
00:20:20,780 --> 00:20:25,879
<font color="#E5E5E5">details on these things this file is</font>

463
00:20:25,190 --> 00:20:28,340
read when this

464
00:20:25,880 --> 00:20:30,380
<font color="#CCCCCC">studied</font><font color="#E5E5E5"> but it also needs to be</font><font color="#CCCCCC"> reloaded</font>

465
00:20:28,340 --> 00:20:33,350
<font color="#E5E5E5">for the changes</font><font color="#CCCCCC"> to take effect if you</font>

466
00:20:30,380 --> 00:20:35,900
<font color="#E5E5E5">edit it while Postgres is running the</font>

467
00:20:33,350 --> 00:20:38,990
first line matching the connection type

468
00:20:35,900 --> 00:20:40,640
the address<font color="#E5E5E5"> the database and the user is</font>

469
00:20:38,990 --> 00:20:43,280
what gets used<font color="#E5E5E5"> for the authentication</font>

470
00:20:40,640 --> 00:20:45,110
<font color="#CCCCCC">and if the line is picked</font><font color="#E5E5E5"> and the</font>

471
00:20:43,280 --> 00:20:47,030
authentication fails the access is

472
00:20:45,110 --> 00:20:54,350
denied and if no line matches

473
00:20:47,030 --> 00:20:56,840
importantly it fails<font color="#E5E5E5"> to</font><font color="#CCCCCC"> a deny so this</font>

474
00:20:54,350 --> 00:20:58,600
is what it looks<font color="#E5E5E5"> like the the basic you</font>

475
00:20:56,840 --> 00:21:01,100
know this is<font color="#E5E5E5"> right out</font><font color="#CCCCCC"> of the file the</font>

476
00:20:58,600 --> 00:21:04,189
the commented section that<font color="#CCCCCC"> shows the</font>

477
00:21:01,100 --> 00:21:06,350
examples I'm<font color="#E5E5E5"> going to cover a little bit</font>

478
00:21:04,190 --> 00:21:10,010
<font color="#E5E5E5">what each of these things are in slides</font>

479
00:21:06,350 --> 00:21:12,889
<font color="#E5E5E5">future slides but this is the default on</font>

480
00:21:10,010 --> 00:21:15,890
a<font color="#E5E5E5"> debian variant for Postgres</font><font color="#CCCCCC"> 10 and</font>

481
00:21:12,890 --> 00:21:19,130
this<font color="#CCCCCC"> is the</font><font color="#E5E5E5"> default for a well 7 install</font>

482
00:21:15,890 --> 00:21:21,080
and Postgres 10 so<font color="#E5E5E5"> you can see these</font>

483
00:21:19,130 --> 00:21:24,260
these<font color="#E5E5E5"> local connections are basically</font>

484
00:21:21,080 --> 00:21:27,889
for<font color="#E5E5E5"> local host and host means someone</font>

485
00:21:24,260 --> 00:21:34,129
connection connecting not from<font color="#E5E5E5"> local</font>

486
00:21:27,890 --> 00:21:38,270
<font color="#E5E5E5">host and no excuse me I should say these</font>

487
00:21:34,130 --> 00:21:41,420
local is actually a local<font color="#E5E5E5"> VST socket</font>

488
00:21:38,270 --> 00:21:43,850
connection<font color="#E5E5E5"> and a host is a TCP</font>

489
00:21:41,420 --> 00:21:48,410
connection<font color="#CCCCCC"> which can be</font><font color="#E5E5E5"> your from local</font>

490
00:21:43,850 --> 00:21:49,639
host or<font color="#CCCCCC"> it can be from</font><font color="#E5E5E5"> another host</font><font color="#CCCCCC"> as</font>

491
00:21:48,410 --> 00:21:52,070
you'll see here is on the<font color="#E5E5E5"> Debian</font>

492
00:21:49,640 --> 00:21:54,890
variants when you're logged in<font color="#CCCCCC"> using a</font>

493
00:21:52,070 --> 00:21:57,139
on the local machine using a<font color="#CCCCCC"> bsd socket</font>

494
00:21:54,890 --> 00:21:59,240
<font color="#E5E5E5">it actually</font><font color="#CCCCCC"> uses peer and</font><font color="#E5E5E5"> the same thing</font>

495
00:21:57,140 --> 00:22:01,700
<font color="#E5E5E5">on Red Hat which effectively means it</font>

496
00:21:59,240 --> 00:22:03,530
uses<font color="#CCCCCC"> your</font><font color="#E5E5E5"> or less authentication so</font>

497
00:22:01,700 --> 00:22:06,020
<font color="#E5E5E5">Postgres itself</font><font color="#CCCCCC"> won't house by default</font>

498
00:22:03,530 --> 00:22:07,670
isn't<font color="#E5E5E5"> going to ask for a password if you</font>

499
00:22:06,020 --> 00:22:09,590
<font color="#CCCCCC">log</font><font color="#E5E5E5"> in on one of these systems from the</font>

500
00:22:07,670 --> 00:22:16,010
same machine something<font color="#E5E5E5"> you might want</font><font color="#CCCCCC"> to</font>

501
00:22:09,590 --> 00:22:18,199
<font color="#E5E5E5">change so first of all the connection</font>

502
00:22:16,010 --> 00:22:21,170
type local<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the UNIX domain socket</font>

503
00:22:18,200 --> 00:22:24,500
host can either be a<font color="#CCCCCC"> plain or an SSL</font>

504
00:22:21,170 --> 00:22:28,670
encrypted socket<font color="#E5E5E5"> if you say host</font><font color="#CCCCCC"> SSL</font>

505
00:22:24,500 --> 00:22:32,330
that means this particular line in<font color="#CCCCCC"> HBA</font>

506
00:22:28,670 --> 00:22:32,740
<font color="#E5E5E5">cough is requiring SSL if you say host</font>

507
00:22:32,330 --> 00:22:37,449
<font color="#E5E5E5">no</font>

508
00:22:32,740 --> 00:22:43,059
<font color="#E5E5E5">SSL is requiring it not to be SSL in</font>

509
00:22:37,450 --> 00:22:46,029
terms of whether or<font color="#E5E5E5"> not it matches the</font>

510
00:22:43,059 --> 00:22:48,190
database column<font color="#E5E5E5"> you can</font><font color="#CCCCCC"> say all so you</font>

511
00:22:46,029 --> 00:22:51,039
can say that<font color="#CCCCCC"> this rule applies to all</font>

512
00:22:48,190 --> 00:22:53,380
databases<font color="#E5E5E5"> you can say the same user or</font>

513
00:22:51,039 --> 00:22:55,120
same<font color="#E5E5E5"> law which basically means if the</font>

514
00:22:53,380 --> 00:22:57,600
<font color="#E5E5E5">database name matches the user that's</font>

515
00:22:55,120 --> 00:23:01,360
<font color="#CCCCCC">logging in so it's kind of a shortcut</font>

516
00:22:57,600 --> 00:23:03,399
<font color="#E5E5E5">there's a replication because</font><font color="#CCCCCC"> the all</font>

517
00:23:01,360 --> 00:23:06,760
<font color="#CCCCCC">keyword does not actually</font><font color="#E5E5E5"> work</font><font color="#CCCCCC"> for the</font>

518
00:23:03,399 --> 00:23:09,719
<font color="#E5E5E5">replication user you can have to specify</font>

519
00:23:06,760 --> 00:23:12,279
<font color="#E5E5E5">a special rule for the replication user</font>

520
00:23:09,720 --> 00:23:14,529
and then you<font color="#E5E5E5"> can specify</font><font color="#CCCCCC"> specific</font>

521
00:23:12,279 --> 00:23:15,880
databases<font color="#CCCCCC"> either as a list or</font><font color="#E5E5E5"> as a list</font>

522
00:23:14,529 --> 00:23:21,370
<font color="#E5E5E5">that's inside of</font><font color="#CCCCCC"> the file that you</font>

523
00:23:15,880 --> 00:23:24,490
include the user is very similar<font color="#E5E5E5"> you've</font>

524
00:23:21,370 --> 00:23:26,379
got all<font color="#E5E5E5"> is a</font><font color="#CCCCCC"> wild-card for</font><font color="#E5E5E5"> any user</font>

525
00:23:24,490 --> 00:23:28,600
<font color="#E5E5E5">which should match</font><font color="#CCCCCC"> this rule</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> could</font>

526
00:23:26,380 --> 00:23:30,880
<font color="#E5E5E5">have a list of user names you can also</font>

527
00:23:28,600 --> 00:23:33,279
have this<font color="#CCCCCC"> + and a group name which means</font>

528
00:23:30,880 --> 00:23:35,230
<font color="#E5E5E5">any walls that are in that group will</font>

529
00:23:33,279 --> 00:23:36,610
match<font color="#E5E5E5"> and then you can have a list</font>

530
00:23:35,230 --> 00:23:42,789
that's in a separate file that gets

531
00:23:36,610 --> 00:23:45,879
<font color="#E5E5E5">included the addresses can either be an</font>

532
00:23:42,789 --> 00:23:48,908
IP address<font color="#E5E5E5"> with a CIDR mask or kind of a</font>

533
00:23:45,880 --> 00:23:52,390
traditional IP address<font color="#E5E5E5"> and a mask you</font>

534
00:23:48,909 --> 00:23:54,760
can<font color="#E5E5E5"> also specify a host name</font><font color="#CCCCCC"> there you</font>

535
00:23:52,390 --> 00:23:57,120
can say saying these keywords same host

536
00:23:54,760 --> 00:23:59,080
<font color="#E5E5E5">or same net which are again convenient</font>

537
00:23:57,120 --> 00:24:01,389
shortcuts if you only want to allow

538
00:23:59,080 --> 00:24:03,100
connections from<font color="#CCCCCC"> the same host</font><font color="#E5E5E5"> you can</font>

539
00:24:01,390 --> 00:24:04,929
use that<font color="#E5E5E5"> keyword or if you only want to</font>

540
00:24:03,100 --> 00:24:09,120
<font color="#E5E5E5">use allow connections from the same</font>

541
00:24:04,929 --> 00:24:09,120
subnet<font color="#CCCCCC"> you can use same net</font>

542
00:24:11,460 --> 00:24:16,179
the method is<font color="#E5E5E5"> the authentication</font><font color="#CCCCCC"> method</font>

543
00:24:14,320 --> 00:24:20,289
that's<font color="#CCCCCC"> going to be used when the rule is</font>

544
00:24:16,179 --> 00:24:23,769
hit so<font color="#CCCCCC"> Trust basically means just</font><font color="#E5E5E5"> let</font>

545
00:24:20,289 --> 00:24:27,389
the person in probably don't want that

546
00:24:23,769 --> 00:24:27,389
on<font color="#E5E5E5"> other than development environments</font>

547
00:24:27,690 --> 00:24:32,379
<font color="#E5E5E5">the kind of built-in methods starting</font><font color="#CCCCCC"> at</font>

548
00:24:31,090 --> 00:24:36,158
post post<font color="#CCCCCC"> ten there's something called</font>

549
00:24:32,379 --> 00:24:38,590
scram<font color="#E5E5E5"> sha-256 that's kind of not only</font>

550
00:24:36,159 --> 00:24:42,070
<font color="#E5E5E5">meant to replace md5 md5 has been there</font>

551
00:24:38,590 --> 00:24:44,830
essentially<font color="#E5E5E5"> forever</font><font color="#CCCCCC"> but these days in</font>

552
00:24:42,070 --> 00:24:48,129
law environments md5<font color="#CCCCCC"> is not considered</font>

553
00:24:44,830 --> 00:24:52,299
to<font color="#E5E5E5"> be secure and so therefore not</font>

554
00:24:48,129 --> 00:24:54,309
allowed the password method is<font color="#E5E5E5"> actually</font>

555
00:24:52,299 --> 00:24:56,139
I think<font color="#E5E5E5"> was been deprecated for a long</font>

556
00:24:54,309 --> 00:25:00,220
time and I think<font color="#E5E5E5"> it's actually been</font>

557
00:24:56,139 --> 00:25:03,928
<font color="#CCCCCC">removed in</font><font color="#E5E5E5"> ten or is it</font><font color="#CCCCCC"> eleven orders</font>

558
00:25:00,220 --> 00:25:06,730
removed<font color="#CCCCCC"> I think it was removed in ten</font>

559
00:25:03,929 --> 00:25:10,769
<font color="#CCCCCC">but in any case for new installs you</font>

560
00:25:06,730 --> 00:25:13,629
would probably<font color="#CCCCCC"> want to use</font><font color="#E5E5E5"> scram sha-256</font>

561
00:25:10,769 --> 00:25:15,369
<font color="#CCCCCC">it's a much</font><font color="#E5E5E5"> more secure</font><font color="#CCCCCC"> mechanism for</font>

562
00:25:13,629 --> 00:25:16,869
<font color="#E5E5E5">handling passwords if you're not going</font>

563
00:25:15,369 --> 00:25:18,759
to use<font color="#E5E5E5"> that you're going to use</font><font color="#CCCCCC"> probably</font>

564
00:25:16,869 --> 00:25:20,559
something like cert which is means I

565
00:25:18,759 --> 00:25:22,059
want<font color="#CCCCCC"> to use SSL certs</font><font color="#E5E5E5"> so I can</font>

566
00:25:20,559 --> 00:25:24,369
authenticate the server of<font color="#E5E5E5"> the client in</font>

567
00:25:22,059 --> 00:25:27,928
<font color="#E5E5E5">the client of the server</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> can also do</font>

568
00:25:24,369 --> 00:25:30,249
Peter Pan<font color="#CCCCCC"> or</font><font color="#E5E5E5"> I ident</font>

569
00:25:27,929 --> 00:25:32,649
<font color="#CCCCCC">don't</font><font color="#E5E5E5"> necessarily recommend those in</font>

570
00:25:30,249 --> 00:25:34,269
general probably<font color="#CCCCCC"> more recommended</font><font color="#E5E5E5"> if you</font>

571
00:25:32,649 --> 00:25:39,908
can use an<font color="#CCCCCC"> external system</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> something</font>

572
00:25:34,269 --> 00:25:43,029
like Kerberos or<font color="#CCCCCC"> SS PPI</font><font color="#E5E5E5"> Active Directory</font>

573
00:25:39,909 --> 00:25:48,159
LDAP<font color="#E5E5E5"> radius or you can explicitly say</font>

574
00:25:43,029 --> 00:25:50,789
<font color="#E5E5E5">our now this rule should</font><font color="#CCCCCC"> be rejected and</font>

575
00:25:48,159 --> 00:25:52,899
then each of those authentication

576
00:25:50,789 --> 00:25:54,480
<font color="#E5E5E5">methods might have some options</font>

577
00:25:52,899 --> 00:25:58,928
<font color="#CCCCCC">associated with them and they're just</font>

578
00:25:54,480 --> 00:26:01,179
<font color="#E5E5E5">listed as name equals value and it</font>

579
00:25:58,929 --> 00:26:03,999
depends on which method<font color="#E5E5E5"> which value know</font>

580
00:26:01,179 --> 00:26:08,019
which options are allowed<font color="#E5E5E5"> so now here's</font>

581
00:26:03,999 --> 00:26:10,840
an<font color="#CCCCCC"> example you know</font><font color="#E5E5E5"> again here I'm</font>

582
00:26:08,019 --> 00:26:13,210
saying from a UNIX domain socket on the

583
00:26:10,840 --> 00:26:18,009
same machine<font color="#CCCCCC"> I'm just going to trust</font><font color="#E5E5E5"> the</font>

584
00:26:13,210 --> 00:26:21,309
connection and from<font color="#E5E5E5"> localhost I'm also</font>

585
00:26:18,009 --> 00:26:22,940
going to<font color="#E5E5E5"> trust the connection but from</font>

586
00:26:21,309 --> 00:26:28,310
someone on<font color="#E5E5E5"> the same network I'm</font>

587
00:26:22,940 --> 00:26:30,110
require the scram sha-256<font color="#E5E5E5"> and someone</font>

588
00:26:28,310 --> 00:26:32,899
<font color="#E5E5E5">from this specific</font><font color="#CCCCCC"> network I'm going to</font>

589
00:26:30,110 --> 00:26:40,340
use LDAP<font color="#E5E5E5"> and so here's an example</font><font color="#CCCCCC"> of</font>

590
00:26:32,900 --> 00:26:59,150
options<font color="#CCCCCC"> associated with LDAP ok any</font>

591
00:26:40,340 --> 00:27:01,580
<font color="#CCCCCC">questions</font><font color="#E5E5E5"> on that</font><font color="#CCCCCC"> before I move on now</font>

592
00:26:59,150 --> 00:27:04,610
that's all controlled through<font color="#E5E5E5"> sequel</font>

593
00:27:01,580 --> 00:27:05,960
<font color="#CCCCCC">commands</font><font color="#E5E5E5"> yeah that's all</font><font color="#CCCCCC"> on sure</font><font color="#E5E5E5"> I mean</font>

594
00:27:04,610 --> 00:27:07,520
I've seen people script that sort<font color="#E5E5E5"> of</font>

595
00:27:05,960 --> 00:27:09,740
thing where they reach out<font color="#E5E5E5"> to LDAP and</font>

596
00:27:07,520 --> 00:27:11,510
then you know have a cron<font color="#CCCCCC"> job that</font><font color="#E5E5E5"> goes</font>

597
00:27:09,740 --> 00:27:14,480
out<font color="#CCCCCC"> to LDAP grab some stuff</font><font color="#E5E5E5"> and then</font>

598
00:27:11,510 --> 00:27:16,070
execute commands<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the database so it's</font>

599
00:27:14,480 --> 00:27:22,460
you can<font color="#E5E5E5"> kind of piece it</font><font color="#CCCCCC"> together</font>

600
00:27:16,070 --> 00:27:25,820
<font color="#E5E5E5">yourself but that's not</font><font color="#CCCCCC"> built-in ok so</font>

601
00:27:22,460 --> 00:27:27,620
now now<font color="#E5E5E5"> that we know how to set up all</font>

602
00:27:25,820 --> 00:27:29,419
the configuration files<font color="#CCCCCC"> request goes</font><font color="#E5E5E5"> the</font>

603
00:27:27,620 --> 00:27:30,919
<font color="#E5E5E5">next thing you got</font><font color="#CCCCCC"> to do is</font><font color="#E5E5E5"> actually</font>

604
00:27:29,420 --> 00:27:32,660
initialize the directory otherwise you

605
00:27:30,920 --> 00:27:35,120
don't<font color="#E5E5E5"> have a database to connect to you</font>

606
00:27:32,660 --> 00:27:38,240
can't came and start so again multiple

607
00:27:35,120 --> 00:27:41,870
ways to<font color="#E5E5E5"> do this the process is called</font>

608
00:27:38,240 --> 00:27:43,280
<font color="#E5E5E5">the net DB the binary that comes with</font>

609
00:27:41,870 --> 00:27:44,750
<font color="#E5E5E5">Postgres if you kind of do it yourself</font>

610
00:27:43,280 --> 00:27:47,000
<font color="#E5E5E5">isn't it</font><font color="#CCCCCC"> dB</font>

611
00:27:44,750 --> 00:27:48,580
you give it this - capital D<font color="#CCCCCC"> and our</font>

612
00:27:47,000 --> 00:27:51,620
<font color="#E5E5E5">data directory and basically it</font>

613
00:27:48,580 --> 00:27:54,379
initializes that directory as your post

614
00:27:51,620 --> 00:27:57,199
quest<font color="#E5E5E5"> data directory</font><font color="#CCCCCC"> that has to be</font>

615
00:27:54,380 --> 00:27:58,940
empty<font color="#E5E5E5"> if it's not empty</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> cannot exist</font>

616
00:27:57,200 --> 00:28:01,220
actually<font color="#CCCCCC"> look later for you but if it's</font>

617
00:27:58,940 --> 00:28:05,470
there and it's not empty<font color="#E5E5E5"> you'll get an</font>

618
00:28:01,220 --> 00:28:08,840
error on<font color="#E5E5E5"> what hat they provide a script</font>

619
00:28:05,470 --> 00:28:11,540
<font color="#CCCCCC">PostgreSQL tends setup</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> it DB's the</font>

620
00:28:08,840 --> 00:28:14,360
commands<font color="#E5E5E5"> you use that creates a cluster</font>

621
00:28:11,540 --> 00:28:16,340
and you<font color="#E5E5E5"> can</font><font color="#CCCCCC"> the config files all on a</font>

622
00:28:14,360 --> 00:28:18,800
data directory in this location<font color="#E5E5E5"> so this</font>

623
00:28:16,340 --> 00:28:22,280
<font color="#E5E5E5">is kind of a standard location</font><font color="#CCCCCC"> on a Red</font>

624
00:28:18,800 --> 00:28:27,800
Hat sent<font color="#E5E5E5"> to</font><font color="#CCCCCC"> us system</font><font color="#E5E5E5"> VAR layer PG</font>

625
00:28:22,280 --> 00:28:29,690
sequel version number data on a Debian

626
00:28:27,800 --> 00:28:30,350
<font color="#E5E5E5">based system they also provide a script</font>

627
00:28:29,690 --> 00:28:33,440
called<font color="#CCCCCC"> clean</font>

628
00:28:30,350 --> 00:28:35,719
cluster<font color="#E5E5E5"> DG underscore</font><font color="#CCCCCC"> quick cluster so</font>

629
00:28:33,440 --> 00:28:39,500
in this<font color="#E5E5E5"> case</font><font color="#CCCCCC"> PG underscore</font><font color="#E5E5E5"> create</font><font color="#CCCCCC"> cost</font>

630
00:28:35,720 --> 00:28:40,910
<font color="#E5E5E5">cluster 10 as my version and main is my</font>

631
00:28:39,500 --> 00:28:43,429
instance you can<font color="#CCCCCC"> actually have multiple</font>

632
00:28:40,910 --> 00:28:45,770
<font color="#E5E5E5">instances of Postgres of the same</font>

633
00:28:43,429 --> 00:28:49,039
<font color="#E5E5E5">version on the same host if you want</font>

634
00:28:45,770 --> 00:28:51,980
with with the Debian packages and so

635
00:28:49,039 --> 00:28:56,660
this is the way it's managed that will

636
00:28:51,980 --> 00:28:58,640
create a cluster<font color="#E5E5E5"> in viola</font><font color="#CCCCCC"> PostgreSQL</font><font color="#E5E5E5"> 10</font>

637
00:28:56,660 --> 00:29:01,400
main and that's the actual<font color="#E5E5E5"> data</font>

638
00:28:58,640 --> 00:29:05,690
directory but it will<font color="#E5E5E5"> put all the</font>

639
00:29:01,400 --> 00:29:09,980
configuration files under<font color="#CCCCCC"> et Cie so it</font>

640
00:29:05,690 --> 00:29:11,299
<font color="#CCCCCC">ctc PostgreSQL 10 main and if you had a</font>

641
00:29:09,980 --> 00:29:13,309
different<font color="#E5E5E5"> you know if you had another</font>

642
00:29:11,299 --> 00:29:15,200
instance that<font color="#E5E5E5"> wasn't called main it was</font>

643
00:29:13,309 --> 00:29:17,950
called base or<font color="#E5E5E5"> something else then that</font>

644
00:29:15,200 --> 00:29:17,950
<font color="#CCCCCC">would just</font><font color="#E5E5E5"> change</font>

645
00:29:18,909 --> 00:29:23,120
so once<font color="#E5E5E5"> Postgres has been the data</font>

646
00:29:21,530 --> 00:29:24,500
<font color="#CCCCCC">directories been initialized the next</font>

647
00:29:23,120 --> 00:29:27,590
thing you<font color="#E5E5E5"> going to do is want to start</font>

648
00:29:24,500 --> 00:29:30,470
<font color="#E5E5E5">Postgres again multiple ways</font><font color="#CCCCCC"> to do that</font>

649
00:29:27,590 --> 00:29:32,120
<font color="#CCCCCC">depending on what system</font><font color="#E5E5E5"> you're on just</font>

650
00:29:30,470 --> 00:29:33,919
this<font color="#E5E5E5"> is a kind of a special note if</font>

651
00:29:32,120 --> 00:29:36,110
again this is<font color="#E5E5E5"> kind of not something that</font>

652
00:29:33,919 --> 00:29:38,990
you would<font color="#E5E5E5"> do all the time but and you</font>

653
00:29:36,110 --> 00:29:40,789
probably<font color="#E5E5E5"> won't remember it if one thing</font>

654
00:29:38,990 --> 00:29:42,770
you remember<font color="#CCCCCC"> is</font><font color="#E5E5E5"> that it exists when you</font>

655
00:29:40,789 --> 00:29:45,440
need it<font color="#E5E5E5"> you'll never go look for it</font>

656
00:29:42,770 --> 00:29:47,720
<font color="#CCCCCC">there is a single user mode</font><font color="#E5E5E5"> so if you</font>

657
00:29:45,440 --> 00:29:49,610
use the postman's binary - - single

658
00:29:47,720 --> 00:29:51,860
<font color="#E5E5E5">pointer to a data directory and a</font>

659
00:29:49,610 --> 00:29:53,418
<font color="#E5E5E5">database name it'll</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> a post quest in</font>

660
00:29:51,860 --> 00:29:55,760
single user mode<font color="#CCCCCC"> and there are certain</font>

661
00:29:53,419 --> 00:29:58,340
things<font color="#E5E5E5"> that can really only</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> done in</font>

662
00:29:55,760 --> 00:29:59,629
single user mode<font color="#CCCCCC"> hopefully you will</font>

663
00:29:58,340 --> 00:30:01,209
<font color="#CCCCCC">never need that it typically means</font>

664
00:29:59,630 --> 00:30:06,470
<font color="#E5E5E5">something</font><font color="#CCCCCC"> has gone wrong</font>

665
00:30:01,210 --> 00:30:07,610
so yeah<font color="#E5E5E5"> you seen</font><font color="#CCCCCC"> people go to use and</font>

666
00:30:06,470 --> 00:30:09,440
years and years without<font color="#E5E5E5"> ever needing</font>

667
00:30:07,610 --> 00:30:11,240
that however<font color="#E5E5E5"> as a developer</font><font color="#CCCCCC"> or Postgres</font>

668
00:30:09,440 --> 00:30:14,360
sometimes<font color="#E5E5E5"> I screw things up myself</font>

669
00:30:11,240 --> 00:30:18,190
<font color="#CCCCCC">rather badly so that that's the way you</font>

670
00:30:14,360 --> 00:30:20,629
can rescue<font color="#CCCCCC"> a cluster in certain cases</font>

671
00:30:18,190 --> 00:30:22,640
<font color="#CCCCCC">again if you're gonna</font><font color="#E5E5E5"> manually start</font>

672
00:30:20,630 --> 00:30:24,890
post quest this PG<font color="#E5E5E5"> control binary that</font>

673
00:30:22,640 --> 00:30:26,539
comes with it<font color="#E5E5E5"> you give it the path to</font>

674
00:30:24,890 --> 00:30:27,970
the date of<font color="#CCCCCC"> your</font><font color="#E5E5E5"> artery you can</font>

675
00:30:26,539 --> 00:30:29,890
optionally give it a<font color="#E5E5E5"> log</font>

676
00:30:27,970 --> 00:30:32,410
after<font color="#E5E5E5"> you</font><font color="#CCCCCC"> helped to start and that will</font>

677
00:30:29,890 --> 00:30:34,990
start<font color="#E5E5E5"> Postgres but you probably want to</font>

678
00:30:32,410 --> 00:30:37,570
do if you're new to<font color="#CCCCCC"> post class and</font>

679
00:30:34,990 --> 00:30:39,850
you're probably running<font color="#CCCCCC"> rpms from your</font>

680
00:30:37,570 --> 00:30:41,530
<font color="#CCCCCC">distribution or dabs from</font><font color="#E5E5E5"> your</font>

681
00:30:39,850 --> 00:30:45,580
<font color="#CCCCCC">distribution as you probably</font><font color="#E5E5E5"> use</font><font color="#CCCCCC"> one of</font>

682
00:30:41,530 --> 00:30:47,680
these methods<font color="#CCCCCC"> and what had sex</font><font color="#E5E5E5"> you would</font>

683
00:30:45,580 --> 00:30:51,070
still the old service<font color="#E5E5E5"> style so you just</font>

684
00:30:47,680 --> 00:30:54,490
<font color="#E5E5E5">say service</font><font color="#CCCCCC"> PostgreSQL start wet hat</font>

685
00:30:51,070 --> 00:30:59,530
<font color="#E5E5E5">seven is system D so</font><font color="#CCCCCC"> that system</font>

686
00:30:54,490 --> 00:31:01,360
controls start<font color="#CCCCCC"> PostgreSQL -</font><font color="#E5E5E5"> ten debian</font>

687
00:30:59,530 --> 00:31:03,820
comes with its<font color="#E5E5E5"> own method for</font><font color="#CCCCCC"> doing</font>

688
00:31:01,360 --> 00:31:09,280
start but the recent<font color="#E5E5E5"> versions of Debian</font>

689
00:31:03,820 --> 00:31:11,200
also support the system D method so<font color="#E5E5E5"> you</font>

690
00:31:09,280 --> 00:31:14,500
can use either the script<font color="#E5E5E5"> that comes</font>

691
00:31:11,200 --> 00:31:18,280
with the Debian<font color="#E5E5E5"> distribution PG control</font>

692
00:31:14,500 --> 00:31:21,280
<font color="#E5E5E5">cluster so you say version</font><font color="#CCCCCC"> ten instance</font>

693
00:31:18,280 --> 00:31:22,750
<font color="#CCCCCC">main start you can also use a command</font>

694
00:31:21,280 --> 00:31:24,730
<font color="#CCCCCC">that's similar</font><font color="#E5E5E5"> to this one I</font><font color="#CCCCCC"> think it's</font>

695
00:31:22,750 --> 00:31:28,630
a little<font color="#E5E5E5"> different</font><font color="#CCCCCC"> in the name of the</font>

696
00:31:24,730 --> 00:31:32,340
<font color="#CCCCCC">service it's like PostgreSQL at ten -</font>

697
00:31:28,630 --> 00:31:32,340
main<font color="#E5E5E5"> I think something like that</font>

698
00:31:33,690 --> 00:31:41,890
stopping<font color="#E5E5E5"> Postgres if you're in single</font>

699
00:31:37,360 --> 00:31:44,590
user mode<font color="#E5E5E5"> control D will get you out if</font>

700
00:31:41,890 --> 00:31:47,200
you do<font color="#E5E5E5"> it manually PG control again very</font>

701
00:31:44,590 --> 00:31:49,000
similar<font color="#E5E5E5"> kind of as to the start command</font>

702
00:31:47,200 --> 00:31:49,960
<font color="#CCCCCC">you're just</font><font color="#E5E5E5"> gonna say stop the</font>

703
00:31:49,000 --> 00:31:53,770
difference<font color="#CCCCCC"> here is you're going to</font>

704
00:31:49,960 --> 00:31:56,920
<font color="#E5E5E5">specify a method and</font><font color="#CCCCCC"> I'll</font><font color="#E5E5E5"> I'll touch on</font>

705
00:31:53,770 --> 00:31:59,260
what those methods are<font color="#E5E5E5"> another slide but</font>

706
00:31:56,920 --> 00:32:01,390
that is an important<font color="#E5E5E5"> consideration and</font>

707
00:31:59,260 --> 00:32:02,980
that<font color="#CCCCCC"> also may be a reason why</font><font color="#E5E5E5"> you want</font>

708
00:32:01,390 --> 00:32:07,120
to<font color="#CCCCCC"> use PG control instead of one of the</font>

709
00:32:02,980 --> 00:32:09,100
services<font color="#E5E5E5"> in</font><font color="#CCCCCC"> that hat six the old service</font>

710
00:32:07,120 --> 00:32:11,679
model<font color="#CCCCCC"> is</font><font color="#E5E5E5"> just</font><font color="#CCCCCC"> service</font><font color="#E5E5E5"> Postgres stop</font>

711
00:32:09,100 --> 00:32:14,469
<font color="#E5E5E5">where that seven or</font><font color="#CCCCCC"> systemd</font><font color="#E5E5E5"> system</font>

712
00:32:11,680 --> 00:32:17,320
controls stop service<font color="#E5E5E5"> name Debbie and</font>

713
00:32:14,470 --> 00:32:22,990
<font color="#CCCCCC">bays same thing PG control cluster the</font>

714
00:32:17,320 --> 00:32:25,570
version the instance<font color="#CCCCCC"> in stop now</font><font color="#E5E5E5"> the</font>

715
00:32:22,990 --> 00:32:28,150
<font color="#E5E5E5">shutdown modes are somewhat important I</font>

716
00:32:25,570 --> 00:32:30,760
think<font color="#E5E5E5"> most of the distribution defaults</font>

717
00:32:28,150 --> 00:32:34,120
like the service files use this fast

718
00:32:30,760 --> 00:32:35,470
method<font color="#CCCCCC"> if</font><font color="#E5E5E5"> you use smart basically</font>

719
00:32:34,120 --> 00:32:35,809
<font color="#CCCCCC">Postgres is going to sit there waiting</font>

720
00:32:35,470 --> 00:32:39,739
<font color="#CCCCCC">for</font>

721
00:32:35,809 --> 00:32:44,119
the existing sessions have closed if<font color="#E5E5E5"> you</font>

722
00:32:39,739 --> 00:32:45,619
use fast<font color="#CCCCCC"> it's going to terminate all the</font>

723
00:32:44,119 --> 00:32:48,139
existing sessions but it's going<font color="#E5E5E5"> to do a</font>

724
00:32:45,619 --> 00:32:51,109
graceful shutdown of<font color="#E5E5E5"> Postgres and what</font>

725
00:32:48,139 --> 00:32:53,178
that means<font color="#E5E5E5"> is it preserves things in a</font>

726
00:32:51,109 --> 00:32:56,960
way that<font color="#E5E5E5"> when push goes comes back up it</font>

727
00:32:53,179 --> 00:32:59,749
doesn't think<font color="#E5E5E5"> that it crashed</font><font color="#CCCCCC"> more</font>

728
00:32:56,960 --> 00:33:01,489
important aspects<font color="#E5E5E5"> of</font><font color="#CCCCCC"> that is that this</font>

729
00:32:59,749 --> 00:33:03,889
<font color="#E5E5E5">miss</font><font color="#CCCCCC"> is constantly keeping stats about</font>

730
00:33:01,489 --> 00:33:06,619
<font color="#E5E5E5">what activities</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> going on but</font><font color="#CCCCCC"> that</font>

731
00:33:03,889 --> 00:33:09,158
staff<font color="#CCCCCC"> fall</font><font color="#E5E5E5"> is not crash</font><font color="#CCCCCC"> resistance so if</font>

732
00:33:06,619 --> 00:33:11,839
<font color="#E5E5E5">you do this last option immediate</font>

733
00:33:09,159 --> 00:33:14,119
basically as far<font color="#CCCCCC"> as process</font><font color="#E5E5E5"> is concerned</font>

734
00:33:11,839 --> 00:33:16,729
<font color="#E5E5E5">it just</font><font color="#CCCCCC"> fast or your server lost power</font>

735
00:33:14,119 --> 00:33:18,379
or<font color="#E5E5E5"> whatever and when it comes</font><font color="#CCCCCC"> back up it</font>

736
00:33:16,729 --> 00:33:20,869
has<font color="#CCCCCC"> to go</font><font color="#E5E5E5"> through a crash</font><font color="#CCCCCC"> recovery and</font>

737
00:33:18,379 --> 00:33:22,488
you<font color="#E5E5E5"> know lose your stats which means now</font>

738
00:33:20,869 --> 00:33:24,349
<font color="#E5E5E5">push Chris doesn't know when</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> auto</font>

739
00:33:22,489 --> 00:33:27,379
vacuum your tables<font color="#E5E5E5"> at least not until</font>

740
00:33:24,349 --> 00:33:29,960
<font color="#E5E5E5">just the statistics start building up</font>

741
00:33:27,379 --> 00:33:34,609
again<font color="#E5E5E5"> so you don't typically want to do</font>

742
00:33:29,960 --> 00:33:36,589
that no important aspect of<font color="#E5E5E5"> that</font><font color="#CCCCCC"> is you</font>

743
00:33:34,609 --> 00:33:37,908
<font color="#E5E5E5">know recently I ran into if you're</font>

744
00:33:36,589 --> 00:33:40,779
<font color="#CCCCCC">waiting push best for instance in a</font>

745
00:33:37,909 --> 00:33:44,139
container when the container goes down

746
00:33:40,779 --> 00:33:48,049
if you<font color="#CCCCCC"> don't arrange</font><font color="#E5E5E5"> things just right</font>

747
00:33:44,139 --> 00:33:49,459
<font color="#E5E5E5">Postgres effectively gets killed so now</font>

748
00:33:48,049 --> 00:33:51,559
when it<font color="#E5E5E5"> comes back</font><font color="#CCCCCC"> up let's say your</font>

749
00:33:49,460 --> 00:33:53,029
<font color="#E5E5E5">database is on persistent storage it's</font>

750
00:33:51,559 --> 00:34:00,440
doing crash recovery<font color="#E5E5E5"> just</font><font color="#CCCCCC"> like I just</font>

751
00:33:53,029 --> 00:34:03,499
<font color="#E5E5E5">described so now let's talk about how to</font>

752
00:34:00,440 --> 00:34:06,049
terminate<font color="#CCCCCC"> a particular session</font><font color="#E5E5E5"> if you're</font>

753
00:34:03,499 --> 00:34:09,079
in a if you in a<font color="#E5E5E5"> terminal you can find</font>

754
00:34:06,049 --> 00:34:11,210
<font color="#E5E5E5">the find the process using PS or</font>

755
00:34:09,079 --> 00:34:15,230
whatever go up for maybe<font color="#CCCCCC"> their database</font>

756
00:34:11,210 --> 00:34:17,349
name<font color="#E5E5E5"> once you find the</font><font color="#CCCCCC"> pit as in this</font>

757
00:34:15,230 --> 00:34:20,960
case<font color="#E5E5E5"> here you</font><font color="#CCCCCC"> can just you can say</font>

758
00:34:17,349 --> 00:34:22,879
killed sig term with that pit<font color="#E5E5E5"> and that</font>

759
00:34:20,960 --> 00:34:26,690
<font color="#E5E5E5">will actually</font><font color="#CCCCCC"> kill that back-end</font><font color="#E5E5E5"> process</font>

760
00:34:22,879 --> 00:34:28,159
<font color="#E5E5E5">there's a bit</font><font color="#CCCCCC"> anyway to do that</font><font color="#E5E5E5"> and this</font>

761
00:34:26,690 --> 00:34:30,710
<font color="#E5E5E5">is more</font><font color="#CCCCCC"> typical of</font><font color="#E5E5E5"> what you'd probably</font>

762
00:34:28,159 --> 00:34:32,450
want<font color="#CCCCCC"> to do on a running system</font><font color="#E5E5E5"> let's say</font>

763
00:34:30,710 --> 00:34:36,109
<font color="#CCCCCC">you</font><font color="#E5E5E5"> run this sequel statement you want</font>

764
00:34:32,449 --> 00:34:38,029
<font color="#CCCCCC">to look for the pid'</font><font color="#E5E5E5"> state and the clock</font>

765
00:34:36,109 --> 00:34:40,969
<font color="#E5E5E5">timestamp - the last time the state</font>

766
00:34:38,029 --> 00:34:42,730
changed which<font color="#CCCCCC"> is an age and the query</font>

767
00:34:40,969 --> 00:34:46,569
<font color="#E5E5E5">from PG stat activity this is</font>

768
00:34:42,730 --> 00:34:49,149
the first quest system<font color="#E5E5E5"> views that's</font>

769
00:34:46,570 --> 00:34:51,700
available that can<font color="#E5E5E5"> show you say in this</font>

770
00:34:49,149 --> 00:34:55,719
case here I've got this pit has been

771
00:34:51,699 --> 00:34:57,819
<font color="#CCCCCC">idle in transaction for 26 seconds and</font>

772
00:34:55,719 --> 00:34:59,618
the command was<font color="#E5E5E5"> begin so so no and it</font>

773
00:34:57,820 --> 00:35:02,800
started transaction and never did

774
00:34:59,619 --> 00:35:05,560
anything so<font color="#E5E5E5"> that I can identify what it</font>

775
00:35:02,800 --> 00:35:08,470
<font color="#E5E5E5">is</font><font color="#CCCCCC"> and identify the fact that</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> really</font>

776
00:35:05,560 --> 00:35:10,509
want<font color="#E5E5E5"> to go kill</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> so now I can say PG</font>

777
00:35:08,470 --> 00:35:13,810
terminate<font color="#CCCCCC"> backend with the pig number</font>

778
00:35:10,510 --> 00:35:15,160
and kill it<font color="#E5E5E5"> okay it</font><font color="#CCCCCC"> looks like I'm gonna</font>

779
00:35:13,810 --> 00:35:17,859
<font color="#E5E5E5">have to speed up</font><font color="#CCCCCC"> a little I'm not</font><font color="#E5E5E5"> going</font>

780
00:35:15,160 --> 00:35:20,830
to get through all<font color="#CCCCCC"> this you can do this</font>

781
00:35:17,859 --> 00:35:23,560
<font color="#CCCCCC">more</font><font color="#E5E5E5"> less example the same thing with</font>

782
00:35:20,830 --> 00:35:25,029
<font color="#CCCCCC">cancel so the difference</font><font color="#E5E5E5"> between you</font>

783
00:35:23,560 --> 00:35:26,529
know<font color="#CCCCCC"> Tory is actually gonna kill the</font>

784
00:35:25,030 --> 00:35:28,900
session cancels just going to kill the

785
00:35:26,530 --> 00:35:31,000
one<font color="#CCCCCC"> in query</font><font color="#E5E5E5"> but leave the session open</font>

786
00:35:28,900 --> 00:35:34,660
so you can do the same thing except it's

787
00:35:31,000 --> 00:35:37,690
again instead of sick term and it's PG

788
00:35:34,660 --> 00:35:44,049
<font color="#E5E5E5">cancel back end instead of terminate</font>

789
00:35:37,690 --> 00:35:46,180
<font color="#CCCCCC">back-end</font><font color="#E5E5E5"> okay so now I'm on to</font><font color="#CCCCCC"> the final</font>

790
00:35:44,050 --> 00:35:49,510
section<font color="#E5E5E5"> just kind of miscellaneous hints</font>

791
00:35:46,180 --> 00:35:50,890
that might<font color="#E5E5E5"> help you get going</font><font color="#CCCCCC"> how many</font>

792
00:35:49,510 --> 00:35:54,490
people are here<font color="#CCCCCC"> would you use</font><font color="#E5E5E5"> P sequel</font>

793
00:35:50,890 --> 00:35:56,109
<font color="#CCCCCC">before actually quite a</font><font color="#E5E5E5"> few so maybe</font>

794
00:35:54,490 --> 00:35:58,720
maybe<font color="#E5E5E5"> this section isn't going to be</font>

795
00:35:56,109 --> 00:36:00,670
much of a surprise<font color="#E5E5E5"> to anyone so first of</font>

796
00:35:58,720 --> 00:36:02,819
all you know one thing<font color="#CCCCCC"> they'd be</font><font color="#E5E5E5"> aware</font>

797
00:36:00,670 --> 00:36:07,119
of is you can specify a host port and

798
00:36:02,820 --> 00:36:09,160
<font color="#CCCCCC">username when you run p sequel</font><font color="#E5E5E5"> so you</font>

799
00:36:07,119 --> 00:36:12,100
can connect to other systems that's not

800
00:36:09,160 --> 00:36:15,279
<font color="#E5E5E5">always obvious to new users</font><font color="#CCCCCC"> I like to</font>

801
00:36:12,100 --> 00:36:18,940
<font color="#E5E5E5">point that out</font><font color="#CCCCCC"> you can actually execute</font>

802
00:36:15,280 --> 00:36:22,390
from<font color="#E5E5E5"> me this is useful for like bash</font>

803
00:36:18,940 --> 00:36:24,640
scripts<font color="#CCCCCC"> if you run p sequel - see you</font>

804
00:36:22,390 --> 00:36:27,220
can<font color="#CCCCCC"> actually execute some secretly</font><font color="#E5E5E5"> from</font>

805
00:36:24,640 --> 00:36:30,910
the command line<font color="#CCCCCC"> you can also do - -</font>

806
00:36:27,220 --> 00:36:33,490
command or you<font color="#CCCCCC"> can echo sequel into p</font>

807
00:36:30,910 --> 00:36:34,750
sequel and execute<font color="#E5E5E5"> that way and there's</font>

808
00:36:33,490 --> 00:36:36,549
actually<font color="#CCCCCC"> some difference in</font><font color="#E5E5E5"> the way</font>

809
00:36:34,750 --> 00:36:38,290
these<font color="#CCCCCC"> two are executed when you do these</font>

810
00:36:36,550 --> 00:36:40,760
two methods<font color="#CCCCCC"> if you've got multiple</font>

811
00:36:38,290 --> 00:36:43,759
commands that are<font color="#E5E5E5"> concatenated with</font>

812
00:36:40,760 --> 00:36:46,310
semicolon<font color="#E5E5E5"> the</font><font color="#CCCCCC"> disc was sent to a</font><font color="#E5E5E5"> post</font>

813
00:36:43,760 --> 00:36:48,970
goes<font color="#CCCCCC"> all once and if one of</font><font color="#E5E5E5"> them fails</font>

814
00:36:46,310 --> 00:36:52,490
<font color="#E5E5E5">kind of it just stops</font><font color="#CCCCCC"> right there</font>

815
00:36:48,970 --> 00:36:54,350
<font color="#E5E5E5">whereas if you do the echo</font><font color="#CCCCCC"> into P sequel</font>

816
00:36:52,490 --> 00:36:56,870
it's more like you're executing from<font color="#E5E5E5"> a</font>

817
00:36:54,350 --> 00:36:59,960
file<font color="#E5E5E5"> and</font><font color="#CCCCCC"> it'll go line by line</font><font color="#E5E5E5"> and so</font>

818
00:36:56,870 --> 00:37:02,029
things like there's a a option for P

819
00:36:59,960 --> 00:37:03,950
sequel called on our<font color="#E5E5E5"> stop that works if</font>

820
00:37:02,030 --> 00:37:06,950
you do the echo mode it doesn't<font color="#E5E5E5"> work if</font>

821
00:37:03,950 --> 00:37:08,540
you<font color="#E5E5E5"> do the</font><font color="#CCCCCC"> other one you</font><font color="#E5E5E5"> can repeat the</font>

822
00:37:06,950 --> 00:37:10,129
executed commands using watch this is

823
00:37:08,540 --> 00:37:11,420
really useful<font color="#E5E5E5"> sometimes if you want</font><font color="#CCCCCC"> to</font>

824
00:37:10,130 --> 00:37:13,760
<font color="#CCCCCC">walk keep an eye on something</font><font color="#E5E5E5"> that's</font>

825
00:37:11,420 --> 00:37:16,700
going on<font color="#CCCCCC"> so if you just</font><font color="#E5E5E5"> use a watch</font>

826
00:37:13,760 --> 00:37:19,040
command<font color="#E5E5E5"> with with one of these</font><font color="#CCCCCC"> together</font>

827
00:37:16,700 --> 00:37:22,370
<font color="#E5E5E5">you can just see it refreshing on the</font>

828
00:37:19,040 --> 00:37:26,480
screen you can<font color="#E5E5E5"> list all the</font><font color="#CCCCCC"> databases</font>

829
00:37:22,370 --> 00:37:27,830
using<font color="#E5E5E5"> P sequel - owl or - - list this</font>

830
00:37:26,480 --> 00:37:29,840
<font color="#E5E5E5">one</font><font color="#CCCCCC"> is another</font><font color="#E5E5E5"> one</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> really useful</font>

831
00:37:27,830 --> 00:37:33,080
<font color="#CCCCCC">I'm continue to be surprised how few</font>

832
00:37:29,840 --> 00:37:36,290
people<font color="#E5E5E5"> know this this -</font><font color="#CCCCCC"> a or detect</font><font color="#E5E5E5"> a</font>

833
00:37:33,080 --> 00:37:39,110
hidden if you've ever put in P sequel

834
00:37:36,290 --> 00:37:41,330
when you do like<font color="#E5E5E5"> slash D to describe a</font>

835
00:37:39,110 --> 00:37:44,000
table and it shows you all<font color="#CCCCCC"> about the</font>

836
00:37:41,330 --> 00:37:45,170
table<font color="#CCCCCC"> Pisa collects Acutes a bunch of</font>

837
00:37:44,000 --> 00:37:47,930
sequel<font color="#CCCCCC"> in order to</font><font color="#E5E5E5"> gather that</font>

838
00:37:45,170 --> 00:37:49,910
information<font color="#E5E5E5"> if you ever wondered how to</font>

839
00:37:47,930 --> 00:37:52,339
get<font color="#E5E5E5"> that same information</font><font color="#CCCCCC"> for yourself</font>

840
00:37:49,910 --> 00:37:54,710
<font color="#E5E5E5">start piece equal to with the -</font><font color="#CCCCCC"> E</font><font color="#E5E5E5"> and</font>

841
00:37:52,340 --> 00:37:58,250
then do a<font color="#E5E5E5"> slash D</font><font color="#CCCCCC"> and a table name and</font>

842
00:37:54,710 --> 00:37:59,570
you'll see all over the rebo's sq all

843
00:37:58,250 --> 00:38:04,880
that's been wrong to gather that

844
00:37:59,570 --> 00:38:07,700
<font color="#E5E5E5">information if you didn't know any</font><font color="#CCCCCC"> know</font>

845
00:38:04,880 --> 00:38:09,560
it basically<font color="#CCCCCC"> P</font><font color="#E5E5E5"> sequel as long as it's</font>

846
00:38:07,700 --> 00:38:11,240
built<font color="#E5E5E5"> with read line support supports</font>

847
00:38:09,560 --> 00:38:13,310
kind of<font color="#E5E5E5"> know they'll read line things so</font>

848
00:38:11,240 --> 00:38:15,890
you<font color="#E5E5E5"> can do</font><font color="#CCCCCC"> up our for the last line in</font>

849
00:38:13,310 --> 00:38:18,410
history you can do ctrl R and start

850
00:38:15,890 --> 00:38:20,569
<font color="#E5E5E5">typing the search history</font><font color="#CCCCCC"> and you can do</font>

851
00:38:18,410 --> 00:38:23,450
tab<font color="#E5E5E5"> to autocomplete</font><font color="#CCCCCC"> and the push</font>

852
00:38:20,570 --> 00:38:26,350
<font color="#CCCCCC">chriscommunity goes to great lengths to</font>

853
00:38:23,450 --> 00:38:31,430
keep like that tab autocomplete stuff

854
00:38:26,350 --> 00:38:32,779
<font color="#E5E5E5">working with new features these are some</font>

855
00:38:31,430 --> 00:38:34,759
of<font color="#CCCCCC"> the sash commands probably the most</font>

856
00:38:32,780 --> 00:38:36,110
important<font color="#E5E5E5"> one is slash question mark</font>

857
00:38:34,760 --> 00:38:38,840
<font color="#E5E5E5">because that's going to tell you what</font>

858
00:38:36,110 --> 00:38:40,250
all<font color="#CCCCCC"> the rest</font><font color="#E5E5E5"> of them do / H will</font>

859
00:38:38,840 --> 00:38:41,980
actually give you help on a particular

860
00:38:40,250 --> 00:38:44,420
sequel command

861
00:38:41,980 --> 00:38:46,760
<font color="#E5E5E5">DT will show you all the tables and you</font>

862
00:38:44,420 --> 00:38:48,110
can optionally filter that with

863
00:38:46,760 --> 00:38:49,850
including his wild codes

864
00:38:48,110 --> 00:38:51,470
<font color="#E5E5E5">same thing /d</font>

865
00:38:49,850 --> 00:38:54,230
actually describes a table and but you

866
00:38:51,470 --> 00:38:55,970
can also<font color="#E5E5E5"> use wildcards there /tf</font>

867
00:38:54,230 --> 00:39:01,430
describes functions and again with

868
00:38:55,970 --> 00:39:04,490
wildcards<font color="#CCCCCC"> /x is what's called expanded</font>

869
00:39:01,430 --> 00:39:06,470
output and normally<font color="#CCCCCC"> push</font><font color="#E5E5E5"> press puts</font><font color="#CCCCCC"> this</font>

870
00:39:04,490 --> 00:39:08,779
<font color="#E5E5E5">output in a table that's wide each</font>

871
00:39:06,470 --> 00:39:13,189
column goes across if that's too wide

872
00:39:08,780 --> 00:39:15,320
<font color="#E5E5E5">before your terminal</font><font color="#CCCCCC"> slash X if you turn</font>

873
00:39:13,190 --> 00:39:18,440
it<font color="#E5E5E5"> on</font><font color="#CCCCCC"> and will actually</font><font color="#E5E5E5"> cause the ways</font>

874
00:39:15,320 --> 00:39:20,180
to each be<font color="#E5E5E5"> one each column</font><font color="#CCCCCC"> every</font><font color="#E5E5E5"> one</font>

875
00:39:18,440 --> 00:39:22,340
under the<font color="#CCCCCC"> other so it fits better on the</font>

876
00:39:20,180 --> 00:39:23,810
screen and in<font color="#CCCCCC"> recent releases there's</font>

877
00:39:22,340 --> 00:39:26,330
now an<font color="#CCCCCC"> option to say Auto which means</font>

878
00:39:23,810 --> 00:39:30,890
<font color="#CCCCCC">Postgres</font><font color="#E5E5E5"> PC will actually just figure</font>

879
00:39:26,330 --> 00:39:32,779
<font color="#CCCCCC">that out for you /e</font><font color="#E5E5E5"> lets you edit the</font>

880
00:39:30,890 --> 00:39:35,000
query buffer and there's a<font color="#E5E5E5"> built in now</font>

881
00:39:32,780 --> 00:39:38,650
<font color="#E5E5E5">to piece equal</font><font color="#CCCCCC"> slash watch which will</font>

882
00:39:35,000 --> 00:39:38,650
<font color="#CCCCCC">repeatedly</font><font color="#E5E5E5"> execute the same thing</font>

883
00:39:38,710 --> 00:39:48,170
some general notes on syntax<font color="#E5E5E5"> with an</font>

884
00:39:44,630 --> 00:39:49,490
identifier<font color="#E5E5E5"> Postgres if you don't quote</font>

885
00:39:48,170 --> 00:39:51,320
your identifiers is going to

886
00:39:49,490 --> 00:39:56,120
automatically down case them so

887
00:39:51,320 --> 00:39:58,940
everything gets lower cased if you want

888
00:39:56,120 --> 00:40:02,109
to preserve<font color="#CCCCCC"> uppercase or</font><font color="#E5E5E5"> if you want to</font>

889
00:39:58,940 --> 00:40:05,240
use<font color="#E5E5E5"> keywords in the names of</font><font color="#CCCCCC"> your</font>

890
00:40:02,110 --> 00:40:07,520
objects or you know strange characters

891
00:40:05,240 --> 00:40:09,020
you can use quotes<font color="#E5E5E5"> and those then</font>

892
00:40:07,520 --> 00:40:11,150
<font color="#E5E5E5">exactly whatever you type will</font><font color="#CCCCCC"> be</font>

893
00:40:09,020 --> 00:40:12,830
preserved<font color="#CCCCCC"> you know you can do two</font>

894
00:40:11,150 --> 00:40:18,440
embedded quotes using it by doubling

895
00:40:12,830 --> 00:40:20,240
them up<font color="#E5E5E5"> okay and you can</font><font color="#CCCCCC"> actually do you</font>

896
00:40:18,440 --> 00:40:22,010
<font color="#E5E5E5">know kind of identifier is using a kind</font>

897
00:40:20,240 --> 00:40:23,479
<font color="#CCCCCC">of ugly</font><font color="#E5E5E5"> syntax like this there may be</font>

898
00:40:22,010 --> 00:40:26,090
better ways to<font color="#E5E5E5"> do</font><font color="#CCCCCC"> it but it's not</font>

899
00:40:23,480 --> 00:40:29,420
<font color="#CCCCCC">something I do all the time so that's</font>

900
00:40:26,090 --> 00:40:32,300
<font color="#E5E5E5">the best</font><font color="#CCCCCC"> way I could come up with string</font>

901
00:40:29,420 --> 00:40:34,520
literals are similar so identifiers are

902
00:40:32,300 --> 00:40:37,340
things like table names<font color="#E5E5E5"> column names</font>

903
00:40:34,520 --> 00:40:39,470
<font color="#E5E5E5">other objects in the database</font><font color="#CCCCCC"> a string</font>

904
00:40:37,340 --> 00:40:40,130
literal is something that you're storing

905
00:40:39,470 --> 00:40:44,450
in the<font color="#CCCCCC"> page</font>

906
00:40:40,130 --> 00:40:48,380
or comparing against or using in one of

907
00:40:44,450 --> 00:40:51,319
<font color="#E5E5E5">your functions so the most simple form</font>

908
00:40:48,380 --> 00:40:53,270
is basically<font color="#CCCCCC"> just</font><font color="#E5E5E5"> the single quotes</font>

909
00:40:51,320 --> 00:40:54,740
around<font color="#E5E5E5"> it but there's something called</font>

910
00:40:53,270 --> 00:40:58,310
dollar quoting I'm going to<font color="#CCCCCC"> cover in</font>

911
00:40:54,740 --> 00:41:00,859
<font color="#E5E5E5">another slide</font><font color="#CCCCCC"> which is very</font><font color="#E5E5E5"> powerful and</font>

912
00:40:58,310 --> 00:41:03,770
<font color="#CCCCCC">very</font><font color="#E5E5E5"> useful</font><font color="#CCCCCC"> you can double off the</font>

913
00:41:00,860 --> 00:41:07,360
quotes to<font color="#E5E5E5"> have embedded quotes and again</font>

914
00:41:03,770 --> 00:41:10,550
you can do a literal<font color="#E5E5E5"> Unicode by</font>

915
00:41:07,360 --> 00:41:14,690
appending this you ampersand to the

916
00:41:10,550 --> 00:41:17,830
front comments<font color="#E5E5E5"> and Postgres costs a</font><font color="#CCCCCC"> nerd</font>

917
00:41:14,690 --> 00:41:19,460
<font color="#E5E5E5">sequel comments or - -</font><font color="#CCCCCC"> Postgres also</font>

918
00:41:17,830 --> 00:41:24,549
supports<font color="#CCCCCC"> C style</font>

919
00:41:19,460 --> 00:41:24,550
<font color="#CCCCCC">Matthew line comments again very useful</font>

920
00:41:25,180 --> 00:41:30,379
dollar quoting so this is a basically

921
00:41:28,700 --> 00:41:32,089
method that you could<font color="#E5E5E5"> have an embedded</font>

922
00:41:30,380 --> 00:41:34,040
quotes within<font color="#E5E5E5"> the string literals</font>

923
00:41:32,090 --> 00:41:37,340
without driving<font color="#CCCCCC"> yourself crazy</font><font color="#E5E5E5"> doubling</font>

924
00:41:34,040 --> 00:41:39,890
and quadrupling and you know I years ago

925
00:41:37,340 --> 00:41:40,730
<font color="#E5E5E5">sometimes</font><font color="#CCCCCC"> had eight or sixteen single</font>

926
00:41:39,890 --> 00:41:43,460
quotes in a row

927
00:41:40,730 --> 00:41:45,020
what you do is you have a dollar<font color="#E5E5E5"> sign</font>

928
00:41:43,460 --> 00:41:46,490
it's it's got at<font color="#CCCCCC"> least be two dollar</font>

929
00:41:45,020 --> 00:41:49,900
<font color="#CCCCCC">signs but it can be two dollar signs</font>

930
00:41:46,490 --> 00:41:52,609
<font color="#CCCCCC">with any tag</font><font color="#E5E5E5"> in between and as long as</font>

931
00:41:49,900 --> 00:41:53,960
whatever<font color="#E5E5E5"> you start with is matches</font>

932
00:41:52,610 --> 00:41:56,270
whatever you<font color="#CCCCCC"> end with that's how a</font>

933
00:41:53,960 --> 00:41:58,820
<font color="#E5E5E5">Postgres will figure</font><font color="#CCCCCC"> out everything in</font>

934
00:41:56,270 --> 00:42:02,180
between is<font color="#E5E5E5"> some kind</font><font color="#CCCCCC"> of a string literal</font>

935
00:41:58,820 --> 00:42:04,730
<font color="#CCCCCC">and you can you can</font><font color="#E5E5E5"> nest those things so</font>

936
00:42:02,180 --> 00:42:07,730
if<font color="#CCCCCC"> you look at this example here</font><font color="#E5E5E5"> I've</font>

937
00:42:04,730 --> 00:42:09,830
got a function<font color="#CCCCCC"> body which is delimited</font>

938
00:42:07,730 --> 00:42:12,560
by a dollar<font color="#E5E5E5"> sign underscore dollar sign</font>

939
00:42:09,830 --> 00:42:15,980
and inside of<font color="#CCCCCC"> that</font><font color="#E5E5E5"> function body I have</font>

940
00:42:12,560 --> 00:42:18,350
a string literal<font color="#E5E5E5"> which is now just</font>

941
00:42:15,980 --> 00:42:20,540
double<font color="#E5E5E5"> dollar double dollar and then</font>

942
00:42:18,350 --> 00:42:24,950
inside of<font color="#CCCCCC"> that string literal</font><font color="#E5E5E5"> I can now</font>

943
00:42:20,540 --> 00:42:27,220
use<font color="#CCCCCC"> a single quotes and everything will</font>

944
00:42:24,950 --> 00:42:27,220
<font color="#E5E5E5">just work</font>

945
00:42:31,099 --> 00:42:34,650
<font color="#E5E5E5">okay getting down to the end which is</font>

946
00:42:33,240 --> 00:42:37,558
good since I'm now<font color="#E5E5E5"> probably</font><font color="#CCCCCC"> down</font><font color="#E5E5E5"> about</font>

947
00:42:34,650 --> 00:42:41,180
five minutes<font color="#CCCCCC"> I just got to cover the</font>

948
00:42:37,559 --> 00:42:43,920
basic<font color="#CCCCCC"> datatypes you're real quick</font>

949
00:42:41,180 --> 00:42:46,440
character strings<font color="#E5E5E5"> there's text for car</font>

950
00:42:43,920 --> 00:42:49,200
and car<font color="#E5E5E5"> these</font><font color="#CCCCCC"> are kind of sequel</font>

951
00:42:46,440 --> 00:42:52,670
standard<font color="#E5E5E5"> text does not</font><font color="#CCCCCC"> bottom line here</font>

952
00:42:49,200 --> 00:42:57,200
is<font color="#CCCCCC"> there excuse me</font>

953
00:42:52,670 --> 00:43:00,540
as far as post<font color="#E5E5E5"> quest is concerned</font>

954
00:42:57,200 --> 00:43:03,720
they're actually<font color="#E5E5E5"> all stored exactly</font><font color="#CCCCCC"> the</font>

955
00:43:00,540 --> 00:43:05,579
same<font color="#E5E5E5"> so if you want to</font><font color="#CCCCCC"> maintain</font>

956
00:43:03,720 --> 00:43:08,098
compatibility with other<font color="#CCCCCC"> databases now</font>

957
00:43:05,579 --> 00:43:10,319
<font color="#E5E5E5">me and you use the sequel standard but</font>

958
00:43:08,099 --> 00:43:12,210
there's really no particular benefit to

959
00:43:10,319 --> 00:43:14,490
doing that<font color="#E5E5E5"> and so it's most people who</font>

960
00:43:12,210 --> 00:43:19,589
use<font color="#E5E5E5"> Postgres like all day long can use</font>

961
00:43:14,490 --> 00:43:22,709
text it might even be like probably<font color="#CCCCCC"> not</font>

962
00:43:19,589 --> 00:43:24,750
even measurably but arguably<font color="#E5E5E5"> faster</font>

963
00:43:22,710 --> 00:43:31,440
because these<font color="#CCCCCC"> I</font><font color="#E5E5E5"> these</font><font color="#CCCCCC"> are doing extra</font>

964
00:43:24,750 --> 00:43:34,290
checks that this one's not<font color="#E5E5E5"> data types</font>

965
00:43:31,440 --> 00:43:36,470
nummies<font color="#CCCCCC"> Posca</font><font color="#E5E5E5"> supports</font><font color="#CCCCCC"> small ants you</font>

966
00:43:34,290 --> 00:43:39,089
know<font color="#CCCCCC"> two bytes four</font><font color="#E5E5E5"> lights eight bytes</font>

967
00:43:36,470 --> 00:43:41,490
<font color="#CCCCCC">serial is not a real data type this is</font>

968
00:43:39,089 --> 00:43:45,119
kind of a<font color="#E5E5E5"> way to automatically add a</font>

969
00:43:41,490 --> 00:43:48,270
sequence which can either be<font color="#CCCCCC"> a four byte</font>

970
00:43:45,119 --> 00:43:52,230
integer an 8 byte integer so serial and

971
00:43:48,270 --> 00:43:55,230
big serial is the<font color="#CCCCCC"> 8 byte integer</font><font color="#E5E5E5"> wheel</font>

972
00:43:52,230 --> 00:43:57,890
and double are both floating-point<font color="#E5E5E5"> so</font>

973
00:43:55,230 --> 00:44:00,960
these are these<font color="#E5E5E5"> are kind of standard</font>

974
00:43:57,890 --> 00:44:06,180
math library type things numeric is

975
00:44:00,960 --> 00:44:08,190
actually a<font color="#E5E5E5"> arbitrary precision type of</font>

976
00:44:06,180 --> 00:44:10,609
calculation so if you need like exact

977
00:44:08,190 --> 00:44:13,740
precision<font color="#E5E5E5"> you would want to use numeric</font>

978
00:44:10,609 --> 00:44:15,720
that's going to be take more room and be

979
00:44:13,740 --> 00:44:17,669
slower in<font color="#E5E5E5"> general than using</font><font color="#CCCCCC"> like double</font>

980
00:44:15,720 --> 00:44:19,828
precision if you don't need it<font color="#CCCCCC"> so if</font>

981
00:44:17,670 --> 00:44:22,079
you're<font color="#E5E5E5"> doing if you're collecting</font><font color="#CCCCCC"> data</font>

982
00:44:19,829 --> 00:44:25,200
from sensors<font color="#CCCCCC"> you probably</font><font color="#E5E5E5"> want double</font>

983
00:44:22,079 --> 00:44:27,270
precision if you're storing values that

984
00:44:25,200 --> 00:44:29,870
represent money<font color="#E5E5E5"> you probably want</font>

985
00:44:27,270 --> 00:44:32,120
numeric if you

986
00:44:29,870 --> 00:44:34,210
just creating<font color="#E5E5E5"> a primary key column and</font>

987
00:44:32,120 --> 00:44:37,190
you just want a number<font color="#E5E5E5"> that's gonna</font>

988
00:44:34,210 --> 00:44:39,380
sequence you want<font color="#E5E5E5"> integer or big int you</font>

989
00:44:37,190 --> 00:44:40,940
probably want<font color="#CCCCCC"> begin</font><font color="#E5E5E5"> there's not a lot of</font>

990
00:44:39,380 --> 00:44:43,010
difference in performance<font color="#E5E5E5"> actually if</font>

991
00:44:40,940 --> 00:44:45,260
you use<font color="#E5E5E5"> begins</font><font color="#CCCCCC"> verses integers</font><font color="#E5E5E5"> they give</font>

992
00:44:43,010 --> 00:44:46,820
you a whole<font color="#E5E5E5"> lot more Headroom so you</font>

993
00:44:45,260 --> 00:44:53,600
could use big<font color="#CCCCCC"> serial or just</font><font color="#E5E5E5"> create a</font>

994
00:44:46,820 --> 00:44:55,430
big in<font color="#CCCCCC"> date/time your support date</font>

995
00:44:53,600 --> 00:44:58,400
without<font color="#E5E5E5"> time we support</font><font color="#CCCCCC"> time without</font>

996
00:44:55,430 --> 00:45:00,770
date and with and<font color="#CCCCCC"> without</font><font color="#E5E5E5"> time zone and</font>

997
00:44:58,400 --> 00:45:02,210
then<font color="#E5E5E5"> timestamp is basically a date and a</font>

998
00:45:00,770 --> 00:45:04,820
time<font color="#E5E5E5"> and we support those</font><font color="#CCCCCC"> with and</font>

999
00:45:02,210 --> 00:45:07,490
<font color="#E5E5E5">without</font><font color="#CCCCCC"> timezone and then we support</font>

1000
00:45:04,820 --> 00:45:10,640
intervals things like<font color="#CCCCCC"> three months I</font>

1001
00:45:07,490 --> 00:45:16,640
could say today<font color="#CCCCCC"> plus three months</font><font color="#E5E5E5"> or</font>

1002
00:45:10,640 --> 00:45:18,950
today plus five minutes you probably<font color="#CCCCCC"> in</font>

1003
00:45:16,640 --> 00:45:22,460
general want<font color="#E5E5E5"> to use timestamp with time</font>

1004
00:45:18,950 --> 00:45:27,259
zone and you intervals are very useful

1005
00:45:22,460 --> 00:45:29,270
for<font color="#CCCCCC"> a lot of</font><font color="#E5E5E5"> things there are</font>

1006
00:45:27,260 --> 00:45:32,690
enumeration types this<font color="#CCCCCC"> is kind of a way</font>

1007
00:45:29,270 --> 00:45:35,420
<font color="#CCCCCC">that you can build</font><font color="#E5E5E5"> your</font><font color="#CCCCCC"> own</font><font color="#E5E5E5"> you know I</font>

1008
00:45:32,690 --> 00:45:38,300
want<font color="#E5E5E5"> to constrain</font><font color="#CCCCCC"> that I used to</font><font color="#E5E5E5"> be red</font>

1009
00:45:35,420 --> 00:45:41,030
green<font color="#CCCCCC"> and blue</font><font color="#E5E5E5"> so now I can create this</font>

1010
00:45:38,300 --> 00:45:43,250
table close and I say I want<font color="#CCCCCC"> like my</font>

1011
00:45:41,030 --> 00:45:46,340
column color to be of type color and now

1012
00:45:43,250 --> 00:45:48,190
I can specify<font color="#E5E5E5"> that it's red and</font><font color="#CCCCCC"> it would</font>

1013
00:45:46,340 --> 00:45:53,870
it'll<font color="#E5E5E5"> be constrained to be one of those</font>

1014
00:45:48,190 --> 00:45:55,790
acceptable values<font color="#E5E5E5"> there are other ways</font>

1015
00:45:53,870 --> 00:45:57,680
that<font color="#E5E5E5"> to do this but you know this could</font>

1016
00:45:55,790 --> 00:46:00,770
<font color="#CCCCCC">be</font><font color="#E5E5E5"> very</font><font color="#CCCCCC"> useful at times there are</font>

1017
00:45:57,680 --> 00:46:01,819
geometric types<font color="#E5E5E5"> built</font><font color="#CCCCCC"> into Postgres you</font>

1018
00:46:00,770 --> 00:46:03,950
know generally if you're<font color="#CCCCCC"> going to do</font>

1019
00:46:01,820 --> 00:46:06,740
geometric types you probably<font color="#E5E5E5"> want to use</font>

1020
00:46:03,950 --> 00:46:08,839
<font color="#E5E5E5">post GIS</font><font color="#CCCCCC"> that's a special extension</font>

1021
00:46:06,740 --> 00:46:10,939
again<font color="#E5E5E5"> we could spend all day</font><font color="#CCCCCC"> talking</font>

1022
00:46:08,840 --> 00:46:13,760
<font color="#CCCCCC">about</font><font color="#E5E5E5"> post</font><font color="#CCCCCC"> GIS and luck on try and</font><font color="#E5E5E5"> cover</font>

1023
00:46:10,940 --> 00:46:17,030
it just know<font color="#CCCCCC"> that post GIS exists and if</font>

1024
00:46:13,760 --> 00:46:19,190
you've got spatial data geometric type

1025
00:46:17,030 --> 00:46:24,380
calculations you need to do that's what

1026
00:46:19,190 --> 00:46:27,680
<font color="#CCCCCC">you want to go find</font><font color="#E5E5E5"> this supports JSON</font>

1027
00:46:24,380 --> 00:46:30,210
JSON support<font color="#CCCCCC"> is actually</font><font color="#E5E5E5"> really good</font>

1028
00:46:27,680 --> 00:46:33,930
these<font color="#E5E5E5"> days</font><font color="#CCCCCC"> there's actually a JSON</font>

1029
00:46:30,210 --> 00:46:36,480
<font color="#E5E5E5">Jason</font><font color="#CCCCCC"> B Jason was the original one</font><font color="#E5E5E5"> this</font>

1030
00:46:33,930 --> 00:46:39,029
one<font color="#E5E5E5"> basically checks well formulas and</font>

1031
00:46:36,480 --> 00:46:41,970
preserves<font color="#E5E5E5"> the string exactly the way it</font>

1032
00:46:39,030 --> 00:46:45,000
<font color="#CCCCCC">was when when</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> Postgres got it</font><font color="#E5E5E5"> where's</font>

1033
00:46:41,970 --> 00:46:46,740
Jason B the string is actually parsed

1034
00:46:45,000 --> 00:46:48,830
and stored as a binary but the advantage

1035
00:46:46,740 --> 00:46:52,770
to that<font color="#E5E5E5"> is we have much more rich</font>

1036
00:46:48,830 --> 00:46:56,549
support for operators and indexes with

1037
00:46:52,770 --> 00:46:58,230
JSON B so most of the time you<font color="#E5E5E5"> probably</font>

1038
00:46:56,550 --> 00:46:59,970
want to be<font color="#E5E5E5"> using JSON B if you're</font>

1039
00:46:58,230 --> 00:47:01,440
storing JSON

1040
00:46:59,970 --> 00:47:04,609
the one thing<font color="#E5E5E5"> that you do have to be</font>

1041
00:47:01,440 --> 00:47:07,440
aware<font color="#CCCCCC"> of</font><font color="#E5E5E5"> is that it will</font><font color="#CCCCCC"> mutate you're</font>

1042
00:47:04,609 --> 00:47:10,710
your input<font color="#CCCCCC"> so what you get out</font><font color="#E5E5E5"> may</font><font color="#CCCCCC"> not</font>

1043
00:47:07,440 --> 00:47:15,150
look<font color="#CCCCCC"> exactly like the input there's an</font>

1044
00:47:10,710 --> 00:47:22,310
XML type checks well formulas<font color="#E5E5E5"> does not</font>

1045
00:47:15,150 --> 00:47:26,580
do<font color="#CCCCCC"> dtt validation importantly yeah and</font>

1046
00:47:22,310 --> 00:47:28,349
then finally some<font color="#E5E5E5"> other miscellaneous</font>

1047
00:47:26,580 --> 00:47:31,020
<font color="#E5E5E5">data types there's data type called</font>

1048
00:47:28,349 --> 00:47:35,030
<font color="#E5E5E5">binary which is for binary data</font><font color="#CCCCCC"> there's</font>

1049
00:47:31,020 --> 00:47:38,330
a true billion you can do a raise<font color="#E5E5E5"> of</font>

1050
00:47:35,030 --> 00:47:40,050
pretty much<font color="#E5E5E5"> all the data types</font>

1051
00:47:38,330 --> 00:47:41,549
<font color="#CCCCCC">multi-dimensional arrays you can do</font>

1052
00:47:40,050 --> 00:47:43,230
composites in other words you can build

1053
00:47:41,550 --> 00:47:45,390
tuples you can actually have those be a

1054
00:47:43,230 --> 00:47:47,190
column in a table<font color="#E5E5E5"> or being used you</font>

1055
00:47:45,390 --> 00:47:50,220
<font color="#E5E5E5">actually build arrays of toppings like</font>

1056
00:47:47,190 --> 00:47:51,480
<font color="#E5E5E5">this they're arranged types which are</font>

1057
00:47:50,220 --> 00:47:53,790
<font color="#CCCCCC">really good if you're doing scheduling</font>

1058
00:47:51,480 --> 00:47:55,440
type applications<font color="#E5E5E5"> you can say I want</font>

1059
00:47:53,790 --> 00:47:58,920
anything in this<font color="#E5E5E5"> range or does this</font>

1060
00:47:55,440 --> 00:48:01,020
range overlap with that<font color="#E5E5E5"> range there's</font>

1061
00:47:58,920 --> 00:48:02,580
text search types of the support<font color="#CCCCCC"> fulfil</font>

1062
00:48:01,020 --> 00:48:04,349
text search which<font color="#CCCCCC"> is really good in</font>

1063
00:48:02,580 --> 00:48:06,330
Postgres<font color="#CCCCCC"> and then there</font><font color="#E5E5E5"> are other</font>

1064
00:48:04,349 --> 00:48:08,490
miscellaneous<font color="#E5E5E5"> types</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> network addresses</font>

1065
00:48:06,330 --> 00:48:09,569
there's lots of extensions<font color="#CCCCCC"> that create</font>

1066
00:48:08,490 --> 00:48:12,180
types<font color="#CCCCCC"> for Postgres</font>

1067
00:48:09,570 --> 00:48:15,060
<font color="#CCCCCC">GUI DS and there's here's a link for</font>

1068
00:48:12,180 --> 00:48:17,759
<font color="#E5E5E5">that so I think I'm just</font><font color="#CCCCCC"> about out of</font>

1069
00:48:15,060 --> 00:48:21,440
time and I'm done with the slides so

1070
00:48:17,760 --> 00:48:21,440
<font color="#E5E5E5">there's maybe time</font><font color="#CCCCCC"> for one</font><font color="#E5E5E5"> question</font>

1071
00:48:23,710 --> 00:48:25,740
<font color="#E5E5E5">Oh</font>

1072
00:49:19,530 --> 00:49:33,579
so so<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is where you've got a large</font>

1073
00:49:22,119 --> 00:49:35,020
buffer<font color="#E5E5E5"> and you'd say when you you insert</font>

1074
00:49:33,579 --> 00:49:36,579
<font color="#E5E5E5">in the piece equal and you're missing</font>

1075
00:49:35,020 --> 00:49:41,079
some character or<font color="#CCCCCC"> something in the</font>

1076
00:49:36,579 --> 00:49:43,299
sequel statement you're missing<font color="#E5E5E5"> a</font>

1077
00:49:41,079 --> 00:49:55,869
<font color="#E5E5E5">quarter of parentheses and and so what</font>

1078
00:49:43,299 --> 00:49:57,790
is<font color="#E5E5E5"> it you want to be able to do so it's</font>

1079
00:49:55,869 --> 00:50:00,160
very<font color="#E5E5E5"> your text editor when you paste it</font>

1080
00:49:57,790 --> 00:50:01,869
in the<font color="#E5E5E5"> piece</font><font color="#CCCCCC"> equal it's not there what</font>

1081
00:50:00,160 --> 00:50:07,779
what are<font color="#E5E5E5"> you using</font><font color="#CCCCCC"> out like a terminal</font>

1082
00:50:01,869 --> 00:50:10,210
client<font color="#CCCCCC"> I mean that almost</font><font color="#E5E5E5"> sounds like it</font>

1083
00:50:07,780 --> 00:50:16,770
might be<font color="#CCCCCC"> a bug in the terminals</font><font color="#E5E5E5"> paste</font>

1084
00:50:10,210 --> 00:50:16,770
buffer I'm not sure I've seen<font color="#E5E5E5"> that</font>

1085
00:50:20,800 --> 00:50:24,840
I think I think that's<font color="#E5E5E5"> it</font>

1086
00:50:30,080 --> 00:50:32,140
<font color="#E5E5E5">you</font>

