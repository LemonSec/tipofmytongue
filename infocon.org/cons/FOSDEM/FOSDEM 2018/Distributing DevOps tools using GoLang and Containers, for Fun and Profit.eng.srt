1
00:00:04,720 --> 00:00:10,599
<font color="#E5E5E5">you you ready perfect right on time</font>

2
00:00:08,410 --> 00:00:11,099
so<font color="#CCCCCC"> runoff</font><font color="#E5E5E5"> last for Lucy and she's gonna</font>

3
00:00:10,599 --> 00:00:14,070
be<font color="#E5E5E5"> talking</font>

4
00:00:11,099 --> 00:00:22,820
DevOps<font color="#CCCCCC"> and</font><font color="#E5E5E5"> disagree</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> ever for fun and</font>

5
00:00:14,070 --> 00:00:26,310
<font color="#E5E5E5">profit</font><font color="#CCCCCC"> yes hello</font><font color="#E5E5E5"> thanks for coming</font><font color="#CCCCCC"> cam</font>

6
00:00:22,820 --> 00:00:28,170
my<font color="#E5E5E5"> name</font><font color="#CCCCCC"> is Lucy</font><font color="#E5E5E5"> and one of the Rob my</font>

7
00:00:26,310 --> 00:00:30,060
team I worked as a bunch of things<font color="#E5E5E5"> so we</font>

8
00:00:28,170 --> 00:00:31,619
<font color="#CCCCCC">maintain a bunch of</font><font color="#E5E5E5"> services and</font>

9
00:00:30,060 --> 00:00:33,750
platforms and tools that the rest of the

10
00:00:31,619 --> 00:00:36,570
developers use and one of<font color="#E5E5E5"> those is a</font>

11
00:00:33,750 --> 00:00:39,890
thing called PS CLI or<font color="#CCCCCC"> Pisgah lean which</font>

12
00:00:36,570 --> 00:00:41,940
is a CLI<font color="#E5E5E5"> we've written</font><font color="#CCCCCC"> an NGO</font><font color="#E5E5E5"> that</font>

13
00:00:39,890 --> 00:00:44,489
<font color="#E5E5E5">basically I like to think of it as a</font>

14
00:00:41,940 --> 00:00:47,180
user<font color="#CCCCCC"> experience layer for launching a</font>

15
00:00:44,489 --> 00:00:49,410
bunch of docker containers containing

16
00:00:47,180 --> 00:00:56,489
tools that the developers one of<font color="#E5E5E5"> want to</font>

17
00:00:49,410 --> 00:00:58,769
<font color="#E5E5E5">use so and then before I talk to you</font>

18
00:00:56,489 --> 00:00:59,910
about this tool and<font color="#CCCCCC"> heater give you a</font>

19
00:00:58,770 --> 00:01:01,020
<font color="#E5E5E5">little bit of brief background about</font>

20
00:00:59,910 --> 00:01:05,459
<font color="#E5E5E5">where it came from</font>

21
00:01:01,020 --> 00:01:09,960
didn't<font color="#E5E5E5"> just bring out a no we're gonna</font>

22
00:01:05,459 --> 00:01:12,538
talk<font color="#CCCCCC"> to me about how</font><font color="#E5E5E5"> it starting really</font>

23
00:01:09,960 --> 00:01:15,119
really useful<font color="#E5E5E5"> when we made this CLI you</font>

24
00:01:12,539 --> 00:01:16,530
go and then talk a bit about<font color="#E5E5E5"> how we've</font>

25
00:01:15,119 --> 00:01:20,240
started open sourcing it because this<font color="#E5E5E5"> is</font>

26
00:01:16,530 --> 00:01:22,890
fast<font color="#CCCCCC"> named after all</font><font color="#E5E5E5"> so in the beginning</font>

27
00:01:20,240 --> 00:01:26,579
the<font color="#CCCCCC"> problem we had that we needed solve</font>

28
00:01:22,890 --> 00:01:29,310
was new starters at the company we

29
00:01:26,579 --> 00:01:31,919
needed a way<font color="#E5E5E5"> of giving</font><font color="#CCCCCC"> them a single</font>

30
00:01:29,310 --> 00:01:33,689
thing that<font color="#E5E5E5"> they</font><font color="#CCCCCC"> could install</font><font color="#E5E5E5"> and run</font>

31
00:01:31,920 --> 00:01:35,250
all the tools they needed<font color="#CCCCCC"> we didn't like</font>

32
00:01:33,689 --> 00:01:37,139
<font color="#CCCCCC">the idea</font><font color="#E5E5E5"> of giving them a document</font>

33
00:01:35,250 --> 00:01:38,820
saying<font color="#E5E5E5"> install this configure this</font>

34
00:01:37,140 --> 00:01:40,649
here's some settings<font color="#E5E5E5"> no we wanted them</font>

35
00:01:38,820 --> 00:01:44,008
<font color="#CCCCCC">to</font><font color="#E5E5E5"> have a single thing that would for</font>

36
00:01:40,649 --> 00:01:45,360
the most part just<font color="#E5E5E5"> work and our initial</font>

37
00:01:44,009 --> 00:01:48,689
solution to that<font color="#E5E5E5"> was a vagrant image</font>

38
00:01:45,360 --> 00:01:50,369
that contains<font color="#E5E5E5"> a</font><font color="#CCCCCC"> bunch of stuff and that</font>

39
00:01:48,689 --> 00:01:51,658
worked<font color="#E5E5E5"> for a while but as the company</font>

40
00:01:50,369 --> 00:01:55,049
grew bigger that wasn't really a

41
00:01:51,659 --> 00:01:56,219
sustainable<font color="#E5E5E5"> solution for start teams</font>

42
00:01:55,049 --> 00:01:57,119
<font color="#E5E5E5">across</font><font color="#CCCCCC"> the company</font><font color="#E5E5E5"> a sort of</font>

43
00:01:56,219 --> 00:01:59,460
semi-autonomous

44
00:01:57,119 --> 00:02:02,040
and what that<font color="#E5E5E5"> means for us is that while</font>

45
00:01:59,460 --> 00:02:03,630
they<font color="#E5E5E5"> might use the</font><font color="#CCCCCC"> same tools</font><font color="#E5E5E5"> they don't</font>

46
00:02:02,040 --> 00:02:06,049
necessarily<font color="#CCCCCC"> use the same versions of</font>

47
00:02:03,630 --> 00:02:08,758
<font color="#E5E5E5">those tools which for</font><font color="#CCCCCC"> us meant</font>

48
00:02:06,049 --> 00:02:11,130
potentially<font color="#E5E5E5"> different versions of VMs</font>

49
00:02:08,758 --> 00:02:14,339
for different teams which is not as a

50
00:02:11,130 --> 00:02:17,100
<font color="#E5E5E5">single solution</font><font color="#CCCCCC"> these</font><font color="#E5E5E5"> things are fairly</font>

51
00:02:14,340 --> 00:02:19,139
<font color="#E5E5E5">big which annoys developers when they</font>

52
00:02:17,100 --> 00:02:20,910
have to download<font color="#CCCCCC"> a new one</font><font color="#E5E5E5"> and they take</font>

53
00:02:19,139 --> 00:02:22,769
a<font color="#E5E5E5"> long</font><font color="#CCCCCC"> time to build which is</font><font color="#E5E5E5"> not a</font>

54
00:02:20,910 --> 00:02:24,220
problem<font color="#CCCCCC"> in and of itself</font><font color="#E5E5E5"> because you</font>

55
00:02:22,769 --> 00:02:26,740
automate that

56
00:02:24,220 --> 00:02:28,240
it means that the testing cycles when we

57
00:02:26,740 --> 00:02:29,250
create new versions<font color="#CCCCCC"> this are</font><font color="#E5E5E5"> really</font>

58
00:02:28,240 --> 00:02:32,100
awkward

59
00:02:29,250 --> 00:02:35,410
but the biggest<font color="#CCCCCC"> problem with this was</font>

60
00:02:32,100 --> 00:02:37,239
<font color="#CCCCCC">that it took ages to</font><font color="#E5E5E5"> start up and for</font>

61
00:02:35,410 --> 00:02:40,630
developers<font color="#CCCCCC"> to update to newer</font><font color="#E5E5E5"> versions</font>

62
00:02:37,240 --> 00:02:43,570
of<font color="#E5E5E5"> these which basically meant</font><font color="#CCCCCC"> that they</font>

63
00:02:40,630 --> 00:02:47,049
didn't<font color="#E5E5E5"> and a lot of the issues that they</font>

64
00:02:43,570 --> 00:02:49,060
saw is<font color="#CCCCCC"> - due to having</font><font color="#E5E5E5"> old versions of</font>

65
00:02:47,050 --> 00:02:53,500
stuff<font color="#E5E5E5"> and not having the same version on</font>

66
00:02:49,060 --> 00:02:54,880
their laptops as on<font color="#E5E5E5"> CI so about this</font>

67
00:02:53,500 --> 00:02:58,470
point in the timeline when we were

68
00:02:54,880 --> 00:03:02,920
getting bored of this<font color="#CCCCCC"> docker for</font><font color="#E5E5E5"> Mac</font>

69
00:02:58,470 --> 00:03:04,720
came out of beta<font color="#CCCCCC"> and one of our team</font>

70
00:03:02,920 --> 00:03:06,899
<font color="#E5E5E5">came up with</font><font color="#CCCCCC"> a brilliant idea</font><font color="#E5E5E5"> of why</font>

71
00:03:04,720 --> 00:03:11,730
<font color="#CCCCCC">don't</font><font color="#E5E5E5"> we just replace this VM with</font>

72
00:03:06,900 --> 00:03:16,000
docker and that looked like<font color="#E5E5E5"> this which</font>

73
00:03:11,730 --> 00:03:17,350
yeah it works<font color="#CCCCCC"> but that's</font><font color="#E5E5E5"> not a thing</font>

74
00:03:16,000 --> 00:03:19,480
that<font color="#E5E5E5"> we want</font><font color="#CCCCCC"> to give to our developers</font>

75
00:03:17,350 --> 00:03:22,570
<font color="#E5E5E5">and I mean getting developers to update</font>

76
00:03:19,480 --> 00:03:24,579
a<font color="#CCCCCC"> VM every now and then is awkward</font>

77
00:03:22,570 --> 00:03:28,299
<font color="#CCCCCC">enough making</font><font color="#E5E5E5"> sure</font><font color="#CCCCCC"> people are running</font>

78
00:03:24,580 --> 00:03:29,920
exactly<font color="#CCCCCC"> this</font><font color="#E5E5E5"> and making sure hundreds of</font>

79
00:03:28,299 --> 00:03:34,060
people<font color="#E5E5E5"> across the company</font><font color="#CCCCCC"> are running</font>

80
00:03:29,920 --> 00:03:37,030
exactly<font color="#E5E5E5"> this is not going to</font><font color="#CCCCCC"> happen</font><font color="#E5E5E5"> so</font>

81
00:03:34,060 --> 00:03:39,610
while this worked<font color="#E5E5E5"> in our team and it</font>

82
00:03:37,030 --> 00:03:42,430
does everything<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> VN</font><font color="#E5E5E5"> did we needed</font>

83
00:03:39,610 --> 00:03:45,880
a better way<font color="#CCCCCC"> of distributing it which is</font>

84
00:03:42,430 --> 00:03:50,019
where<font color="#E5E5E5"> go comes in so we created a tool</font>

85
00:03:45,880 --> 00:03:54,790
called PS CLI which is written<font color="#E5E5E5"> in go it</font>

86
00:03:50,019 --> 00:03:58,660
interacts with<font color="#E5E5E5"> docker SDK same code</font><font color="#CCCCCC"> that</font>

87
00:03:54,790 --> 00:04:01,660
the docker client uses it<font color="#E5E5E5"> uses</font><font color="#CCCCCC"> cobra and</font>

88
00:03:58,660 --> 00:04:04,359
<font color="#CCCCCC">Viper to wrap stuff up</font><font color="#E5E5E5"> into a nice CLI</font>

89
00:04:01,660 --> 00:04:06,370
developers can just run and there's a

90
00:04:04,360 --> 00:04:08,530
lot<font color="#E5E5E5"> of nice nice library code that we've</font>

91
00:04:06,370 --> 00:04:12,610
got in there<font color="#E5E5E5"> as well that</font><font color="#CCCCCC"> we can</font><font color="#E5E5E5"> run</font>

92
00:04:08,530 --> 00:04:15,150
prior to launching a container<font color="#E5E5E5"> so some</font>

93
00:04:12,610 --> 00:04:19,769
of<font color="#E5E5E5"> the nice features we get out of this</font>

94
00:04:15,150 --> 00:04:22,330
<font color="#E5E5E5">it's able</font><font color="#CCCCCC"> to update</font><font color="#E5E5E5"> itself so developers</font>

95
00:04:19,769 --> 00:04:24,610
previously updating that the game<font color="#E5E5E5"> was a</font>

96
00:04:22,330 --> 00:04:28,979
pain<font color="#E5E5E5"> in this case it's just one command</font>

97
00:04:24,610 --> 00:04:31,630
<font color="#E5E5E5">and updates</font><font color="#CCCCCC"> tools that are run with</font><font color="#E5E5E5"> this</font>

98
00:04:28,979 --> 00:04:32,950
run against whatever<font color="#E5E5E5"> is in your</font><font color="#CCCCCC"> current</font>

99
00:04:31,630 --> 00:04:35,740
directory so you<font color="#E5E5E5"> don't have to clone</font>

100
00:04:32,950 --> 00:04:37,460
your code<font color="#CCCCCC"> twice once for outside</font><font color="#E5E5E5"> your VM</font>

101
00:04:35,740 --> 00:04:39,600
wants to

102
00:04:37,460 --> 00:04:42,599
but another feature we've been able to

103
00:04:39,600 --> 00:04:45,510
add<font color="#CCCCCC"> to this is that it's able</font><font color="#E5E5E5"> to run</font>

104
00:04:42,600 --> 00:04:47,280
without<font color="#E5E5E5"> needing your code to be any kind</font>

105
00:04:45,510 --> 00:04:49,409
<font color="#E5E5E5">directory it's</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to run against a git</font>

106
00:04:47,280 --> 00:04:53,119
repo<font color="#E5E5E5"> which stores in a sidekick</font>

107
00:04:49,410 --> 00:04:56,520
they took container<font color="#E5E5E5"> which in CI is</font>

108
00:04:53,120 --> 00:04:59,130
helpful<font color="#E5E5E5"> another thing that's useful</font><font color="#CCCCCC"> for</font>

109
00:04:56,520 --> 00:05:00,450
that is that you can there's a<font color="#CCCCCC"> parameter</font>

110
00:04:59,130 --> 00:05:03,120
<font color="#CCCCCC">that</font><font color="#E5E5E5"> we've added to it</font><font color="#CCCCCC"> that lets</font><font color="#E5E5E5"> you use</font>

111
00:05:00,450 --> 00:05:05,130
a remote docker server but all of that's

112
00:05:03,120 --> 00:05:06,420
not<font color="#E5E5E5"> particularly interesting on its own</font>

113
00:05:05,130 --> 00:05:09,840
because<font color="#E5E5E5"> there's lots of things</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> do</font>

114
00:05:06,420 --> 00:05:12,330
<font color="#E5E5E5">that and</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> reason I think that this</font>

115
00:05:09,840 --> 00:05:17,039
became incredibly popular<font color="#E5E5E5"> at</font><font color="#CCCCCC"> my company</font>

116
00:05:12,330 --> 00:05:20,250
<font color="#E5E5E5">is that we are able to add arbitrary</font>

117
00:05:17,040 --> 00:05:21,540
code<font color="#CCCCCC"> prior to launching a container</font><font color="#E5E5E5"> some</font>

118
00:05:20,250 --> 00:05:24,260
of the things<font color="#E5E5E5"> that we do fairly</font>

119
00:05:21,540 --> 00:05:27,930
frequently in this tool<font color="#E5E5E5"> include</font>

120
00:05:24,260 --> 00:05:30,270
authenticating a user with vault<font color="#E5E5E5"> which</font>

121
00:05:27,930 --> 00:05:34,050
lets<font color="#E5E5E5"> us get access to secrets that the</font>

122
00:05:30,270 --> 00:05:38,960
container might need an<font color="#E5E5E5"> example of that</font>

123
00:05:34,050 --> 00:05:42,360
<font color="#E5E5E5">is anything</font><font color="#CCCCCC"> that needs access</font><font color="#E5E5E5"> to AWS</font><font color="#CCCCCC"> we</font>

124
00:05:38,960 --> 00:05:44,219
use vault<font color="#E5E5E5"> to generate short-lived</font>

125
00:05:42,360 --> 00:05:45,690
credentials<font color="#E5E5E5"> which our security team</font>

126
00:05:44,220 --> 00:05:48,300
loves us for<font color="#E5E5E5"> because</font><font color="#CCCCCC"> now there's</font><font color="#E5E5E5"> no</font>

127
00:05:45,690 --> 00:05:52,830
excuse for<font color="#E5E5E5"> the</font><font color="#CCCCCC"> most part for long-lived</font>

128
00:05:48,300 --> 00:05:56,040
<font color="#CCCCCC">ion users but it also lets us do</font><font color="#E5E5E5"> nice</font>

129
00:05:52,830 --> 00:05:58,289
little things little<font color="#E5E5E5"> use of experience</font>

130
00:05:56,040 --> 00:05:59,940
things<font color="#CCCCCC"> stuff</font><font color="#E5E5E5"> that in workshops I've</font>

131
00:05:58,290 --> 00:06:02,100
noticed<font color="#CCCCCC"> people make mistakes or find</font>

132
00:05:59,940 --> 00:06:03,930
frustrating<font color="#E5E5E5"> like if they've not</font>

133
00:06:02,100 --> 00:06:05,880
configured<font color="#CCCCCC"> git or if they've not got an</font>

134
00:06:03,930 --> 00:06:08,100
SSH key<font color="#E5E5E5"> so they can't clone anything</font>

135
00:06:05,880 --> 00:06:10,170
from bitbucket yet<font color="#E5E5E5"> this will detect</font>

136
00:06:08,100 --> 00:06:13,170
<font color="#E5E5E5">whether they've got</font><font color="#CCCCCC"> that and prompt them</font>

137
00:06:10,170 --> 00:06:15,690
tell them what they need<font color="#CCCCCC"> to do</font><font color="#E5E5E5"> so they</font>

138
00:06:13,170 --> 00:06:19,710
don't have to ask why<font color="#E5E5E5"> is this broken</font>

139
00:06:15,690 --> 00:06:21,870
<font color="#E5E5E5">because</font><font color="#CCCCCC"> of Toni</font><font color="#E5E5E5"> and then once we had</font>

140
00:06:19,710 --> 00:06:25,080
this tool and basically all the

141
00:06:21,870 --> 00:06:27,030
<font color="#E5E5E5">developers had it we realized</font><font color="#CCCCCC"> that by</font>

142
00:06:25,080 --> 00:06:29,250
<font color="#CCCCCC">accident we managed to distribute the</font>

143
00:06:27,030 --> 00:06:31,080
thing that<font color="#E5E5E5"> lets us run any code that</font>

144
00:06:29,250 --> 00:06:33,120
<font color="#E5E5E5">doesn't require containers at all so</font>

145
00:06:31,080 --> 00:06:36,300
there's a bunch<font color="#E5E5E5"> of stuff</font><font color="#CCCCCC"> in here that</font>

146
00:06:33,120 --> 00:06:38,340
doesn't<font color="#E5E5E5"> even</font><font color="#CCCCCC"> use containers</font><font color="#E5E5E5"> at all but</font>

147
00:06:36,300 --> 00:06:42,660
one of<font color="#E5E5E5"> the most interesting things that</font>

148
00:06:38,340 --> 00:06:45,419
we've<font color="#CCCCCC"> found by using this is we've got</font>

149
00:06:42,660 --> 00:06:47,100
anonymous usage<font color="#CCCCCC"> statistics in this so we</font>

150
00:06:45,420 --> 00:06:50,160
know which versions of

151
00:06:47,100 --> 00:06:53,010
<font color="#E5E5E5">tall people</font><font color="#CCCCCC"> using we know what</font><font color="#E5E5E5"> people</font>

152
00:06:50,160 --> 00:06:57,030
are<font color="#CCCCCC"> running with this so we found out</font>

153
00:06:53,010 --> 00:06:59,520
recently that<font color="#CCCCCC"> 25% of people in the past</font>

154
00:06:57,030 --> 00:07:02,280
month<font color="#E5E5E5"> are using the latest version</font><font color="#CCCCCC"> of</font>

155
00:06:59,520 --> 00:07:05,340
this and the further 35%<font color="#E5E5E5"> are</font><font color="#CCCCCC"> within a</font>

156
00:07:02,280 --> 00:07:08,070
<font color="#E5E5E5">few patch versions of it which was</font>

157
00:07:05,340 --> 00:07:13,560
<font color="#CCCCCC">unheard of</font><font color="#E5E5E5"> back when we had a VM</font><font color="#CCCCCC"> that</font>

158
00:07:08,070 --> 00:07:15,540
took 45 minutes to<font color="#E5E5E5"> update so I'm gonna</font>

159
00:07:13,560 --> 00:07:17,400
show off<font color="#E5E5E5"> a couple of things that we have</font>

160
00:07:15,540 --> 00:07:27,720
in this can I get<font color="#E5E5E5"> our friendly</font>

161
00:07:17,400 --> 00:07:30,239
neighborhood mic stand<font color="#E5E5E5"> I feel like I</font>

162
00:07:27,720 --> 00:07:34,290
should<font color="#E5E5E5"> make people pay for this I'll pay</font>

163
00:07:30,240 --> 00:07:36,270
you in<font color="#E5E5E5"> stickers so some</font><font color="#CCCCCC"> of the stuff in</font>

164
00:07:34,290 --> 00:07:37,890
<font color="#E5E5E5">here and so most of the stuff in here</font>

165
00:07:36,270 --> 00:07:41,789
<font color="#E5E5E5">requires access to the work network so</font>

166
00:07:37,890 --> 00:07:44,190
disclaimer<font color="#E5E5E5"> I'm faking some of that so</font>

167
00:07:41,790 --> 00:07:48,620
it's built<font color="#E5E5E5"> in Cobra</font><font color="#CCCCCC"> so some of the stuff</font>

168
00:07:44,190 --> 00:07:51,030
we get for<font color="#E5E5E5"> free includes tab-completion</font>

169
00:07:48,620 --> 00:07:53,100
so some of<font color="#E5E5E5"> the commands that including</font>

170
00:07:51,030 --> 00:07:56,369
this there's a lot<font color="#E5E5E5"> of them most of them</font>

171
00:07:53,100 --> 00:07:59,880
<font color="#E5E5E5">running containers</font><font color="#CCCCCC"> once you blow off</font>

172
00:07:56,370 --> 00:08:01,620
flags that are common<font color="#CCCCCC"> to everything I</font>

173
00:07:59,880 --> 00:08:03,150
mentioned this thing has the<font color="#E5E5E5"> ability to</font>

174
00:08:01,620 --> 00:08:05,430
update<font color="#E5E5E5"> itself so there's two commands</font>

175
00:08:03,150 --> 00:08:07,169
that are<font color="#E5E5E5"> part of this first one</font><font color="#CCCCCC"> PSE live</font>

176
00:08:05,430 --> 00:08:10,440
version<font color="#E5E5E5"> tells you which version you're</font>

177
00:08:07,170 --> 00:08:13,620
running and checks<font color="#E5E5E5"> artifactory where we</font>

178
00:08:10,440 --> 00:08:15,960
store all the go binaries for this check

179
00:08:13,620 --> 00:08:18,000
if there's a new version<font color="#CCCCCC"> and PS CLI</font>

180
00:08:15,960 --> 00:08:19,979
update updates you in place of the new

181
00:08:18,000 --> 00:08:22,470
<font color="#CCCCCC">version the in country will go updates</font>

182
00:08:19,980 --> 00:08:24,270
<font color="#CCCCCC">or libraries pretty good</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> that so oh</font>

183
00:08:22,470 --> 00:08:28,560
no<font color="#CCCCCC"> I'm on 700</font><font color="#E5E5E5"> that's not the latest</font>

184
00:08:24,270 --> 00:08:33,449
<font color="#E5E5E5">version let's fix that and now on the</font>

185
00:08:28,560 --> 00:08:38,179
latest version that's like significantly

186
00:08:33,450 --> 00:08:41,160
quicker then updating<font color="#CCCCCC"> a TM so what else</font>

187
00:08:38,179 --> 00:08:43,978
<font color="#CCCCCC">I've gone</font><font color="#E5E5E5"> with a very complicated</font>

188
00:08:41,159 --> 00:08:45,360
example of one<font color="#E5E5E5"> of the containers</font><font color="#CCCCCC"> that we</font>

189
00:08:43,979 --> 00:08:48,150
<font color="#E5E5E5">run in here but it's a fairly common</font>

190
00:08:45,360 --> 00:08:49,950
<font color="#CCCCCC">thing we do in this tool in this case</font>

191
00:08:48,150 --> 00:08:52,560
this<font color="#CCCCCC"> is</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> adb shell</font><font color="#E5E5E5"> which is something</font>

192
00:08:49,950 --> 00:08:55,770
that Amazon provides as a wrapper around

193
00:08:52,560 --> 00:08:57,890
<font color="#E5E5E5">their CLI but the reason I'm using this</font>

194
00:08:55,770 --> 00:08:59,960
is<font color="#CCCCCC"> because it is an</font><font color="#E5E5E5"> example of us</font>

195
00:08:57,890 --> 00:09:01,640
authenticating the user with vault

196
00:08:59,960 --> 00:09:03,830
secrets<font color="#CCCCCC"> getting a</font><font color="#E5E5E5"> list</font><font color="#CCCCCC"> of all the</font>

197
00:09:01,640 --> 00:09:06,980
<font color="#CCCCCC">accounts they have access</font><font color="#E5E5E5"> to generating</font>

198
00:09:03,830 --> 00:09:08,930
credentials and then at that<font color="#E5E5E5"> point</font><font color="#CCCCCC"> it</font>

199
00:09:06,980 --> 00:09:10,480
knows what it needs<font color="#CCCCCC"> to do</font><font color="#E5E5E5"> to launch a</font>

200
00:09:08,930 --> 00:09:12,800
container<font color="#CCCCCC"> so it launches</font><font color="#E5E5E5"> the container</font>

201
00:09:10,480 --> 00:09:15,710
binds<font color="#E5E5E5"> your AWS directory which contains</font>

202
00:09:12,800 --> 00:09:19,069
<font color="#CCCCCC">the credentials</font><font color="#E5E5E5"> and also contains the</font>

203
00:09:15,710 --> 00:09:23,990
<font color="#CCCCCC">history that</font><font color="#E5E5E5"> this tool needs so I'll</font>

204
00:09:19,070 --> 00:09:26,510
show<font color="#E5E5E5"> you what that looks like so</font><font color="#CCCCCC"> if I</font>

205
00:09:23,990 --> 00:09:27,500
say hisquierdo best<font color="#E5E5E5"> shell first it</font>

206
00:09:26,510 --> 00:09:29,330
prompts<font color="#CCCCCC"> me for a help</font><font color="#E5E5E5"> that for</font>

207
00:09:27,500 --> 00:09:34,220
potentials<font color="#E5E5E5"> and that's</font><font color="#CCCCCC"> definitely man we</font>

208
00:09:29,330 --> 00:09:37,100
all<font color="#CCCCCC"> username password hunter</font><font color="#E5E5E5"> - how are</font>

209
00:09:34,220 --> 00:09:38,180
you typing<font color="#E5E5E5"> magic</font><font color="#CCCCCC"> I'm psychic so there's</font>

210
00:09:37,100 --> 00:09:41,480
all the<font color="#CCCCCC"> lists of accounts</font><font color="#E5E5E5"> that I have</font>

211
00:09:38,180 --> 00:09:43,969
access<font color="#CCCCCC"> to I pick the dev account I say I</font>

212
00:09:41,480 --> 00:09:48,200
want admin access<font color="#CCCCCC"> to the account so this</font>

213
00:09:43,970 --> 00:09:50,660
<font color="#E5E5E5">can download our image this was recorded</font>

214
00:09:48,200 --> 00:09:52,940
<font color="#E5E5E5">at a slightly higher resolution so that</font>

215
00:09:50,660 --> 00:09:55,010
normally looks<font color="#E5E5E5"> better than that but then</font>

216
00:09:52,940 --> 00:09:57,500
at this<font color="#E5E5E5"> point</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> in the container</font><font color="#CCCCCC"> and I</font>

217
00:09:55,010 --> 00:09:59,210
just<font color="#E5E5E5"> press up and that's the last</font>

218
00:09:57,500 --> 00:10:01,730
<font color="#E5E5E5">command I ran last time</font><font color="#CCCCCC"> I had this</font>

219
00:09:59,210 --> 00:10:02,840
<font color="#E5E5E5">container on my laptop in this case it's</font>

220
00:10:01,730 --> 00:10:06,380
just<font color="#E5E5E5"> checking</font><font color="#CCCCCC"> the content of a</font>

221
00:10:02,840 --> 00:10:08,390
<font color="#E5E5E5">particular s3 bucket but yeah</font><font color="#CCCCCC"> so that's</font>

222
00:10:06,380 --> 00:10:10,340
<font color="#E5E5E5">an example of what launching container</font>

223
00:10:08,390 --> 00:10:13,210
<font color="#E5E5E5">using this thing looks</font><font color="#CCCCCC"> like sure</font>

224
00:10:10,340 --> 00:10:13,210
<font color="#E5E5E5">question</font>

225
00:10:16,940 --> 00:10:22,800
yes those come from<font color="#CCCCCC"> vult as</font><font color="#E5E5E5"> well so the</font>

226
00:10:20,820 --> 00:10:24,779
question<font color="#CCCCCC"> was when it showed the list of</font>

227
00:10:22,800 --> 00:10:27,000
roles<font color="#CCCCCC"> where'd those come from and yes</font>

228
00:10:24,779 --> 00:10:29,670
those<font color="#E5E5E5"> are one of the features of how she</font>

229
00:10:27,000 --> 00:10:30,779
called vault as well so that's where

230
00:10:29,670 --> 00:10:36,360
that comes<font color="#CCCCCC"> from</font><font color="#E5E5E5"> as well</font><font color="#CCCCCC"> as the</font><font color="#E5E5E5"> list of</font>

231
00:10:30,779 --> 00:10:37,920
accounts<font color="#CCCCCC"> so another example and so</font>

232
00:10:36,360 --> 00:10:40,820
terraform<font color="#E5E5E5"> this is something we use</font><font color="#CCCCCC"> to</font>

233
00:10:37,920 --> 00:10:43,290
<font color="#E5E5E5">manage our infrastructure as code and</font>

234
00:10:40,820 --> 00:10:45,660
this<font color="#E5E5E5"> is one</font><font color="#CCCCCC"> of the things that teams</font>

235
00:10:43,290 --> 00:10:46,980
<font color="#E5E5E5">across</font><font color="#CCCCCC"> the company</font><font color="#E5E5E5"> like using but they</font>

236
00:10:45,660 --> 00:10:48,719
are not necessarily<font color="#E5E5E5"> on the latest</font>

237
00:10:46,980 --> 00:10:51,710
<font color="#CCCCCC">version</font><font color="#E5E5E5"> so how she</font><font color="#CCCCCC"> grew up has a fairly</font>

238
00:10:48,720 --> 00:10:54,029
frequent<font color="#E5E5E5"> release cycle which means</font><font color="#CCCCCC"> that</font>

239
00:10:51,710 --> 00:10:57,540
when they release a new version it's not

240
00:10:54,029 --> 00:11:01,470
necessarily backwards compatible<font color="#CCCCCC"> so we</font>

241
00:10:57,540 --> 00:11:03,240
so if I do if I'm gonna<font color="#CCCCCC"> need my max</font><font color="#E5E5E5"> down</font>

242
00:11:01,470 --> 00:11:08,970
because this one is one that<font color="#CCCCCC"> requires me</font>

243
00:11:03,240 --> 00:11:12,990
<font color="#CCCCCC">to actually</font><font color="#E5E5E5"> type so if I ask you which</font>

244
00:11:08,970 --> 00:11:18,060
version I'm currently<font color="#E5E5E5"> running</font><font color="#CCCCCC"> I'm on</font><font color="#E5E5E5"> 100</font>

245
00:11:12,990 --> 00:11:19,890
<font color="#E5E5E5">11 1 2 hands typing is easier</font><font color="#CCCCCC"> I can also</font>

246
00:11:18,060 --> 00:11:21,209
ask it what versions are<font color="#CCCCCC"> available so</font>

247
00:11:19,890 --> 00:11:24,750
those are the versions<font color="#CCCCCC"> we've added</font><font color="#E5E5E5"> over</font>

248
00:11:21,209 --> 00:11:30,599
<font color="#CCCCCC">time</font><font color="#E5E5E5"> and if I specify that I want</font><font color="#CCCCCC"> a</font>

249
00:11:24,750 --> 00:11:32,220
<font color="#CCCCCC">specific version it'll</font><font color="#E5E5E5"> use that so yeah</font>

250
00:11:30,600 --> 00:11:36,959
<font color="#CCCCCC">and that applies to basically anything</font>

251
00:11:32,220 --> 00:11:38,310
<font color="#E5E5E5">in there but this particular command is</font>

252
00:11:36,959 --> 00:11:40,050
one that I<font color="#CCCCCC"> use a lot</font><font color="#E5E5E5"> in the workshop so</font>

253
00:11:38,310 --> 00:11:41,790
<font color="#CCCCCC">I've seen the frustrations people have</font>

254
00:11:40,050 --> 00:11:44,010
so<font color="#CCCCCC"> I've added</font><font color="#E5E5E5"> do some nice usability</font>

255
00:11:41,790 --> 00:11:47,400
stuff to this when you saw the list<font color="#E5E5E5"> of</font>

256
00:11:44,010 --> 00:11:50,310
<font color="#CCCCCC">accounts for</font><font color="#E5E5E5"> example anything can this</font>

257
00:11:47,400 --> 00:11:53,400
tool<font color="#E5E5E5"> that uses AWS you can specify the</font>

258
00:11:50,310 --> 00:11:55,739
account<font color="#E5E5E5"> as a flag but you can also use a</font>

259
00:11:53,400 --> 00:11:57,120
config file<font color="#E5E5E5"> and by default it will check</font>

260
00:11:55,740 --> 00:11:59,250
<font color="#CCCCCC">for a config file in your current</font>

261
00:11:57,120 --> 00:12:01,830
<font color="#E5E5E5">directory</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> it'll check for one new</font>

262
00:11:59,250 --> 00:12:03,120
home<font color="#CCCCCC"> directive</font><font color="#E5E5E5"> it can't find it and</font><font color="#CCCCCC"> also</font>

263
00:12:01,830 --> 00:12:05,459
<font color="#E5E5E5">because we manage all the ablest</font>

264
00:12:03,120 --> 00:12:07,880
accounts we know which roles<font color="#E5E5E5"> exist so</font>

265
00:12:05,459 --> 00:12:11,790
I'll show you<font color="#E5E5E5"> what this</font><font color="#CCCCCC"> looks like and</font>

266
00:12:07,880 --> 00:12:14,339
<font color="#CCCCCC">there we go so have a look in the config</font>

267
00:12:11,790 --> 00:12:16,170
file<font color="#E5E5E5"> it says</font><font color="#CCCCCC"> that the code</font><font color="#E5E5E5"> that exists</font>

268
00:12:14,339 --> 00:12:18,480
in this directory corresponds to<font color="#E5E5E5"> that</font>

269
00:12:16,170 --> 00:12:20,819
particular account so if<font color="#E5E5E5"> I run this in</font>

270
00:12:18,480 --> 00:12:23,760
debug mode<font color="#E5E5E5"> to get some more logging so</font>

271
00:12:20,820 --> 00:12:25,260
what we see we see<font color="#E5E5E5"> that it uses this</font>

272
00:12:23,760 --> 00:12:27,880
config file from<font color="#E5E5E5"> the current</font><font color="#CCCCCC"> directory</font>

273
00:12:25,260 --> 00:12:30,130
<font color="#E5E5E5">it's chosen to use that account</font>

274
00:12:27,880 --> 00:12:31,570
because we know how<font color="#E5E5E5"> this tool works and</font>

275
00:12:30,130 --> 00:12:34,900
we<font color="#E5E5E5"> know which roles are available in</font>

276
00:12:31,570 --> 00:12:36,820
each account<font color="#CCCCCC"> we know that plan only</font>

277
00:12:34,900 --> 00:12:38,620
<font color="#E5E5E5">requires read-only access so it drops me</font>

278
00:12:36,820 --> 00:12:41,230
down from admin which<font color="#E5E5E5"> I chose earlier</font>

279
00:12:38,620 --> 00:12:42,910
<font color="#E5E5E5">down to read-only and the rest is</font>

280
00:12:41,230 --> 00:12:45,070
<font color="#CCCCCC">basically the same</font><font color="#E5E5E5"> sort of thing runs</font>

281
00:12:42,910 --> 00:12:46,870
this in<font color="#CCCCCC"> a container</font><font color="#E5E5E5"> in this case it's</font>

282
00:12:45,070 --> 00:12:49,180
just<font color="#E5E5E5"> some test DNS records</font><font color="#CCCCCC"> so that's not</font>

283
00:12:46,870 --> 00:12:55,290
particularly interesting<font color="#E5E5E5"> so that's that</font>

284
00:12:49,180 --> 00:12:55,290
part<font color="#CCCCCC"> I said this is open source and</font>

285
00:12:56,490 --> 00:13:00,160
basically<font color="#E5E5E5"> this tool has</font><font color="#CCCCCC"> sought become</font>

286
00:12:58,600 --> 00:13:01,960
the victim<font color="#CCCCCC"> of his own success at</font><font color="#E5E5E5"> work</font>

287
00:13:00,160 --> 00:13:04,329
<font color="#E5E5E5">people</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> I've been asking us can you</font>

288
00:13:01,960 --> 00:13:06,460
add this other<font color="#E5E5E5"> tool to it and we've been</font>

289
00:13:04,330 --> 00:13:09,790
thinking<font color="#E5E5E5"> yeah that's a</font><font color="#CCCCCC"> useful thing to</font>

290
00:13:06,460 --> 00:13:11,410
do in<font color="#E5E5E5"> something like this</font><font color="#CCCCCC"> but that's</font>

291
00:13:09,790 --> 00:13:12,880
<font color="#CCCCCC">more stuff that we have to maintain and</font>

292
00:13:11,410 --> 00:13:14,589
<font color="#E5E5E5">we don't want to maintain lots of things</font>

293
00:13:12,880 --> 00:13:17,620
we want<font color="#CCCCCC"> to maintain</font><font color="#E5E5E5"> a small number of</font>

294
00:13:14,590 --> 00:13:19,660
<font color="#E5E5E5">things so the some refactoring work we</font>

295
00:13:17,620 --> 00:13:21,850
needed<font color="#CCCCCC"> to do with this</font><font color="#E5E5E5"> anyway so we</font>

296
00:13:19,660 --> 00:13:26,949
instead<font color="#CCCCCC"> of just refactoring that</font><font color="#E5E5E5"> in</font>

297
00:13:21,850 --> 00:13:29,410
place<font color="#E5E5E5"> we split out some of it so while</font>

298
00:13:26,950 --> 00:13:31,600
there's a lot cool<font color="#E5E5E5"> cool stuff in</font><font color="#CCCCCC"> PCI at</font>

299
00:13:29,410 --> 00:13:34,780
its heart it's a thing which runs docker

300
00:13:31,600 --> 00:13:37,350
containers and functions in<font color="#E5E5E5"> a nice CLI</font>

301
00:13:34,780 --> 00:13:41,020
<font color="#E5E5E5">so what we've done we've abstracted away</font>

302
00:13:37,350 --> 00:13:44,620
<font color="#E5E5E5">the</font><font color="#CCCCCC"> Cobra and Viper</font><font color="#E5E5E5"> and the docker SDK</font>

303
00:13:41,020 --> 00:13:47,620
stuff that is part basically and put

304
00:13:44,620 --> 00:13:49,630
<font color="#E5E5E5">that into the open source</font><font color="#CCCCCC"> Cali</font><font color="#E5E5E5"> and this</font>

305
00:13:47,620 --> 00:13:51,460
lets us do stuff<font color="#E5E5E5"> like setting sensible</font>

306
00:13:49,630 --> 00:13:53,430
defaults like we basically know that

307
00:13:51,460 --> 00:13:56,290
anything<font color="#CCCCCC"> that will be written</font><font color="#E5E5E5"> with this</font>

308
00:13:53,430 --> 00:13:57,849
would want the opportunity to<font color="#CCCCCC"> run from</font>

309
00:13:56,290 --> 00:14:01,449
your<font color="#E5E5E5"> current</font><font color="#CCCCCC"> directory</font><font color="#E5E5E5"> or from a git</font>

310
00:13:57,850 --> 00:14:03,520
repo<font color="#CCCCCC"> possibly in a remote docker</font><font color="#E5E5E5"> stuff</font>

311
00:14:01,450 --> 00:14:05,920
like that<font color="#E5E5E5"> but</font><font color="#CCCCCC"> there philosophy behind</font>

312
00:14:03,520 --> 00:14:09,990
this is<font color="#CCCCCC"> that while we are doing stuff by</font>

313
00:14:05,920 --> 00:14:12,689
default<font color="#CCCCCC"> we want to let</font><font color="#E5E5E5"> people access</font>

314
00:14:09,990 --> 00:14:15,850
native docker stuff and use that

315
00:14:12,690 --> 00:14:18,550
preference<font color="#E5E5E5"> if they have special stuff</font>

316
00:14:15,850 --> 00:14:21,630
that they<font color="#E5E5E5"> want to do so</font>

317
00:14:18,550 --> 00:14:21,630
<font color="#CCCCCC">demo time again</font>

318
00:14:27,190 --> 00:14:32,180
so<font color="#E5E5E5"> I've got a</font><font color="#CCCCCC"> version that uses</font><font color="#E5E5E5"> this</font>

319
00:14:30,260 --> 00:14:35,720
called loosely<font color="#E5E5E5"> named after myself</font>

320
00:14:32,180 --> 00:14:39,319
<font color="#E5E5E5">because I'm vain</font><font color="#CCCCCC"> and so I'll show you</font>

321
00:14:35,720 --> 00:14:40,550
<font color="#E5E5E5">what one of these things</font><font color="#CCCCCC"> looks</font><font color="#E5E5E5"> like so</font>

322
00:14:39,320 --> 00:14:42,500
it means not<font color="#E5E5E5"> that interesting</font><font color="#CCCCCC"> so I'll</font>

323
00:14:40,550 --> 00:14:45,079
show<font color="#E5E5E5"> you the</font><font color="#CCCCCC"> root package</font><font color="#E5E5E5"> first thing it</font>

324
00:14:42,500 --> 00:14:46,640
does<font color="#E5E5E5"> I'm defining CLI variable which is</font>

325
00:14:45,080 --> 00:14:51,080
<font color="#CCCCCC">available</font><font color="#E5E5E5"> to all</font><font color="#CCCCCC"> the other commands in</font>

326
00:14:46,640 --> 00:14:53,300
this new<font color="#E5E5E5"> sea lion calling loosely saying</font>

327
00:14:51,080 --> 00:14:55,220
<font color="#E5E5E5">an init function which just</font><font color="#CCCCCC"> sets</font><font color="#E5E5E5"> short</font>

328
00:14:53,300 --> 00:14:57,979
and long description sets does the help

329
00:14:55,220 --> 00:14:59,390
<font color="#E5E5E5">text stuff</font><font color="#CCCCCC"> I could do all sorts of stuff</font>

330
00:14:57,980 --> 00:15:01,760
<font color="#E5E5E5">here I could define a bunch</font><font color="#CCCCCC"> of global</font>

331
00:14:59,390 --> 00:15:08,449
flags but for<font color="#E5E5E5"> this demo that's all I</font>

332
00:15:01,760 --> 00:15:12,410
need so if I<font color="#E5E5E5"> run</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> it'll show me all</font>

333
00:15:08,450 --> 00:15:13,220
the<font color="#E5E5E5"> tools available into it and a bunch</font>

334
00:15:12,410 --> 00:15:15,530
of global flags

335
00:15:13,220 --> 00:15:17,540
<font color="#E5E5E5">so docker host again a bunch of stuff</font>

336
00:15:15,530 --> 00:15:24,980
for interacting with git repos if I want

337
00:15:17,540 --> 00:15:26,060
<font color="#E5E5E5">to and yeah so I've got so showing</font>

338
00:15:24,980 --> 00:15:27,320
before<font color="#CCCCCC"> I show you</font><font color="#E5E5E5"> how this thing</font>

339
00:15:26,060 --> 00:15:32,500
launches containers I'm going to show

340
00:15:27,320 --> 00:15:32,500
<font color="#E5E5E5">you how it does simple functions and so</font>

341
00:15:33,100 --> 00:15:38,690
my version<font color="#E5E5E5"> function I've got so from my</font>

342
00:15:37,160 --> 00:15:40,760
CLI I'm defining a new sub command

343
00:15:38,690 --> 00:15:43,970
version which just prints<font color="#E5E5E5"> out which</font>

344
00:15:40,760 --> 00:15:46,760
version<font color="#E5E5E5"> we're running</font><font color="#CCCCCC"> I define a</font>

345
00:15:43,970 --> 00:15:50,030
function that<font color="#E5E5E5"> just prints</font><font color="#CCCCCC"> out a bunch of</font>

346
00:15:46,760 --> 00:15:52,850
<font color="#E5E5E5">variables from my from my version</font>

347
00:15:50,030 --> 00:15:56,709
<font color="#E5E5E5">library which I set at Build time when I</font>

348
00:15:52,850 --> 00:15:59,990
compile the binaries<font color="#CCCCCC"> and then the task</font>

349
00:15:56,710 --> 00:16:04,580
which is<font color="#E5E5E5"> the run function of this</font>

350
00:15:59,990 --> 00:16:10,330
command<font color="#E5E5E5"> just runs this function</font><font color="#CCCCCC"> so if I</font>

351
00:16:04,580 --> 00:16:14,120
do tells me it's running<font color="#E5E5E5"> oh three one</font>

352
00:16:10,330 --> 00:16:17,360
<font color="#E5E5E5">that global debug flag and where is it</font>

353
00:16:14,120 --> 00:16:19,370
if I specify that<font color="#E5E5E5"> we'd</font><font color="#CCCCCC"> see a bit more</font>

354
00:16:17,360 --> 00:16:24,380
<font color="#CCCCCC">information when it was built</font><font color="#E5E5E5"> which gets</font>

355
00:16:19,370 --> 00:16:25,610
it commit<font color="#E5E5E5"> it was built from terraform</font>

356
00:16:24,380 --> 00:16:26,780
again I'm going<font color="#E5E5E5"> to use this an example</font>

357
00:16:25,610 --> 00:16:29,630
mostly because I believe New York

358
00:16:26,780 --> 00:16:33,050
terraform<font color="#E5E5E5"> and I use this myself to</font>

359
00:16:29,630 --> 00:16:34,300
manage my live DNS records<font color="#E5E5E5"> so what does</font>

360
00:16:33,050 --> 00:16:36,010
this one<font color="#E5E5E5"> look like</font>

361
00:16:34,300 --> 00:16:37,569
this one is<font color="#E5E5E5"> slightly more complicated</font>

362
00:16:36,010 --> 00:16:38,140
<font color="#E5E5E5">this one actually does</font><font color="#CCCCCC"> use a dock</font>

363
00:16:37,570 --> 00:16:41,380
container

364
00:16:38,140 --> 00:16:44,520
so again command is a new command from

365
00:16:41,380 --> 00:16:44,520
<font color="#CCCCCC">the CLI I'm saying</font>

366
00:17:08,500 --> 00:17:21,549
that's right<font color="#E5E5E5"> okay can you hear me okay</font>

367
00:17:14,549 --> 00:17:23,619
<font color="#E5E5E5">fantastic you may</font><font color="#CCCCCC"> sit down</font><font color="#E5E5E5"> so yes in</font>

368
00:17:21,549 --> 00:17:25,839
this<font color="#E5E5E5"> case</font><font color="#CCCCCC"> defining a new command off my</font>

369
00:17:23,619 --> 00:17:29,379
CLI<font color="#E5E5E5"> short description shows up in the</font>

370
00:17:25,839 --> 00:17:31,570
main helper text<font color="#E5E5E5"> long</font><font color="#CCCCCC"> descriptions shows</font>

371
00:17:29,379 --> 00:17:34,389
<font color="#CCCCCC">that</font><font color="#E5E5E5"> when I ask for help text for this</font>

372
00:17:31,570 --> 00:17:36,970
tool<font color="#E5E5E5"> specifically and I'm defining a</font>

373
00:17:34,389 --> 00:17:40,209
flag<font color="#E5E5E5"> and in Caly which is the open</font>

374
00:17:36,970 --> 00:17:42,850
<font color="#CCCCCC">source version</font><font color="#E5E5E5"> of this</font><font color="#CCCCCC"> a flag</font>

375
00:17:40,210 --> 00:17:44,889
corresponds to a<font color="#CCCCCC"> Cobra</font><font color="#E5E5E5"> flag and it also</font>

376
00:17:42,850 --> 00:17:47,918
corresponds to a<font color="#E5E5E5"> viper conflict so I can</font>

377
00:17:44,889 --> 00:17:51,279
specify this<font color="#E5E5E5"> profile field both when I'm</font>

378
00:17:47,919 --> 00:17:53,470
running<font color="#E5E5E5"> my tool and in my config file</font>

379
00:17:51,279 --> 00:17:57,730
<font color="#E5E5E5">and you saw what that looked like when I</font>

380
00:17:53,470 --> 00:18:00,580
did<font color="#CCCCCC"> that with Tara from</font><font color="#E5E5E5"> earlier so</font><font color="#CCCCCC"> I'm</font>

381
00:17:57,730 --> 00:18:02,649
<font color="#E5E5E5">defining my</font><font color="#CCCCCC"> tasks for this</font><font color="#E5E5E5"> which in this</font>

382
00:18:00,580 --> 00:18:05,740
case is a string which<font color="#E5E5E5"> Kellie interprets</font>

383
00:18:02,649 --> 00:18:09,209
to be a<font color="#CCCCCC"> docker image</font><font color="#E5E5E5"> so by default it</font>

384
00:18:05,740 --> 00:18:11,620
will download this image<font color="#CCCCCC"> and just run</font><font color="#E5E5E5"> it</font>

385
00:18:09,210 --> 00:18:13,659
I'm also<font color="#E5E5E5"> defining an init function which</font>

386
00:18:11,620 --> 00:18:15,129
happens first<font color="#E5E5E5"> in this case it just takes</font>

387
00:18:13,659 --> 00:18:16,450
<font color="#E5E5E5">the value of that profile flag and</font>

388
00:18:15,129 --> 00:18:20,289
passes that end as an environment

389
00:18:16,450 --> 00:18:23,830
<font color="#CCCCCC">variable so I'm going</font><font color="#E5E5E5"> to show you a bit</font>

390
00:18:20,289 --> 00:18:25,600
about what<font color="#CCCCCC"> that looks like so I'm gonna</font>

391
00:18:23,830 --> 00:18:27,610
<font color="#E5E5E5">use a key treatment for this this is a</font>

392
00:18:25,600 --> 00:18:30,370
private repo that<font color="#E5E5E5"> only I have access</font><font color="#CCCCCC"> to</font>

393
00:18:27,610 --> 00:18:32,549
so it's gonna use my SSH key to clone

394
00:18:30,370 --> 00:18:32,549
this

395
00:18:35,310 --> 00:18:38,550
and I'll<font color="#E5E5E5"> use the same commands as I did</font>

396
00:18:38,220 --> 00:18:41,280
before

397
00:18:38,550 --> 00:18:43,800
<font color="#E5E5E5">plan in this</font><font color="#CCCCCC"> case</font><font color="#E5E5E5"> I've previously cloned</font>

398
00:18:41,280 --> 00:18:45,720
this<font color="#E5E5E5"> so this cyclic container still</font>

399
00:18:43,800 --> 00:18:48,300
exists it's just<font color="#E5E5E5"> checked whether it was</font>

400
00:18:45,720 --> 00:18:50,690
<font color="#CCCCCC">up-to-date which it is and it's gonna</font>

401
00:18:48,300 --> 00:18:53,250
check if<font color="#E5E5E5"> my DNS records are up-to-date</font>

402
00:18:50,690 --> 00:18:55,080
<font color="#CCCCCC">which</font><font color="#E5E5E5"> I think last time I did this they</font>

403
00:18:53,250 --> 00:18:57,450
weren't but I'm<font color="#E5E5E5"> not changing</font><font color="#CCCCCC"> alive DNS</font>

404
00:18:55,080 --> 00:19:01,740
records in the middle of a demo so let's

405
00:18:57,450 --> 00:19:03,390
leave that and another<font color="#E5E5E5"> one this is</font><font color="#CCCCCC"> the</font>

406
00:19:01,740 --> 00:19:04,980
simplest<font color="#E5E5E5"> possible</font><font color="#CCCCCC"> example I</font><font color="#E5E5E5"> could come</font>

407
00:19:03,390 --> 00:19:08,510
up<font color="#CCCCCC"> with from running a container in this</font>

408
00:19:04,980 --> 00:19:13,040
I'm using vim<font color="#E5E5E5"> just because I like them</font>

409
00:19:08,510 --> 00:19:17,070
so the command<font color="#E5E5E5"> for this looks like this</font>

410
00:19:13,040 --> 00:19:19,560
<font color="#E5E5E5">so all I'm doing</font>

411
00:19:17,070 --> 00:19:21,570
<font color="#CCCCCC">defining</font><font color="#E5E5E5"> a new command</font><font color="#CCCCCC"> of my CLI</font><font color="#E5E5E5"> setting</font>

412
00:19:19,560 --> 00:19:23,310
the<font color="#CCCCCC"> task</font><font color="#E5E5E5"> for this image and I could</font><font color="#CCCCCC"> have</font>

413
00:19:21,570 --> 00:19:26,610
<font color="#E5E5E5">just stopped there could have used an</font>

414
00:19:23,310 --> 00:19:29,340
Alpine image<font color="#E5E5E5"> with them installed but of</font>

415
00:19:26,610 --> 00:19:31,860
course this is not normal<font color="#E5E5E5"> them this is</font>

416
00:19:29,340 --> 00:19:33,929
vim<font color="#CCCCCC"> +</font><font color="#E5E5E5"> or my configs all my plugins</font>

417
00:19:31,860 --> 00:19:36,300
<font color="#CCCCCC">it's even got go format in it which</font>

418
00:19:33,930 --> 00:19:37,620
means when I save<font color="#E5E5E5"> it the</font><font color="#CCCCCC"> VIN go plug-in</font>

419
00:19:36,300 --> 00:19:40,050
will automatically format<font color="#CCCCCC"> app for me</font>

420
00:19:37,620 --> 00:19:41,820
because there's<font color="#E5E5E5"> no way I will</font><font color="#CCCCCC"> write go</font>

421
00:19:40,050 --> 00:19:48,030
code but<font color="#CCCCCC"> it doesn't automatically do</font>

422
00:19:41,820 --> 00:19:49,350
that<font color="#CCCCCC"> for me so yeah</font><font color="#E5E5E5"> there's a lot of</font>

423
00:19:48,030 --> 00:19:51,240
stuff<font color="#CCCCCC"> that I could do with this</font><font color="#E5E5E5"> I could</font>

424
00:19:49,350 --> 00:19:53,520
rewrite the entirety<font color="#E5E5E5"> of</font><font color="#CCCCCC"> what</font><font color="#E5E5E5"> we've</font><font color="#CCCCCC"> got</font>

425
00:19:51,240 --> 00:19:55,980
in Psel are using<font color="#E5E5E5"> this if I wanted to</font>

426
00:19:53,520 --> 00:19:59,220
<font color="#E5E5E5">and</font><font color="#CCCCCC"> why will at some point</font><font color="#E5E5E5"> I've got a</font>

427
00:19:55,980 --> 00:20:02,940
dedicated<font color="#CCCCCC"> 10% of my time at work that</font>

428
00:19:59,220 --> 00:20:04,260
<font color="#CCCCCC">we'll be doing that but</font><font color="#E5E5E5"> for now</font><font color="#CCCCCC"> that's</font>

429
00:20:02,940 --> 00:20:06,240
<font color="#E5E5E5">probably all I have time for</font>

430
00:20:04,260 --> 00:20:08,700
so I've explained where we come from

431
00:20:06,240 --> 00:20:10,770
<font color="#E5E5E5">with these massive VMs that</font><font color="#CCCCCC"> weren't</font>

432
00:20:08,700 --> 00:20:13,560
particularly scalable<font color="#E5E5E5"> I've explained</font>

433
00:20:10,770 --> 00:20:16,500
where we are now with<font color="#CCCCCC"> PS Eli being this</font>

434
00:20:13,560 --> 00:20:17,850
CLI that runs docker images and I've

435
00:20:16,500 --> 00:20:21,860
shown you a bit<font color="#CCCCCC"> about</font><font color="#E5E5E5"> what the</font><font color="#CCCCCC"> future</font>

436
00:20:17,850 --> 00:20:24,149
holds for us<font color="#E5E5E5"> with</font><font color="#CCCCCC"> Cali as this</font>

437
00:20:21,860 --> 00:20:26,070
<font color="#E5E5E5">abstraction that this library that we</font>

438
00:20:24,150 --> 00:20:29,250
can just<font color="#E5E5E5"> use</font><font color="#CCCCCC"> anywhere we want</font><font color="#E5E5E5"> to make a</font>

439
00:20:26,070 --> 00:20:31,950
<font color="#E5E5E5">tool like this links to source code on</font>

440
00:20:29,250 --> 00:20:34,740
screen<font color="#E5E5E5"> now the</font><font color="#CCCCCC"> kelie library</font><font color="#E5E5E5"> itself my</font>

441
00:20:31,950 --> 00:20:36,350
<font color="#CCCCCC">loosely example there's another one I</font>

442
00:20:34,740 --> 00:20:39,150
don't<font color="#CCCCCC"> have time to demo</font><font color="#E5E5E5"> today that</font>

443
00:20:36,350 --> 00:20:40,500
someone in<font color="#E5E5E5"> our company is</font><font color="#CCCCCC"> made in the</font>

444
00:20:39,150 --> 00:20:43,380
past<font color="#E5E5E5"> two weeks</font>

445
00:20:40,500 --> 00:20:44,770
Thank<font color="#E5E5E5"> You Alice</font><font color="#CCCCCC"> this is called</font>

446
00:20:43,380 --> 00:20:47,320
<font color="#CCCCCC">statically</font>

447
00:20:44,770 --> 00:20:49,930
<font color="#CCCCCC">and it's what</font><font color="#E5E5E5"> a couple</font><font color="#CCCCCC"> of us are</font><font color="#E5E5E5"> using</font>

448
00:20:47,320 --> 00:20:52,300
<font color="#E5E5E5">to manage our technology blog at</font><font color="#CCCCCC"> the</font>

449
00:20:49,930 --> 00:20:54,280
moment and of<font color="#E5E5E5"> course</font><font color="#CCCCCC"> Ashley</font><font color="#E5E5E5"> McNamara is</font>

450
00:20:52,300 --> 00:20:56,260
fantastic go for images without<font color="#E5E5E5"> whom</font>

451
00:20:54,280 --> 00:20:59,620
this would<font color="#E5E5E5"> be significantly</font><font color="#CCCCCC"> more boring</font>

452
00:20:56,260 --> 00:21:18,129
set of slides<font color="#E5E5E5"> so yeah that's all for me</font>

453
00:20:59,620 --> 00:21:32,709
unless<font color="#E5E5E5"> anyone has any questions</font><font color="#CCCCCC"> so I say</font>

454
00:21:18,130 --> 00:21:34,720
that again see<font color="#E5E5E5"> that right so the</font>

455
00:21:32,710 --> 00:21:36,700
<font color="#E5E5E5">question was how do I make sure</font><font color="#CCCCCC"> that the</font>

456
00:21:34,720 --> 00:21:40,780
user inside the container is the<font color="#CCCCCC"> same</font>

457
00:21:36,700 --> 00:21:42,430
user user ID as outside<font color="#E5E5E5"> the container</font>

458
00:21:40,780 --> 00:21:44,770
<font color="#E5E5E5">and this is something</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> I</font>

459
00:21:42,430 --> 00:21:46,750
deliberately simplified for this talk on

460
00:21:44,770 --> 00:21:48,940
<font color="#E5E5E5">macaws it's simple it doesn't matter</font>

461
00:21:46,750 --> 00:21:51,850
because docker Tomek makes that simple

462
00:21:48,940 --> 00:21:55,990
on<font color="#CCCCCC"> Linux</font><font color="#E5E5E5"> we do actually have</font><font color="#CCCCCC"> some extra</font>

463
00:21:51,850 --> 00:21:57,820
<font color="#CCCCCC">stuff that</font><font color="#E5E5E5"> we need to do so I'm figuring</font>

464
00:21:55,990 --> 00:21:59,680
<font color="#E5E5E5">out a way of standardizing this in</font><font color="#CCCCCC"> Cali</font>

465
00:21:57,820 --> 00:22:01,360
<font color="#E5E5E5">we it's a solved problem that we already</font>

466
00:21:59,680 --> 00:22:04,330
have solved to work which<font color="#E5E5E5"> is</font><font color="#CCCCCC"> you just</font>

467
00:22:01,360 --> 00:22:06,639
type in the<font color="#E5E5E5"> user ID and and you use a</font>

468
00:22:04,330 --> 00:22:07,870
group ID as environment variables<font color="#E5E5E5"> and</font>

469
00:22:06,640 --> 00:22:12,100
then you have something<font color="#CCCCCC"> in your entry</font>

470
00:22:07,870 --> 00:22:14,439
point<font color="#CCCCCC"> which makes make sure that the</font>

471
00:22:12,100 --> 00:22:20,580
user IDs match it's not particularly

472
00:22:14,440 --> 00:22:23,790
nice<font color="#E5E5E5"> but it works is it</font>

473
00:22:20,580 --> 00:22:23,790
[Music]

474
00:22:29,250 --> 00:22:34,870
so the<font color="#CCCCCC"> the</font><font color="#E5E5E5"> statement was that that's not</font>

475
00:22:33,100 --> 00:22:36,100
<font color="#CCCCCC">particularly secure</font><font color="#E5E5E5"> because he can just</font>

476
00:22:34,870 --> 00:22:39,040
pass in<font color="#E5E5E5"> any environment variable you</font>

477
00:22:36,100 --> 00:22:40,600
want<font color="#E5E5E5"> and yeah that's true it's not great</font>

478
00:22:39,040 --> 00:22:42,730
it's not it's<font color="#E5E5E5"> the solution</font><font color="#CCCCCC"> we have at</font>

479
00:22:40,600 --> 00:22:44,500
the<font color="#E5E5E5"> moment we need a better solution in</font>

480
00:22:42,730 --> 00:22:54,420
future<font color="#E5E5E5"> but that's what we're working</font>

481
00:22:44,500 --> 00:22:54,420
<font color="#E5E5E5">with for now anyone else</font>

482
00:22:54,450 --> 00:22:57,450
sure

483
00:23:22,289 --> 00:23:29,770
so the question<font color="#E5E5E5"> was how do we decide</font>

484
00:23:26,940 --> 00:23:34,720
where to<font color="#E5E5E5"> mount the volumes</font><font color="#CCCCCC"> from</font><font color="#E5E5E5"> right</font>

485
00:23:29,770 --> 00:23:36,730
and so stuff<font color="#CCCCCC"> like</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> I dress</font><font color="#E5E5E5"> directly</font>

486
00:23:34,720 --> 00:23:40,179
with the credentials<font color="#CCCCCC"> and</font><font color="#E5E5E5"> your other</font>

487
00:23:36,730 --> 00:23:42,130
stuff in there<font color="#E5E5E5"> we work on the assumption</font>

488
00:23:40,179 --> 00:23:44,140
<font color="#E5E5E5">that those are stored relative</font><font color="#CCCCCC"> to the</font>

489
00:23:42,130 --> 00:23:45,640
<font color="#CCCCCC">user's home directory at the</font><font color="#E5E5E5"> moment we</font>

490
00:23:44,140 --> 00:23:48,370
haven't<font color="#E5E5E5"> found anyone at work that stores</font>

491
00:23:45,640 --> 00:23:50,440
them anywhere<font color="#E5E5E5"> else</font><font color="#CCCCCC"> if we do then we'll</font>

492
00:23:48,370 --> 00:23:54,668
add something to make that configurable

493
00:23:50,440 --> 00:23:56,799
<font color="#CCCCCC">and everything else stuff</font><font color="#E5E5E5"> that runs</font><font color="#CCCCCC"> from</font>

494
00:23:54,669 --> 00:23:59,770
<font color="#CCCCCC">your current</font><font color="#E5E5E5"> directory we just say use</font>

495
00:23:56,799 --> 00:24:03,510
current directory and<font color="#CCCCCC"> if it uses</font><font color="#E5E5E5"> home</font>

496
00:23:59,770 --> 00:24:06,690
directory use that yeah I hope<font color="#E5E5E5"> that</font>

497
00:24:03,510 --> 00:24:06,690
answers your question

498
00:24:13,590 --> 00:24:20,019
so the question was when we melt<font color="#CCCCCC"> current</font>

499
00:24:17,289 --> 00:24:22,210
working directory<font color="#CCCCCC"> how do we know where</font>

500
00:24:20,019 --> 00:24:25,389
to<font color="#E5E5E5"> mandate an image and the answer</font><font color="#CCCCCC"> to</font>

501
00:24:22,210 --> 00:24:28,139
that<font color="#CCCCCC"> is usually that we mount it into a</font>

502
00:24:25,389 --> 00:24:31,658
directory usually referred<font color="#CCCCCC"> to is usually</font>

503
00:24:28,139 --> 00:24:34,539
<font color="#E5E5E5">slash temp slash workspace and then that</font>

504
00:24:31,659 --> 00:24:35,440
is<font color="#CCCCCC"> the workspace that we look</font><font color="#E5E5E5"> there use</font>

505
00:24:34,539 --> 00:24:38,139
when<font color="#CCCCCC"> we're</font><font color="#E5E5E5"> launching</font><font color="#CCCCCC"> the container</font>

506
00:24:35,440 --> 00:24:39,759
that's usually how we do that if we<font color="#CCCCCC"> need</font>

507
00:24:38,139 --> 00:24:42,609
<font color="#E5E5E5">to do anything special for</font><font color="#CCCCCC"> a particular</font>

508
00:24:39,759 --> 00:24:43,840
image<font color="#E5E5E5"> we will configure it per image but</font>

509
00:24:42,609 --> 00:24:59,289
that's the<font color="#CCCCCC"> default that we usually go</font>

510
00:24:43,840 --> 00:25:01,629
with thank you oh and I have stickers

511
00:24:59,289 --> 00:25:06,190
for<font color="#CCCCCC"> the logo</font><font color="#E5E5E5"> if</font><font color="#CCCCCC"> you watch them because</font>

512
00:25:01,629 --> 00:25:09,309
stickers are important and the stickers

513
00:25:06,190 --> 00:25:13,299
will not be on this desk<font color="#CCCCCC"> they will be</font>

514
00:25:09,309 --> 00:25:15,279
outside<font color="#E5E5E5"> just so you know if you want to</font>

515
00:25:13,299 --> 00:25:16,310
<font color="#E5E5E5">give a bunch of secret thing we can pass</font>

516
00:25:15,279 --> 00:25:19,430
them<font color="#E5E5E5"> around we can't I do that</font>

517
00:25:16,310 --> 00:25:19,429
[Music]

